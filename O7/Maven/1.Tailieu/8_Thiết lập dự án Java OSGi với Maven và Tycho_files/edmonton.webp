function ez_attachEvent(element,evt,func){if(element.addEventListener){element.addEventListener(evt,func,false);}else{element.attachEvent("on"+evt,func);}}
function ez_attachEventWithCapture(element,evt,func,useCapture){if(element.addEventListener){element.addEventListener(evt,func,useCapture);}else{element.attachEvent("on"+evt,func);}}
function ez_detachEvent(element,evt,func){if(element.removeEventListener){element.removeEventListener(evt,func);}else{element.detachEvent("on"+evt,func);}}
function ez_getQueryString(field,url){var href=url?url:window.location.href;var reg=new RegExp('[?&]'+field+'=([^&#]*)','i');var string=reg.exec(href);return string?string[1]:null;}(function(root,factory){if(typeof define==='function'&&define.amd){define('ezRiveted',[],factory)}else if(typeof module==='object'&&module.exports){module.exports=factory()}else{root.riveted=factory()}}(this,function(){var riveted=(function(){var started=false,stopped=false,turnedOff=false,clockTime=0,startTime=new Date(),clockTimer=null,idleTimer=null,sendEvent,sendUserTiming,reportInterval,scrollDepth=0,idleTimeout,scrollTimer=0;function init(options){options=options||{};reportInterval=parseInt(options.reportInterval,10)||5;idleTimeout=parseInt(options.idleTimeout,10)||30;if(typeof options.eventHandler=='function'){sendEvent=options.eventHandler}if(typeof options.userTimingHandler=='function'){sendUserTiming=options.userTimingHandler}addListener(document,'keydown',trigger);addListener(document,'click',trigger);addListener(document,'touchstart',trigger);addListener(window,'mousemove',throttle(trigger,500));addListener(window,'scroll',triggerScroll);addListener(document,'visibilitychange',visibilityChange);addListener(document,'webkitvisibilitychange',visibilityChange)}function triggerScroll(){if(scrollTimer>0){clearTimeout(scrollTimer)}setIdle();scrollTimer=setTimeout(function(){stopScroll()},50)}function stopScroll(){clearTimeout(scrollTimer);trigger();setScrollDepth()}function setScrollDepth(){var h=document.documentElement,b=document.body,st='scrollTop',sh='scrollHeight';var percent=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;if(percent>scrollDepth){scrollDepth=percent}}function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}}function addListener(element,eventName,handler){if(element.addEventListener){element.addEventListener(eventName,handler,false)}else if(element.attachEvent){element.attachEvent('on'+eventName,handler)}else{element['on'+eventName]=handler}}sendUserTiming=function(timingValue){};sendEvent=function(time){};function setIdle(){clearTimeout(idleTimer);stopClock()}function visibilityChange(){if(document.hidden||document.webkitHidden){setIdle()}}function clock(){clockTime+=0.1;clockTime=Math.round(clockTime*100)/100;if(clockTime>0&&(clockTime%reportInterval===0)){sendEvent(clockTime)}}function stopClock(){stopped=true;clearInterval(clockTimer)}function turnOff(){setIdle();turnedOff=true}function turnOn(){turnedOff=false}function restartClock(){stopped=false;clearInterval(clockTimer);clockTimer=setInterval(clock,100)}function getEngagedTime(){return Math.round(clockTime)}function getScrollDepth(){return Math.round(scrollDepth)}function startRiveted(){var currentTime=new Date();var diff=currentTime-startTime;started=true;sendUserTiming(diff);clockTimer=setInterval(clock,1000)}function resetRiveted(){startTime=new Date();clockTime=0;started=false;stopped=false;clearInterval(clockTimer);clearTimeout(idleTimer)}function trigger(){if(turnedOff){return}if(!started){startRiveted()}if(stopped){restartClock()}clearTimeout(idleTimer);idleTimer=setTimeout(setIdle,idleTimeout*1000+100)}return{init:init,trigger:trigger,setIdle:setIdle,on:turnOn,off:turnOff,reset:resetRiveted,getTime:getEngagedTime,getScrollDepth:getScrollDepth}})();return riveted}));var ezux=function(){function e(){t(),M.addDeviceSizes(),M.addLocalTime(),M.addLanguage(),m(),o(),h(),y()}function t(){S=0,E=15e3,C="1"==ez_getQueryString("ezux_debug"),k={copyPaste:0,shares:0},I={copyPasteCount:0,engagedTime:0,isEngagedPage:0,scrollDepth:0,unloadTime:0,shareCount:0},q=1800,L=_ezaq.page_view_id,U=10,x=new Date,O={engagedAdded:0,tosAdded:0},N=3e3,F=null}function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function a(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]}function o(){if(n(document,"blur",H.unload),n(document,"copy",H.copyPaste),n(document,"cut",H.copyPaste),n(document,"mouseout",H.mouseOut),n(document,"paste",H.copyPaste),n(window,"beforeunload",H.unload),n(window,"beforeunload",H.addUnloadTime),n(window,"blur",H.unload),n(window,"pagehide",H.unload),n(window,"unload",H.unload),n(window,"load",H.load),n(window,"pageshow",H.pageshow),r(),document.addEventListener){var e=i();F=function(t){document[e.hiddenPropName]?H.unload(t):H.pageshow(t)},document.addEventListener(e.visibilityChangeEventName,F,!1)}else document.attachEvent("onvisibilitychange",H.unload)}function i(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenPropName:e,visibilityChangeEventName:t}}function d(){if(a(document,"blur",H.unload),a(document,"copy",H.copyPaste),a(document,"cut",H.copyPaste),a(document,"mouseout",H.mouseOut),a(document,"paste",H.copyPaste),a(window,"beforeunload",H.unload),a(window,"beforeunload",H.addUnloadTime),a(window,"blur",H.unload),a(window,"pagehide",H.unload),a(window,"unload",H.unload),a(window,"load",H.load),a(window,"pageshow",H.pageshow),c(),document.removeEventListener){var e=i();document.removeEventListener(e.visibilityChangeEventName,F,!1)}else document.detachEvent("onvisibilitychange",H.unload)}function r(){var e=u();if(C){var t=e.map(function(e){return e.href});void 0!==t&&f("[Page Share] "+t.join(", "))}for(var a=0;a<e.length;a++)n(e[a],"click",H.pageshare)}function c(){for(var e=u(),t=0;t<e.length;t++)a(e[t],"click",H.pageshare)}function u(){var e=[];return e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/sharer/sharer.php"]')),e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/sharer.php"]')),e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/share.php"]')),e.push.apply(e,document.querySelectorAll('div[class*="fb-share-button"]')),e.push.apply(e,document.querySelectorAll('a[href*="twitter.com/share"]')),e.push.apply(e,document.querySelectorAll('a[href*="twitter.com/intent/tweet"]')),e.push.apply(e,document.querySelectorAll('iframe[class*="twitter-share-button"]')),e.push.apply(e,document.querySelectorAll('a[href*="plus.google.com/share"]')),e.push.apply(e,document.querySelectorAll('iframe[src*="apis.google.com/u/0/se/0/_/+1/sharebutton"]')),e.push.apply(e,document.querySelectorAll('a[href*="linkedin.com/cws/share"]')),e.push.apply(e,document.querySelectorAll('a[href*="linkedin.com/shareArticle"]')),e.push.apply(e,document.querySelectorAll('a[href*="pinterest.com/pin/create/button"]')),e.push.apply(e,document.querySelectorAll('a[href*="pinterest.com/pin/create/bookmarklet"]')),e.push.apply(e,document.querySelectorAll('a[href*="tumblr.com/share/link"]')),e.push.apply(e,document.querySelectorAll('a[href*="reddit.com/submit"]')),e}function l(e){f("Deleting "+e),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}function s(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function p(e){return e+"_"+did}function g(){return(new Date-x)/1e3}function m(){__ez.bit.Fire(),__ez.pel.Fire()}function _(e){return e>=U}function f(e){C&&console.info("[UX] "+e)}function h(){"function"==typeof define&&define.amd?require(["ezRiveted"],function(e){w(e)}):w(riveted)}function v(){"undefined"!=typeof riveted&&(P=riveted).reset()}function w(e){(P=e).init({reportInterval:5,idleTimeout:30,eventHandler:function(e){f("Event: "+parseInt(e)+" --- Engaged Time: "+parseInt(P.getTime())),P.getTime()>=q&&(f("Turning off timer"),H.unload({type:"max"}),P.off())}})}function y(){S=setInterval(function(){H.unload({type:"auto"}),g()>q&&(f("Turning off auto"),clearInterval(S))},E)}function D(){H.unload({type:"auto"}),clearInterval(S)}function z(){if(f("[Performance] Store performance"),1!=A&&window.performance&&window.performance.timing){var e=performance.timing.navigationStart,t=performance.timing.connectEnd,n=performance.timing.responseStart,a=performance.timing.responseEnd,o=performance.timing.domInteractive,i=performance.timing.domContentLoadedEventEnd,d=performance.timing.domComplete;if(e>0&&d>0){if(window.performance.navigation){var r=performance.navigation.type,c=performance.navigation.redirectCount;__ez.bit.Add(L,[new __ezDotData("navigation_type",r),new __ezDotData("redirect_count",c)])}perf_vals={};var u=t-e,l=n-t,s=a-n,p=o-a,g=i-a,_=d-a;__ez.bit.Add(L,[new __ezDotData("perf_is_tracked",1),new __ezDotData("perf_nav_to_connect",u),new __ezDotData("perf_connect_to_resp_start",l),new __ezDotData("perf_resp_time",s),new __ezDotData("perf_interactive",p),new __ezDotData("perf_contentloaded",g),new __ezDotData("perf_complete",_)]),f("[Performance] perf_nav_to_connect: "+u),f("[Performance] perf_connect_to_resp_start: "+l),f("[Performance] perf_resp_time: "+s),f("[Performance] perf_interactive: "+p),f("[Performance] perf_contentloaded: "+g),f("[Performance] perf_complete: "+_),A=!0,m()}}}function b(){var e=p("ezux_et"),t=p("ezux_tos"),n=P.getTime()-O.engagedAdded,a=g()-O.tosAdded,o=s(e),i=s(t);n==I.engagedTime&&(n=0);var d=parseInt(n)+parseInt(""==o?0:o),r=parseInt(a)+parseInt(""==i?0:i);f("[Times] Total Engaged: "+d+" (+"+n+")"),f("[Times] Total TOS: "+r+" (+"+a+")"),document.cookie=e+"="+d,document.cookie=t+"="+r,O.engagedAdded+=n,O.tosAdded+=a}function T(e){var t=e.split(" ");2!==t.length&&f("Invalid ezoawesome cookie value");var n=t[0],a=t[1];if(!isNaN(a)){var o=Math.floor((Date.now()-a)/1e3);__ez.pel.AddById(n,[new __ezDotData("click_bounce_time",o)]),f("[Bounce] impId: "+n),f("[Bounce] bounceTime: "+o)}}if("undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("page_view_id")){var P,A=!1,S=0,E=15e3,C="1"==ez_getQueryString("ezux_debug"),k={copyPaste:0,shares:0},I={copyPasteCount:0,engagedTime:0,isEngagedPage:0,scrollDepth:0,unloadTime:0,shareCount:0},q=1800,L=_ezaq.page_view_id,U=10,x=new Date,O={engagedAdded:0,tosAdded:0},N=3e3,F=null,H={copyPaste:function(){k.copyPaste++},mouseOut:function(e){if(void 0!==(e=e||window.event)&&void 0!==e.target&&void 0!==e.target.tagName&&"input"!==e.target.tagName.toLowerCase()){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);e.clientX>=t-50||e.clientY>=50||e.relatedTarget||e.toElement||H.unload(e)}},load:function(e){z()},unload:function(e){var t=(new Date).getTime();(0===I.unloadTime||t>I.unloadTime+N)&&(b(),z(),M.unloadAll(e),I.unloadTime=t)},pageshow:function(e){var t=p("ezoawesome"),n=s(t);n.length>0&&(f("Bounce ("+t+") detected with val "+n),T(n),l(t))},pageshare:function(e){k.shares++,M.addPageShares()},addUnloadTime:function(e){M.addUnloadTime()}},M={addCopyPaste:function(){k.copyPaste>0&&k.copyPaste!=I.copyPasteCount&&(__ez.bit.Add(L,[new __ezDotData("copy_paste_count",k.copyPaste)]),I.copyPasteCount=k.copyPaste)},addDeviceSizes:function(){f("Storing device sizes"),__ez.bit.Add(L,[new __ezDotData("device_width",screen.width),new __ezDotData("device_height",screen.height)])},addEngagedTimes:function(e){e!=I.engagedTime&&(__ez.bit.Add(L,[new __ezDotData("engaged_time",e)]),I.engagedTime=e)},addIsEngagedPage:function(e){0==I.isEngagedPage&&_(e)&&(__ez.bit.Add(L,[new __ezDotData("is_engaged_page",1)]),I.isEngagedPage=1)},addIsFirstEngagedPage:function(e){var t=p("ezux_ifep");0==s(t).length&&_(e)&&(f("Adding first engaged cookie"),document.cookie=t+"=true",__ez.bit.Add(L,[new __ezDotData("is_first_engaged_page",1)]))},addLanguage:function(){f("Storing language tag");var e=window.navigator.userLanguage||window.navigator.language,t=e.split("-");if(void 0!==e&&""!==e&&(e.length>36&&(e=e.substring(0,36)),__ez.bit.Add(L,[new __ezDotData("language_tag",e)])),t.length>=2){var n=t[0];n>8&&(n=n.substring(0,8)),__ez.bit.Add(L,[new __ezDotData("language_primary_subtag",n)])}},addLocalTime:function(){f("Storing local time");var e=new Date,t=e.getTimezoneOffset();if(!(t<-840||t>720)){var n=new Date(e-6e4*t);if(!(Math.abs(n-e)/36e5>14)){Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}();var a=n.toISOString().slice(0,19).replace("T"," ").split(" ")[0];if(!(a.length<1||"0"==a[0])){var o=e.getHours(),i=e.getDay();__ez.bit.Add(L,[new __ezDotData("t_local_date",a),new __ezDotData("t_local_hour",o),new __ezDotData("t_local_day_of_week",i),new __ezDotData("t_local_timezone",t)])}}}},addScrollDepth:function(){var e=P.getScrollDepth();e!=I.scrollDepth&&(__ez.bit.Add(L,[new __ezDotData("scroll_percent_vertical",e)]),I.scrollDepth=e)},addPageShares:function(){k.shares>0&&k.shares!=I.shareCount&&(f("[Page Share] Store page shares: "+k.shares),__ez.bit.Add(L,[new __ezDotData("share",k.shares)]),I.shareCount=k.shares)},addUnloadTime:function(){__ez.bit.Add(L,[new __ezDotData("t_unload",(new Date).getTime())]),__ez.bit.Fire()},unloadAll:function(e){var t=P.getTime();M.addEngagedTimes(t),M.addCopyPaste(),M.addScrollDepth(),M.addIsEngagedPage(t),M.addIsFirstEngagedPage(t),M.addPageShares(),f("Unload ("+e.type+")"),m()}};return e(),{init:e,destroy:function(){D(),d(),v()}}}}();