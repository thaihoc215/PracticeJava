<!DOCTYPE html>
<!-- saved from url=(0088)https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau -->
<html lang="vi" class="gr__o7planning_org"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/async-ads.js.download"></script><script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource"></script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/rules-p-31iz6hfFutd16.js.download" async=""></script><script type="text/javascript" async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/bidexchange.js.download"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy8&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-medrectangle-1&amp;sz=970x250&amp;scp=iid19%3D1846309%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1117%26sap%3D1117%26a%3D%257C2%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D30%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D4%26al%3D1004%26compid%3D0%26tap%3Do7planning_org-medrectangle-1-1846309%26bv%3D2%26acptad%3D1%26br1%3D1500%26br2%3D750%26ezoic%3D1%26deal1%3D21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604752354&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=2822396011&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=37a5d7&amp;color_text=000000&amp;color_url=F0F0F0&amp;ifi=8&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=83&amp;icsg=2459992784896&amp;std=0&amp;csl=13&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/get_counts"></script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/quant.js.download" async="" type="text/javascript"></script><script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/beacon.js.download"></script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/dmedianet.js.download" async=""></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy7&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-large-leaderboard-1&amp;sz=336x280&amp;scp=iid19%3D1844700%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1108%26sap%3D1108%26a%3D%257C1%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D30%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D0%26al%3D1035%26compid%3D0%26tap%3Do7planning_org-large-leaderboard-1-1844700%26bv%3D2%26br1%3D4200%26br2%3D2100%26ezoic%3D1%26stl%3D66%26deal1%3D25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604752349&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=2590244601&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=1a0dab&amp;color_text=545454&amp;color_url=006621&amp;ifi=7&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=76&amp;icsg=2252414811881472&amp;std=0&amp;csl=80&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy6&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-large-billboard-2&amp;sz=336x280&amp;scp=iid20%3D1904397%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1116%26sap%3D1116%26a%3D%257C6%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D120%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D0%26al%3D1034%26compid%3D0%26tap%3Do7planning_org-large-billboard-2-1904397%26bv%3D12%26br1%3D550%26br2%3D280%26ezoic%3D1%26deal1%3D21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604752226&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=527548781&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=858585&amp;color_text=000000&amp;color_url=F0F0F0&amp;ifi=6&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=74&amp;icsg=2252414811881472&amp;std=0&amp;csl=78&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/dmedianet.js.download" async=""></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy5&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-box-1&amp;sz=336x280&amp;scp=iid19%3D1872144%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1138%26sap%3D1138%26a%3D%257C1%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D30%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D1%26al%3D1000%26compid%3D0%26tap%3Do7planning_org-box-1-1872144%26bv%3D12%26acptad%3D1%26br1%3D60%26br2%3D30%26ezoic%3D1%26stl%3D24%26deal1%3D17%2C19%2C20%2C21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604752131&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=1325101572&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=1a0dab&amp;color_text=545454&amp;color_url=006621&amp;ifi=5&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=71&amp;icsg=2252414811881472&amp;std=0&amp;csl=66&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy4&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-box-4&amp;sz=300x250&amp;scp=iid19%3D1842876%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1105%26sap%3D1105%26a%3D%257C124%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dn%26refs%3D120%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D6%26al%3D1003%26compid%3D0%26tap%3Do7planning_org-box-4-1842876%26bv%3D14%26br1%3D1700%26br2%3D850%26ezoic%3D1%26stl%3D33%26deal1%3D21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604752124&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=1047270526&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=FF0000&amp;color_text=000000&amp;color_url=FF0000&amp;ifi=4&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=69&amp;icsg=2252414811881472&amp;std=0&amp;csl=13&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy3&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-large-leaderboard-2&amp;sz=336x280&amp;scp=iid19%3D1891499%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1112%26sap%3D1112%26a%3D%257C5%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dn%26refs%3D120%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D0%26al%3D1036%26compid%3D0%26tap%3Do7planning_org-large-leaderboard-2-1891499%26bv%3D2%26br1%3D280%26br2%3D140%26ezoic%3D1%26deal1%3D20%2C21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604751877&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=3325195990&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=20929A&amp;color_text=000000&amp;color_url=F0F0F0&amp;ifi=3&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=63&amp;icsg=703725879163904&amp;std=0&amp;csl=80&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy2&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-medrectangle-3&amp;sz=300x250&amp;scp=iid19%3D1882031%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1102%26sap%3D1102%26a%3D%257C1%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D120%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D8%26al%3D1021%26compid%3D0%26tap%3Do7planning_org-medrectangle-3-1882031%26bv%3D17%26br1%3D1000%26br2%3D500%26ezoic%3D1%26stl%3D33%26deal1%3D21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604751773&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=9513513&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=1a0dab&amp;color_text=545454&amp;color_url=006621&amp;ifi=2&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=60&amp;icsg=140775925742592&amp;std=0&amp;csl=14&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&amp;correlator=3718956993538140&amp;output=json_html&amp;callback=googletag.impl.pubads.callbackProxy1&amp;impl=fif&amp;eid=21061583%2C21061149%2C21061241%2C21061569&amp;sc=1&amp;sfv=1-0-17&amp;iu=%2F1254144%2Fo7planning_org-box-2&amp;sz=728x90&amp;scp=iid19%3D1896877%26t%3D134%26d%3D22529%26t1%3D134%26pvc%3D1%26ap%3D1118%26sap%3D1118%26a%3D%257C2%257C%26as%3Drevenue%26plat%3D1%26bra%3Dmod6%26ic%3D1%26at%3Dmbf%26adr%3D399%26reft%3Dtf%26refs%3D120%26ga%3D2497208%26gala%3D2709606%26rid%3D99998%26pt%3D7%26al%3D1001%26compid%3D0%26tap%3Do7planning_org-box-2-1896877%26bv%3D11%26acptad%3D1%26br1%3D200%26br2%3D100%26ezoic%3D1%26stl%3D25%26deal1%3D20%2C21%2C22%2C23%2C24%2C25%2C26&amp;cookie_enabled=1&amp;abxe=1&amp;lmt=1521218249&amp;dt=1521604751758&amp;frm=20&amp;biw=1903&amp;bih=959&amp;oid=3&amp;adx=0&amp;ady=0&amp;adk=1238052273&amp;gut=v2&amp;color_bg=FFFFFF&amp;color_border=FFFFFF&amp;color_link=37a5d7&amp;color_text=000000&amp;color_url=F0F0F0&amp;ifi=1&amp;u_tz=420&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1050&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=5&amp;u_sd=1&amp;flash=29.0.0&amp;url=https%3A%2F%2Fo7planning.org%2Fvi%2F10201%2Fhuong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau&amp;ref=https%3A%2F%2Fo7planning.org%2Fvi%2F10969%2Fjava-hibernate&amp;dssz=54&amp;icsg=2402336704&amp;std=0&amp;vrg=188&amp;vis=2&amp;dmc=8&amp;scr_x=0&amp;scr_y=0&amp;ga_vid=8048970.1521446364&amp;ga_sid=1521604733&amp;ga_hid=1657064756&amp;ga_fc=true&amp;ga_wpids=UA-78247107-43"></script><script src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_rendering_188.js"></script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/dmedianet.js.download" async=""></script><script type="text/javascript" async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/cse.js.download"></script><script type="text/javascript" async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/ga.js.download"></script><script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/follow.js.download" charset="UTF-8" crossorigin="*"></script><script async="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/5a894328992ac400137604f8.js.download"></script><script async="" type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/gpt.js.download"></script><script data-cfasync="false" data-pagespeed-no-defer="">var __ez=__ez||{};__ez.evt={};__ez.ck={};__ez.dot={};__ez.template={};__ez.template.isOrig=false;__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.ck.get=function(n,e){null!==e&&(n=n+"_"+e);for(var t=n+"=",r=decodeURIComponent(document.cookie),o=r.split(";"),i=0;i<o.length;i++){for(var u=o[i];" "===u.charAt(0);)u=u.substring(1);if(0===u.indexOf(t))return u.substring(t.length,u.length)}return""};__ez.queue=function(){var e=0,i=0,t=[],n=[],r=[],o=!0,s={func:function(e,i,n,r,o,s,a){var l=this;this.name=e,this.funcName=i,this.parameters=null===n?null:n instanceof Array?n:[n],this.isBlock=r,this.blockedBy=o,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.process=function(){c("... func = "+e),l.isInitialized=!0,l.isComplete=!0;var i=l.funcName.split(".");i.length>3||(3===i.length?window[i[0]][i[1]][i[2]].apply(null,this.parameters):2===i.length?window[i[0]][i[1]].apply(null,this.parameters):window[l.funcName].apply(null,this.parameters)),!0===l.deleteWhenComplete&&delete t[e],!0===l.isBlock&&(c("----- F'D: "+l.name),d())}},file:function(e,i,t,n,r,o,s){var a=this;this.name=e,this.path=i,this.async=r,this.defer=o,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.process=function(){a.isInitialized=!0,c("... file = "+e);var t=document.createElement("script");t.src=i,!0===r?t.async=!0:!0===o&&(t.defer=!0),t.onerror=function(){c("----- ERR'D: "+a.name),a.isError=!0,!0===a.isBlock&&d()},t.onreadystatechange=t.onload=function(){var e=t.readyState;c("----- F'D: "+a.name),e&&!/loaded|complete/.test(e)||(a.isComplete=!0,!0===a.isBlock&&d())},document.getElementsByTagName("head")[0].appendChild(t)}}};function a(e){!0!==l(e)&&0!=o&&e.process()}function l(e){if(e.blockedBy instanceof Array)for(var i=0;i<e.blockedBy.length;i++){var n=e.blockedBy[i];if(!1===t.hasOwnProperty(n))return c(e.name+" blocked = "+n),!0;if(!0===e.proceedIfError&&!0===t[n].isError)return!1;if(!1===t[n].isComplete)return c(e.name+" blocked = "+n),!0}return!1}function c(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function d(){++e>200||(c("let's go"),h(n),h(r))}function h(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||l(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?c(t.name+": error"):!0===t.isComplete?c(t.name+": complete already"):!0===t.isInitialized&&c(t.name+": initialized already"):t.process()}}return{addFile:function(e,i,o,l,c,d,h,f){var u=new s.file(e,i,o,l,c,d,h);!0===f?n[e]=u:r[e]=u,t[e]=u,a(u)},addFunc:function(e,o,l,c,d,h,f,u,p){!0===h&&(e=e+"_"+i++);var m=new s.func(e,o,l,c,d,f,u);!0===p?n[e]=m:r[e]=m,t[e]=m,a(m)},items:t,processAll:d,setallowLoad:function(e){o=e}}}();var __ezDotData=function(e,r){this.name=e,this.val=r};__ez.dot.b64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var r,t,n,o,a,d,i,f="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)o=(r=e.charCodeAt(c++))>>2,a=(3&r)<<4|(t=e.charCodeAt(c++))>>4,d=(15&t)<<2|(n=e.charCodeAt(c++))>>6,i=63&n,isNaN(t)?d=i=64:isNaN(n)&&(i=64),f=f+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(d)+this._keyStr.charAt(i);return f},decode:function(e){var r,t,n,o,a,d,i="",f=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");f<e.length;)r=this._keyStr.indexOf(e.charAt(f++))<<2|(o=this._keyStr.indexOf(e.charAt(f++)))>>4,t=(15&o)<<4|(a=this._keyStr.indexOf(e.charAt(f++)))>>2,n=(3&a)<<6|(d=this._keyStr.indexOf(e.charAt(f++))),i+=String.fromCharCode(r),64!=a&&(i+=String.fromCharCode(t)),64!=d&&(i+=String.fromCharCode(n));return i=Base64._utf8_decode(i)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?r+=String.fromCharCode(n):n>127&&n<2048?(r+=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128))}return r},_utf8_decode:function(e){for(var r="",t=0,n=c1=c2=0;t<e.length;)(n=e.charCodeAt(t))<128?(r+=String.fromCharCode(n),t++):n>191&&n<224?(c2=e.charCodeAt(t+1),r+=String.fromCharCode((31&n)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),r+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),t+=3);return r}},__ez.dot.dataToStr=function(e){if(void 0===e)return[];try{for(var r in e)e[r].val=e[r].val+""}catch(e){}return e},__ez.dot.getCC=function(){var e="XX";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&(e=_ezaq.country),e},__ez.dot.getDID=function(){var e="0";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("domain_id")&&(e=_ezaq.domain_id.toString()),e},__ez.dot.getEpoch=function(e){return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("t_epoch")&&(e=_ezaq.t_epoch),e},__ez.dot.getURL=function(e){return("undefined"!=typeof ezJsu&&1==ezJsu||"undefined"!=typeof _ez_sa&&1==_ez_sa||"undefined"!=typeof isAmp&&!0===isAmp||"undefined"!=typeof ezWp&&!0===ezWp)&&(e="//g.ezoic.net"+e),e},__ez.dot.isValid=function(e){for(var r=0;r<e.length;r++)if(e[r]instanceof __ezDotData==!1)return console.error("Invalid data. ",e[r]),!1;return!0},__ez.dot.isDefined=function(){for(var e=0;e<arguments.length;e++)if(void 0===arguments[e]||null===arguments[e])return console.error("Argument not defined. ",arguments),!1;return!0};__ez.bit=function(){function c(a,b){d(a,b),e()}function d(b,c){__ez.dot.isDefined(b)&&__ez.dot.isValid(c)&&a.push({type:"pageview",pageview_id:b,domain_id:__ez.dot.getDID(),t_epoch:__ez.dot.getEpoch(0),data:__ez.dot.dataToStr(c)})}function e(){void 0!==document.visibilityState&&"prerender"===document.visibilityState||(__ez.dot.isDefined(a)&&a.length>0&&((new Image).src=__ez.dot.getURL(b)+"?orig="+(!0===__ez.template.isOrig?1:0)+"&ds="+btoa(JSON.stringify(a))),a=[])}var a=[],b="/detroitchicago/greenoaks.gif";return{Add:d,AddAndFire:c,Fire:e}}();</script><script data-cfasync="false" data-pagespeed-no-defer="">__ez.pel=function(){function c(a,b){d(a,b,0,0,0,0,0),f()}function d(b,c,d,e,f,h,i){if(__ez.dot.isDefined(b,b.getSlotElementId)){var j=parseInt(b.getTargeting("ap")[0]),k=b.getSizes()[0],l=k.l.toString()+"x"+k.j.toString(),m=g(b),n=b.getSlotElementId();__ez.dot.isDefined(m,n)&&__ez.dot.isValid(c)&&a.push({type:"impression",impression_id:m,domain_id:__ez.dot.getDID(),unit:n,t_epoch:__ez.dot.getEpoch(0),revenue:d,est_revenue:e,ad_position:j,ad_size:l,bid_floor_filled:f,bid_floor_prev:h,stat_source_id:i,country_code:__ez.dot.getCC(),data:__ez.dot.dataToStr(c)})}}function e(b,c){var d=b.split("/");if(__ez.dot.isDefined(b)&&3===d.length&&__ez.dot.isValid(c)){var e=d[0],f=d[2];a.push({type:"impression",impression_id:f,domain_id:__ez.dot.getDID(),unit:e,t_epoch:__ez.dot.getEpoch(0),data:__ez.dot.dataToStr(c)})}}function f(){void 0!==document.visibilityState&&"prerender"===document.visibilityState||(__ez.dot.isDefined(a)&&a.length>0&&((new Image).src=__ez.dot.getURL(b)+"?orig="+(!0===__ez.template.isOrig?1:0)+"&sts="+btoa(JSON.stringify(a))),a=[])}function g(a){var b=0;try{var c=a.getTargetingMap();if(-1===a.getSlotElementId().indexOf("div-gpt-ad"))return b;if(void 0!==c)for(var e in c)if(-1!==e.indexOf("iid")&&void 0!==c[e][0]){b=c[e][0];break}}catch(a){}return b}var a=[],b="/porpoiseant/army.gif";return{Add:d,AddAndFire:c,AddById:e,Fire:f}}();var EzoicPixel=function(){this.pixels=[],this.pixelUrl="/ezoic/e.gif",("undefined"!=typeof ezJsu&&!0===ezJsu||"undefined"!=typeof _ez_sa&&!0===_ez_sa||void 0!==window.isAmp&&!0===isAmp||"undefined"!=typeof ezWp&&!0===ezWp)&&(this.pixelUrl="//g.ezoic.net"+this.pixelUrl),this.tEpoch=0,"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("t_epoch")&&(this.tEpoch=_ezaq.t_epoch)},EzoicPixelData=function(i,e){this.name=i,this.val=e};EzoicPixel.prototype={constructor:EzoicPixel,AddAndFireImpPixel:function(i,e){this.AddImpPixel(i,e,0,0,0,0,0),this.FirePixels()},AddAndFirePVPixel:function(i,e){this.AddPVPixel(i,e),this.FirePixels()},AddImpPixel:function(i,e,t,n,o,a,r){if(this.isDefined(i,i.getSlotElementId)){var d=parseInt(i.getTargeting("ap")[0]),s=i.getSizes()[0],p=s.l.toString()+"x"+s.j.toString(),l="0",h="XX";"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("domain_id")&&(l=_ezaq.domain_id.toString()),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&(h=_ezaq.country);var f=this.getSlotIID(i),c=i.getSlotElementId();this.isDefined(f,c)&&this.validateData(e)&&(e=this.convertDataToStr(e),this.pixels.push({type:"impression",impression_id:f,domain_id:l,unit:c,t_epoch:this.tEpoch,revenue:t,est_revenue:n,ad_position:d,ad_size:p,bid_floor_filled:o,bid_floor_prev:a,stat_source_id:r,country_code:h,data:e}))}},AddImpPixelById:function(i,e){var t="0";"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("domain_id")&&(t=_ezaq.domain_id.toString());var n=i.split("/");if(this.isDefined(i)&&3===n.length&&this.validateData(e)){var o=n[0],a=n[2];e=this.convertDataToStr(e),this.pixels.push({type:"impression",impression_id:a,domain_id:t,unit:o,t_epoch:this.tEpoch,data:e})}},AddPVPixel:function(i,e){var t="0";"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("domain_id")&&(t=_ezaq.domain_id.toString()),this.isDefined(i)&&this.validateData(e)&&(e=this.convertDataToStr(e),this.pixels.push({type:"pageview",pageview_id:i,domain_id:t,t_epoch:this.tEpoch,data:e}))},FirePixels:function(){void 0!==document.visibilityState&&"prerender"===document.visibilityState||(this.isDefined(this.pixels)&&this.pixels.length>0&&((new Image).src=this.pixelUrl+"?orig="+(!0===__ez.template.isOrig?1:0)+"&pixels="+encodeURIComponent(JSON.stringify(this.pixels))),this.pixels=[])},NewData:function(i,e){return new EzoicPixelData(i,e)},convertDataToStr:function(i){if(void 0===i)return[];try{for(var e in i)i[e].val=i[e].val+""}catch(i){}return i},getSlotIID:function(i){var e=0;try{var t=i.getTargetingMap();if(-1===i.getSlotElementId().indexOf("div-gpt-ad"))return e;if(void 0!==t)for(var n in t)if(-1!==n.indexOf("iid")&&void 0!==t[n][0]){e=t[n][0];break}}catch(i){}return e},isDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0===arguments[i]||null===arguments[i])return console.error("Argument not defined. ",arguments),!1;return!0},validateData:function(i){for(var e=0;e<i.length;e++)if(i[e]instanceof EzoicPixelData==!1)return console.error("Invalid pixelData. ",i[e]),!1;return!0}};</script>
<script type="text/javascript">
	var __banger_pmp_deals=[{"SlotName":"/1254144/o7planning_org-large-leaderboard-1","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100},{"DealId":20,"Floor":300},{"DealId":21,"Floor":2000},{"DealId":22,"Floor":2500},{"DealId":23,"Floor":3000},{"DealId":24,"Floor":4000}]},{"SlotName":"/1254144/o7planning_org-box-1","Deals":[{"DealId":18,"Floor":25}]},{"SlotName":"/1254144/o7planning_org-large-leaderboard-2","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100}]},{"SlotName":"/1254144/o7planning_org-medrectangle-3","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100},{"DealId":20,"Floor":300}]},{"SlotName":"/1254144/o7planning_org-large-billboard-2","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100},{"DealId":20,"Floor":300}]},{"SlotName":"/1254144/o7planning_org-box-4","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100},{"DealId":20,"Floor":300}]},{"SlotName":"/1254144/o7planning_org-box-2","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100}]},{"SlotName":"/1254144/o7planning_org-medrectangle-1","Deals":[{"DealId":17,"Floor":160},{"DealId":18,"Floor":25},{"DealId":19,"Floor":100},{"DealId":20,"Floor":300}]}];
</script>
<script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">
function ez_isclean( data ) {
    if (typeof data === 'undefined') { data = document.URL; }
    var re = /(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))(@|%2540|%40)((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;
    var isClean = !re.test(data);
    return isClean;
}

var ez_queue = new Array();
function sort_queue(a, b)
{
  if( a.priority < b.priority ) return -1;
  else if( a.priority == b.priority ) return 0;
  else return 1;
}
function execute_ez_queue()
{
  ez_queue.sort( sort_queue );

  for( var i in ez_queue )
  {
        if(typeof ez_queue[i].method != "undefined")
        {
            try{
                ez_queue[i].method.call( null );
            }
            catch (err) {

            }
        }
  }
}

window.ez_ad_units = new Array();
window.ezslots = new Array();
function ez_write_tag(d) {
    if(ez_isclean() && d instanceof Array) {

		ez_ad_units[ez_ad_units.length] = d;
        var ezcmd = "googletag.cmd.push(function() {var divid = 'div-gpt-ad-"+d[1]+"-0';if(typeof ezlrarn == 'function'){ezlrarn(divid);}googletag.display(divid);var to = 0;if("+d[2]+".getTargeting('ga')[0] == '0'){to = 500;console.log('"+d[2]+" - no google');}if(window.ezDisableInitialLoad==true){setTimeout(function(){googletag.pubads().refresh(["+d[2]+"])},to);}});";
		return ezcmd;
    }
    else {
        return "1+1";
    }
}
function in_array(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
}
</script><script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">var ezrpos = new Array();var ez_current_interval;var ez_current_load = 0;</script>
<script data-cfasync="false" type="text/javascript" data-pagespeed-no-defer="" src="https://go.ezoic.net/porpoiseant/dall2.js" async=""></script>
<script data-cfasync="false" type="text/javascript" data-pagespeed-no-defer="">
function epbjsRefreshSlot(e){epbjs.que.push(function(){epbjs.requestBids({adUnitCodes:[e.getSlotElementId()],bidsBackHandler:function(){epbjs.setTargetingForGPTAsync([e.getSlotElementId()])}})})}var epbjs=epbjs||{};epbjs.bidderTimeout=2000,epbjs.useAdj=true,epbjs.que=epbjs.que||[],epbjs.ezdss=epbjs.ezdss||[],epbjs.ezobid=epbjs.ezobid||[],epbjs.que.push(function(){var e=[{code: 'div-gpt-ad-o7planning_org-large-leaderboard-1-0', sizes: [[336,280],[300,250]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '300X250', cp: 560269, ct: 472597 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-box-1-0', sizes: [[336,280],[300,250]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '300X250', cp: 560269, ct: 472597 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-large-leaderboard-2-0', sizes: [[300,250],[336,280]], bids: [{bidder: 'brealtime', params: { placementId: '0' }},{bidder: 'pulsepoint', params: { cf: '', cp: 560269, ct: 0 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-medrectangle-3-0', sizes: [[300,250]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '300X250', cp: 560269, ct: 472597 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-large-billboard-2-0', sizes: [[336,280],[300,250]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '300X250', cp: 560269, ct: 472597 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-box-4-0', sizes: [[300,250]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '300X250', cp: 560269, ct: 472597 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-box-2-0', sizes: [[728,90]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '728X90', cp: 560269, ct: 472601 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] },{code: 'div-gpt-ad-o7planning_org-medrectangle-1-0', sizes: [[970,250],[970,90],[728,90]], bids: [{bidder: 'brealtime', params: { placementId: '10892138' }},{bidder: 'pulsepoint', params: { cf: '728X90', cp: 560269, ct: 472601 }},{bidder: 'sonobi', params: { placement_id: '507eb80cf92592557f50' }}] }];epbjs.addAdUnits(e);epbjs.aliasBidder('appnexus', 'brealtime');epbjs.SS={"brealtime":10039,"pulsepoint":10019,"sonobi":10048},epbjs.bidderSettings={brealtime: { bidCpmAdjustment: function(bidCpm) { var adj1 = bidCpm * 1.000000; var adj2 = adj1 * 1.200000; return adj2; }},pulsepoint: { bidCpmAdjustment: function(bidCpm) { var adj1 = bidCpm * 0.750000; var adj2 = adj1 * 1.200000; return adj2; }},sonobi: { bidCpmAdjustment: function(bidCpm) { var adj1 = bidCpm * 0.700000; var adj2 = adj1 * 1.200000; return adj2; }},standard:{adserverTargeting:[{key:"hb_bidder",val:function(e){return e.bidderCode}},{key:"hb_adid",val:function(e){return e.adId}},{key:"hb_pb",val:function(e){var s=e.cpm;return 5>s?(Math.floor(100*s)/100).toFixed(2):(Math.floor(10*s)/10).toFixed(2)}},{key:"hb_ssid",val:function(e){return"ehb"==e.bidder?0:"undefined"!=typeof epbjs.SS[e.bidder]?epbjs.SS[e.bidder]:(console.error("epbjs: NO MATCH"),0)}}]}},epbjs.onEvent("bidWon",function(e){"ehb"==e.bidder?epbjs.ezdss[e.adUnitCode]=e.ss:"undefined"!=typeof epbjs.SS[e.bidder]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[e.bidder],1==epbjs.useAdj&&["sovrn","openx","pulsepoint","defymedia","aol","conversant","districtm","admedia","brealtime","sonobi","criteo"].indexOf(e.bidder)>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/1.200000)):console.error("epbjs: NO MATCH")}),epbjs.requestBids({bidsBackHandler:function(e){epbjs.fastLoadAuctionEnd = true; epbjs.setTargetingForGPTAsync()}})});
</script><script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">window.isEZABL=false;window.ezmadspc=300;window.ezoViewCheck = false;</script><script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">window.ezDisableInitialLoad=false;</script><script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">
window.googletag = window.googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') +
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();



</script>
<script data-cfasync="false" data-pagespeed-no-defer="" type="text/javascript">
googletag.cmd.push(function() {googletag.destroySlots();if(typeof window.isEZABL == 'undefined' || window.isEZABL != true) {ezslot_0 = googletag.defineSlot('/1254144/o7planning_org-large-leaderboard-1',[336,280],'div-gpt-ad-o7planning_org-large-leaderboard-1-0').addService(googletag.pubads()).setTargeting('iid19','1844700').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1108').setTargeting('sap','1108').setTargeting('a','|1|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','30').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','0').setTargeting('al','1035').setTargeting('compid','0').setTargeting('tap','o7planning_org-large-leaderboard-1-1844700').setTargeting('bv','2').setCollapseEmptyDiv(false).setTargeting('br1','4200').setTargeting('br2','2100').setTargeting('ezoic','1').setTargeting('stl','66').setTargeting('deal1',[25,26]);ezslot_0.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','1a0dab').set('adsense_text_color','545454').set('adsense_url_color','006621');ezrpos[0]="0";ezslot_1 = googletag.defineSlot('/1254144/o7planning_org-box-1',[336,280],'div-gpt-ad-o7planning_org-box-1-0').addService(googletag.pubads()).setTargeting('iid19','1872144').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1138').setTargeting('sap','1138').setTargeting('a','|1|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','30').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','1').setTargeting('al','1000').setTargeting('compid','0').setTargeting('tap','o7planning_org-box-1-1872144').setTargeting('bv','12').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','60').setTargeting('br2','30').setTargeting('ezoic','1').setTargeting('stl','24').setTargeting('deal1',[17,19,20,21,22,23,24,25,26]);ezslot_1.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','1a0dab').set('adsense_text_color','545454').set('adsense_url_color','006621');ezrpos[1]="1";ezslot_2 = googletag.defineSlot('/1254144/o7planning_org-large-leaderboard-2',[336,280],'div-gpt-ad-o7planning_org-large-leaderboard-2-0').addService(googletag.pubads()).setTargeting('iid19','1891499').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1112').setTargeting('sap','1112').setTargeting('a','|5|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','n').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','0').setTargeting('al','1036').setTargeting('compid','0').setTargeting('tap','o7planning_org-large-leaderboard-2-1891499').setTargeting('bv','2').setCollapseEmptyDiv(false).setTargeting('br1','280').setTargeting('br2','140').setTargeting('ezoic','1').setTargeting('deal1',[20,21,22,23,24,25,26]);ezslot_2.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','20929A').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[2]="2";ezslot_3 = googletag.defineSlot('/1254144/o7planning_org-medrectangle-3',[300,250],'div-gpt-ad-o7planning_org-medrectangle-3-0').addService(googletag.pubads()).setTargeting('iid19','1882031').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1102').setTargeting('sap','1102').setTargeting('a','|1|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','8').setTargeting('al','1021').setTargeting('compid','0').setTargeting('tap','o7planning_org-medrectangle-3-1882031').setTargeting('bv','17').setCollapseEmptyDiv(false).setTargeting('br1','1000').setTargeting('br2','500').setTargeting('ezoic','1').setTargeting('stl','33').setTargeting('deal1',[21,22,23,24,25,26]);ezslot_3.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','1a0dab').set('adsense_text_color','545454').set('adsense_url_color','006621');ezrpos[3]="3";ezslot_4 = googletag.defineSlot('/1254144/o7planning_org-large-billboard-2',[336,280],'div-gpt-ad-o7planning_org-large-billboard-2-0').addService(googletag.pubads()).setTargeting('iid20','1904397').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1116').setTargeting('sap','1116').setTargeting('a','|6|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','0').setTargeting('al','1034').setTargeting('compid','0').setTargeting('tap','o7planning_org-large-billboard-2-1904397').setTargeting('bv','12').setCollapseEmptyDiv(false).setTargeting('br1','550').setTargeting('br2','280').setTargeting('ezoic','1').setTargeting('deal1',[21,22,23,24,25,26]);ezslot_4.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','858585').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[4]="4";ezslot_5 = googletag.defineSlot('/1254144/o7planning_org-box-4',[300,250],'div-gpt-ad-o7planning_org-box-4-0').addService(googletag.pubads()).setTargeting('iid19','1842876').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1105').setTargeting('sap','1105').setTargeting('a','|124|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','n').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','6').setTargeting('al','1003').setTargeting('compid','0').setTargeting('tap','o7planning_org-box-4-1842876').setTargeting('bv','14').setCollapseEmptyDiv(false).setTargeting('br1','1700').setTargeting('br2','850').setTargeting('ezoic','1').setTargeting('stl','33').setTargeting('deal1',[21,22,23,24,25,26]);ezslot_5.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','FF0000').set('adsense_text_color','000000').set('adsense_url_color','FF0000');ezrpos[5]="5";ezslot_6 = googletag.defineSlot('/1254144/o7planning_org-box-2',[728,90],'div-gpt-ad-o7planning_org-box-2-0').addService(googletag.pubads()).setTargeting('iid19','1896877').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1118').setTargeting('sap','1118').setTargeting('a','|2|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','7').setTargeting('al','1001').setTargeting('compid','0').setTargeting('tap','o7planning_org-box-2-1896877').setTargeting('bv','11').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','200').setTargeting('br2','100').setTargeting('ezoic','1').setTargeting('stl','25').setTargeting('deal1',[20,21,22,23,24,25,26]);ezslot_6.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','37a5d7').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[6]="6";ezslot_7 = googletag.defineSlot('/1254144/o7planning_org-medrectangle-1',[970,250],'div-gpt-ad-o7planning_org-medrectangle-1-0').addService(googletag.pubads()).setTargeting('iid19','1846309').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1117').setTargeting('sap','1117').setTargeting('a','|2|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','30').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','4').setTargeting('al','1004').setTargeting('compid','0').setTargeting('tap','o7planning_org-medrectangle-1-1846309').setTargeting('bv','2').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','1500').setTargeting('br2','750').setTargeting('ezoic','1').setTargeting('deal1',[21,22,23,24,25,26]);ezslot_7.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','37a5d7').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[7]="7";}else{window.ezHideLocations=[];window.ezHideLocations.push('div-gpt-ad-o7planning_org-large-leaderboard-1-0');ezslot_1 = googletag.defineSlot('/1254144/o7planning_org-box-1',[336,280],'div-gpt-ad-o7planning_org-box-1-0').addService(googletag.pubads()).setTargeting('iid19','1872144').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1138').setTargeting('sap','1138').setTargeting('a','|1|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','30').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','1').setTargeting('al','1000').setTargeting('compid','0').setTargeting('tap','o7planning_org-box-1-1872144').setTargeting('bv','12').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','60').setTargeting('br2','30').setTargeting('ezoic','1').setTargeting('stl','24').setTargeting('deal1',[17,19,20,21,22,23,24,25,26]);ezslot_1.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','1a0dab').set('adsense_text_color','545454').set('adsense_url_color','006621');ezrpos[1]="1";window.ezHideLocations.push('div-gpt-ad-o7planning_org-large-leaderboard-2-0');window.ezHideLocations.push('div-gpt-ad-o7planning_org-medrectangle-3-0');window.ezHideLocations.push('div-gpt-ad-o7planning_org-large-billboard-2-0');window.ezHideLocations.push('div-gpt-ad-o7planning_org-box-4-0');ezslot_6 = googletag.defineSlot('/1254144/o7planning_org-box-2',[728,90],'div-gpt-ad-o7planning_org-box-2-0').addService(googletag.pubads()).setTargeting('iid19','1896877').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1118').setTargeting('sap','1118').setTargeting('a','|2|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','120').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','7').setTargeting('al','1001').setTargeting('compid','0').setTargeting('tap','o7planning_org-box-2-1896877').setTargeting('bv','11').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','200').setTargeting('br2','100').setTargeting('ezoic','1').setTargeting('stl','25').setTargeting('deal1',[20,21,22,23,24,25,26]);ezslot_6.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','37a5d7').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[6]="6";ezslot_7 = googletag.defineSlot('/1254144/o7planning_org-medrectangle-1',[970,250],'div-gpt-ad-o7planning_org-medrectangle-1-0').addService(googletag.pubads()).setTargeting('iid19','1846309').setTargeting('t','134').setTargeting('d','22529').setTargeting('t1','134').setTargeting('pvc','1').setTargeting('ap','1117').setTargeting('sap','1117').setTargeting('a','|2|').setTargeting('as','revenue').setTargeting('plat','1').setTargeting('bra','mod6').setTargeting('ic','1').setTargeting('at','mbf').setTargeting('adr','399').setTargeting('reft','tf').setTargeting('refs','30').setTargeting('ga','2497208').setTargeting('gala','2709606').setTargeting('rid','99998').setTargeting('pt','4').setTargeting('al','1004').setTargeting('compid','0').setTargeting('tap','o7planning_org-medrectangle-1-1846309').setTargeting('bv','2').setTargeting('acptad','1').setCollapseEmptyDiv(false).setTargeting('br1','1500').setTargeting('br2','750').setTargeting('ezoic','1').setTargeting('deal1',[21,22,23,24,25,26]);ezslot_7.set('adsense_background_color','FFFFFF').set('adsense_border_color','FFFFFF').set('adsense_link_color','37a5d7').set('adsense_text_color','000000').set('adsense_url_color','F0F0F0');ezrpos[7]="7";}googletag.pubads().addEventListener('slotRenderEnded', function(event) { __ez.queue.addFunc("ezbanger", "ezbanger", event, false, ['banger.js'], true, true, false, true); });googletag.pubads().addEventListener('impressionViewable', function(event) { __ez.queue.addFunc("ezvb", "ezvb", event, false, ['banger.js'], true, true, false, true); });googletag.pubads().addEventListener('slotVisibilityChanged', function(event) { __ez.queue.addFunc("ezvbc", "ezvbc", event, false, ['banger.js'], true, true, false, true); });googletag.enableServices();});if(typeof window.isEZABL == 'undefined' || window.isEZABL != true) {ezslots.push("ezslot_0");ezslots.push("ezslot_1");ezslots.push("ezslot_2");ezslots.push("ezslot_3");ezslots.push("ezslot_4");ezslots.push("ezslot_5");ezslots.push("ezslot_6");ezslots.push("ezslot_7");}else{ezslots.push("ezslot_1");ezslots.push("ezslot_6");ezslots.push("ezslot_7");}</script>
<script>(function(){function a(g,h,i){var j=new Date;j.setTime(j.getTime()+1e3*(60*(60*(24*i))));var k="expires="+j.toUTCString(),l=g+"="+h+";"+k+";path=/;";"undefined"!=typeof ezdomain&&(l+="domain="+ezdomain),document.cookie=l}var b=window.addEventListener?"addEventListener":"attachEvent",c=window[b],f="attachEvent"==b?"onmessage":"message";c(f,function(g){"undefined"!=typeof g.data.ezstatus&&(__ez.bit.AddAndFire(_ezaq.page_view_id,[new __ezDotData("dg",g.data.ezstatus)]),a("ezdg",g.data.ezstatus,730))})})();</script>
<script type="text/javascript" data-cfasync="false">var _ezaq = {"ad_cache_level":2,"ad_location_ids":"35,0,36,21,34,3,1,4,80,82,83","adx_ad_count":8,"bidder_version":3,"city":"Ho Chi Minh City","country":"VN","days_since_last_visit":1,"display_ad_count":8,"domain_id":22529,"ds_adsize_opt_id":-1,"engaged_time_visit":0,"ezcache_level":0,"forensiq_score":-1,"form_factor_id":1,"framework_id":1,"has_bad_words":0,"iab_category":"","is_from_recommended_pages":false,"is_return_visitor":true,"last_page_load":"1521446558500","last_pageview_id":"1abdb4a3-b2d5-406f-7b35-c6e091641e15","lt_cache_level":0,"max_ads":10,"metro_code":0,"page_ad_positions":"1102,1105,1108,1112,1116,1117,1118,1122,1136,1137,1138","page_view_count":1,"page_view_id":"c2c55ac5-9de2-4deb-4eba-c14bb5d32968","pv_event_count":0,"response_time_orig":1394,"serverid":"13.229.110.148:9492","sub_page_ad_positions":"1102,1105,1108,1112,1116,1117,1118,1122,1136,1137,1138","t_epoch":1521604750,"template_id":134,"time_on_site_visit":3,"url":"https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau","user_id":1764433955,"weather_precipitation":0,"weather_summary":"","weather_temperature":0,"word_count":8437};var _ezim_d = {"o7planning_org-box-1":{"adx_ad_count":8,"full_id":"o7planning_org-box-1/2018-03-20/1872144","height":"280","position_id":1138,"sub_position_id":1138,"width":"336"},"o7planning_org-box-2":{"adx_ad_count":8,"full_id":"o7planning_org-box-2/2018-03-20/1896877","height":"90","position_id":1118,"sub_position_id":1118,"width":"728"},"o7planning_org-box-4":{"adx_ad_count":8,"full_id":"o7planning_org-box-4/2018-03-20/1842876","height":"250","position_id":1105,"sub_position_id":1105,"width":"300"},"o7planning_org-large-billboard-2":{"adx_ad_count":8,"full_id":"o7planning_org-large-billboard-2/2018-03-20/1904397","height":"280","position_id":1116,"sub_position_id":1116,"width":"336"},"o7planning_org-large-leaderboard-1":{"adx_ad_count":8,"full_id":"o7planning_org-large-leaderboard-1/2018-03-20/1844700","height":"280","position_id":1108,"sub_position_id":1108,"width":"336"},"o7planning_org-large-leaderboard-2":{"adx_ad_count":8,"full_id":"o7planning_org-large-leaderboard-2/2018-03-20/1891499","height":"280","position_id":1112,"sub_position_id":1112,"width":"336"},"o7planning_org-link-h-large-1":{"adx_ad_count":8,"full_id":"o7planning_org-link-h-large-1/2018-03-20/1835396","height":"15","position_id":1137,"sub_position_id":1137,"width":"728"},"o7planning_org-link-h-large-2":{"adx_ad_count":8,"full_id":"o7planning_org-link-h-large-2/2018-03-20/1835246","height":"15","position_id":1136,"sub_position_id":1136,"width":"728"},"o7planning_org-link-v-med-1":{"adx_ad_count":8,"full_id":"o7planning_org-link-v-med-1/2018-03-20/1887381","height":"90","position_id":1122,"sub_position_id":1122,"width":"160"},"o7planning_org-medrectangle-1":{"adx_ad_count":8,"full_id":"o7planning_org-medrectangle-1/2018-03-20/1846309","height":"250","position_id":1117,"sub_position_id":1117,"width":"970"},"o7planning_org-medrectangle-3":{"adx_ad_count":8,"full_id":"o7planning_org-medrectangle-3/2018-03-20/1882031","height":"250","position_id":1102,"sub_position_id":1102,"width":"300"}};var _ezat = {"domain_id":22529,"form_factor_id":1,"framework_id":1,"pageview_date":"2018-03-20","pageview_id":"c2c55ac5-9de2-4deb-4eba-c14bb5d32968","template_id":134,"url":"https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau","visit_uuid":"cf3794b3-db13-47ab-5bc0-10eb60013a52"};</script><script data-pagespeed-no-defer="" data-cfasync="false" type="text/javascript">__ez.queue.addFile('rochester.js', '/detroitchicago/rochester.js?cb=173-0&v=8', false, [], true, false, true, true);</script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/rochester.js.download" async=""></script><script data-pagespeed-no-defer="" data-cfasync="false" type="text/javascript">__ez.queue.addFile('banger.js', '/porpoiseant/banger.js?cb=173-0&bv=2&v=28&PageSpeed=off', true, [], true, false, false, true);</script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/banger.js.download" async=""></script><script data-pagespeed-no-defer="" data-cfasync="false">
function create_ezolpl() {
    var d = new Date();
    d.setTime(d.getTime() + (365*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = "ezux_lpl_22529=" + new Date().getTime() + "|c2c55ac5-9de2-4deb-4eba-c14bb5d32968; " + expires;
}
function attach_ezolpl() {
    if(window.attachEvent) {
        window.attachEvent('onload', create_ezolpl);
    } else {
        if(window.onload) {
            var curronload = window.onload;
            var newonload = function(evt) {
                curronload(evt);
                create_ezolpl();
            };
            window.onload = newonload;
        } else {
            window.onload = create_ezolpl;
        }
    }
}
attach_ezolpl();
</script>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=4">
<title>
         Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu
      </title>
<meta name="Keywords" content="Hibernate">
<meta name="Description" content="Hibernate 4 cho người mới bắt đầu, Hướng dẫn học Java Hibernate">
<meta property="og:site_name" content="o7planning.org">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="849">
<meta property="og:image:height" content="540">
<meta property="og:image" content="/templates/o7planning/resources/icons/triceratops.png">
<link rel="image_src" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/triceratops.png">
<link rel="shortcut icon" href="https://o7planning.org/templates/o7planning/resources/images/favi.png" type="image/png">

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/sharethis.js.download"></script>
<script>
         var CHECK_LOGINED_URL = "//o7planning.org/ajax/vi/check-logined-third-user";
         var LOGIN_URL = "/vi/login";
      </script>

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/global.css">

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/owl.carousel.css">

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/owl.theme.css">

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/syntaxhighlighter.css">

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/syntaxhighlighter-extends.css">

<link rel="stylesheet" type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/cssmenu-styles.css">

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/jquery-1.11.2.js.download"></script><link rel="preload" href="https://adservice.google.com.vn/adsid/integrator.js?domain=o7planning.org" as="script"><script type="text/javascript" src="https://adservice.google.com.vn/adsid/integrator.js?domain=o7planning.org"></script><link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=o7planning.org" as="script"><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=o7planning.org"></script><script src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_188.js" async=""></script>

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/owl.carousel.min.js.download"></script>

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/syntaxhighlighter.js.download"></script>

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/global.js.download"></script>

<script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/cssmenu-script.js.download"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script language="javascript" type="text/javascript">
         function resizeIframe(obj) { obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px'; }
      </script>
<script type="text/javascript">
         (function(){
             var s1=document.createElement('script'),s0=document.getElementsByTagName('script')[0];
             s1.async=true;
             s1.src='//tr.topdevvn.com/js/follow.js';
             s1.charset='UTF-8';
             s1.setAttribute('crossorigin','*');
             s0.parentNode.insertBefore(s1,s0);
         })();
      </script>
<style>.ezoic-ad.large-leaderboard-1 { display:block !important;float:none;margin-bottom:20px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:280px;min-width:336px;text-align:center !important; }
.ezoic-ad.box-1 { display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px; }
.ezoic-ad.large-leaderboard-2 { display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px; }
.ezoic-ad.medrectangle-3 { display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:270px;min-width:300px; }
.ezoic-ad.large-billboard-2 { display:block !important;float:none !important;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px;text-align:center !important; }
.ezoic-ad.box-4 { display:inline-block;float:none !important;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:270px;min-width:300px; }
.ezoic-ad.box-2 { display:block !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:110px;min-width:728px;text-align:center !important; }
.ezoic-ad.medrectangle-1 { display:block !important;float:none;margin-bottom:20px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:250px;min-width:970px;text-align:left !important; }
.ezoic-ad.link-h-large-1 { display:block !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:728px;text-align:center !important; }
.ezoic-ad.link-v-med-1 { display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:160px; }
.ezoic-ad.link-h-large-2 { display:block !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:728px;text-align:center !important; }
.ezoic-ad{display:inline-block;}
.adtester-container-123{display:none}
.adtester-container-111{display:none}
.adtester-container-126{display:none}
.adtester-container-125{display:none}
.ezoic-floating-bottom { display: none!important; }</style><link rel="canonical" href="https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau">
<script data-cfasync="false" type="text/javascript">window.google_analytics_uacct = "UA-78247107-43";</script>
<script data-cfasync="false" type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['e._setAccount', 'UA-78247107-43']);
_gaq.push(['f._setAccount', 'UA-38339005-1']);
_gaq.push(['e._setDomainName', 'o7planning.org']);
_gaq.push(['f._setDomainName', 'o7planning.org']);
_gaq.push(['e._setCustomVar',1,'template','pub_site',3]);
_gaq.push(['e._setCustomVar',2,'t','134',3]);
_gaq.push(['e._setCustomVar',3,'rid','0',2]);
_gaq.push(['e._setCustomVar',4,'bra','mod6',3]);
_gaq.push(['e._setAllowAnchor',true]);
_gaq.push(['e._setSiteSpeedSampleRate', 10]);
_gaq.push(['f._setCustomVar',1,'template','pub_site',3]);
_gaq.push(['f._setCustomVar',2,'domain','o7planning.org',3]);
_gaq.push(['f._setSiteSpeedSampleRate', 20]);
_gaq.push(['e._trackPageview']);
_gaq.push(['f._trackPageview']);

_gaq.push(['_setAccount', 'UA-50431663-1']);
_gaq.push(['_setDomainName', 'o7planning.org']);
_gaq.push(['_trackPageview']);


(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<script type="text/javascript">var ezouid = "1764433955";</script><!--<base href="https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau">--><base href="."><script type="text/javascript">
var ezoTemplate = 'pub_site';
if(typeof ezouid == 'undefined')
{
    var ezouid = 'none';
}
var ezoFormfactor = '1';
var ezo_elements_to_check = Array();
</script>

<script type="text/javascript">
var soc_app_id = '0';
var did = 22529;
var ezdomain = 'o7planning.org';
var ezoicSearchable = 1;
</script>


<script data-pagespeed-no-defer="" data-cfasync="false" type="text/javascript" style="display:none">
__ez.queue.addFile('__ezf_ezosuigeneris', '//g.ezoic.net/ezosuigeneris.js', true, [], true, false, false, false);
var __ez_ezosuigenerisEvt = function() { __ez.bit.AddAndFire(_ezaq['page_view_id'], [(new __ezDotData('universal_user_id', ezosuigeneris))]); };
__ez.queue.addFunc('__ez_ezosuigenerisEvt', '__ez_ezosuigenerisEvt', null, false, ['__ezf_ezosuigeneris'], false, false, false, false);</script><script src="https://g.ezoic.net/ezosuigeneris.js" async=""></script><script data-pagespeed-no-defer="" data-cfasync="false" type="text/javascript" style="display:none">__ez.queue.addFile('__ezf_ezosuigenerisc', '//g.ezoic.net/ezosuigenerisc.js?nogen=1', true, [], true, false, false, false);</script><script src="https://g.ezoic.net/ezosuigenerisc.js?nogen=1" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-17/html/container.html"><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/jsapi" type="text/javascript"></script><link type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/default+vi.css" rel="stylesheet"><link type="text/css" href="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/default.css" rel="stylesheet"><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/default+vi.I.js.download"></script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/edmonton.webp" async=""></script><script src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/jellyfish.webp" async=""></script><style type="text/css">#st-1 {
  font-family: "Helvetica Neue", Verdana, Helvetica, Arial, sans-serif;;
  direction: ltr;
  display: block;
  opacity: 1;
  text-align: right;
  z-index: 94034;
}
#st-1.st-animated {
  -moz-transition: o 0.2s ease-in, p 0.2s ease-in, a 0.2s ease-in, c 0.2s ease-in, i 0.2s ease-in, t 0.2s ease-in, y 0.2s ease-in; -ms-transition: o 0.2s ease-in, p 0.2s ease-in, a 0.2s ease-in, c 0.2s ease-in, i 0.2s ease-in, t 0.2s ease-in, y 0.2s ease-in; -o-transition: o 0.2s ease-in, p 0.2s ease-in, a 0.2s ease-in, c 0.2s ease-in, i 0.2s ease-in, t 0.2s ease-in, y 0.2s ease-in; -webkit-transition: o 0.2s ease-in, p 0.2s ease-in, a 0.2s ease-in, c 0.2s ease-in, i 0.2s ease-in, t 0.2s ease-in, y 0.2s ease-in; transition: o 0.2s ease-in, p 0.2s ease-in, a 0.2s ease-in, c 0.2s ease-in, i 0.2s ease-in, t 0.2s ease-in, y 0.2s ease-in;
}
#st-1.st-hidden {
  opacity: 0;
}
#st-1 .st-btn {
  -moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  -moz-transition: opacity 0.2s ease-in, top 0.2s ease-in; -ms-transition: opacity 0.2s ease-in, top 0.2s ease-in; -o-transition: opacity 0.2s ease-in, top 0.2s ease-in; -webkit-transition: opacity 0.2s ease-in, top 0.2s ease-in; transition: opacity 0.2s ease-in, top 0.2s ease-in;
  -moz-border-radius: 1px;
-webkit-border-radius: 1px;
border-radius: 1px;
  cursor: pointer;
  display: inline-block;
  font-size: 12px;
  height: 32px;
  line-height: 32px;
  margin-right: 8px;
  padding: 0 10px;
  position: relative;
  text-align: center;
  top: 0;
  vertical-align: top;
  white-space: nowrap;
}
#st-1 .st-btn:last-child {
  margin-right: 0;
}
#st-1 .st-btn > svg {
  height: 16px;
  width: 16px;
  position: relative;
  top: 8px;
  vertical-align: top;
}
#st-1 .st-btn > img {
  height: 16px;
  width: 16px;
  position: relative;
  top: 8px;
  vertical-align: top;
}
#st-1 .st-btn > span {
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  color: #fff;
  display: inline-block;
  font-weight: 500;
  letter-spacing: 0.5px;
  min-width: 60px;
  opacity: 1;
  padding: 0 6px;
  position: relative;
  vertical-align: top;
}
#st-1.st-has-labels .st-btn {
  min-width: 120px;
}
#st-1.st-has-labels .st-btn.st-remove-label {
  min-width: 50px;
}
#st-1.st-has-labels .st-btn.st-remove-label > span {
  display: none;
}
#st-1.st-has-labels .st-btn.st-hide-label > span {
  display: none;
}
#st-1 .st-total {
  color: #555;
  display: inline-block;
  font-weight: 500;
  line-height: 12px;
  margin-right: 0;
  max-width: 80px;
  padding: 4px 8px;
  text-align: center;
}
#st-1 .st-total.st-hidden {
  display: none;
}
#st-1 .st-total > span {
  font-size: 16px;
  line-height: 17px;
  display: block;
  padding: 0;
}
#st-1 .st-total > span.st-shares {
  font-size: 9px;
  line-height: 9px;
}
#st-1.st-justified {
  display: flex;
  text-align: center;
}
#st-1.st-justified .st-btn {
  -moz-flex: 1;
-ms-flex: 1;
-webkit-flex: 1;
flex: 1;
}#st-1 .st-btn:hover {
  opacity: .8;
  top: -4px;
}#st-1 .st-btn[data-network='facebook'] {
  background-color: #3B5998;
}
#st-1 .st-btn[data-network='twitter'] {
  background-color: #55acee;
}
#st-1 .st-btn[data-network='pinterest'] {
  background-color: #CB2027;
}
#st-1 .st-btn[data-network='sms'] {
  background-color: #ffbd00;
}
#st-1 .st-btn[data-network='linkedin'] {
  background-color: #0077b5;
}
#st-1 .st-btn[data-network='reddit'] {
  background-color: #ff4500;
}
#st-1 .st-btn[data-network='googleplus'] {
  background-color: #dc4e41;
}
#st-1 .st-btn[data-network='odnoklassniki'] {
  background-color: #d7772d;
}
#st-1 .st-btn[data-network='vk'] {
  background-color: #4c6c91;
}
#st-1 .st-btn[data-network='tumblr'] {
  background-color: #32506d;
}
#st-1 .st-btn[data-network='blogger'] {
  background-color: #ff8000;
}
#st-1 .st-btn[data-network='wechat'] {
  background-color: #4EC034;
}
#st-1 .st-btn[data-network='email'] {
  background-color: #7d7d7d;
}</style><style type="text/css">#st-4 {
  font-family: "Helvetica Neue", Verdana, Helvetica, Arial, sans-serif;;
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  backface-visibility: hidden;
  display: block;
  position: fixed;
  opacity: 1;
  text-align: left;
  top: 85px;
  z-index: 94034;
}
#st-4.st-left {
  left: 0px;
}
#st-4.st-hidden.st-left {
  left: -48px;
}
#st-4.st-hidden {
  width: 96px;
}
#st-4 > div {
  clear: left;
  float: left;
}
#st-4 .st-btn {
  -moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  cursor: pointer;
  display: inline-block;
  font-size: NaNpx;
  height: 48px;
  line-height: 24px;
  margin-bottom: 0;
  opacity: 1;
  overflow: hidden;
  padding: 12px;
  position: relative;
  text-align: left;
  top: 0;
  vertical-align: top;
  white-space: nowrap;
  width: 48px;
}
#st-4 .st-btn.st-first {
  border-top-right-radius: 1px;
}
#st-4 .st-btn.st-last {
  border-bottom-right-radius: 1px;
}
#st-4 .st-btn > svg {
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  height: 24px;
  margin-left: 0;
  vertical-align: top;
  width: 24px;
}
#st-4 .st-btn > img {
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  height: 24px;
  margin-left: 0;
  vertical-align: top;
  width: 24px;
}
#st-4 .st-btn > span {
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  color: #fff;
  display: inline-block;
  font-weight: 500;
  left: -35px;
  letter-spacing: 0.5px;
  opacity: 0;
  padding: 0 6px;
  position: relative;
  vertical-align: top;
  filter: alpha(opacity=0);
}
#st-4 .st-btn.st-hide-label > span {
  display: none !important;
}
#st-4 .st-total {
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  background: #fff;
  color: #555;
  display: inline-block;
  font-weight: 500;
  line-height: 18px;
  margin-right: 0;
  min-height: 34px;
  max-width: 80px;
  opacity: 1;
  padding: 4px 0;
  text-align: center;
  width: 48px;
}
#st-4 .st-total.st-hidden {
  display: none;
}
#st-4 .st-total > span {
  display: block;
  font-size: 18px;
  line-height: 21px;
  padding: 0;
}
#st-4 .st-total > span.st-shares {
  font-size: 11px;
  line-height: 11px;
}
#st-4 .st-toggle {
  left: -48px;
  -moz-transition: all 0.2s ease-in; -ms-transition: all 0.2s ease-in; -o-transition: all 0.2s ease-in; -webkit-transition: all 0.2s ease-in; transition: all 0.2s ease-in;
  background: #ccc;
  border-bottom-right-radius: 1px;
  color: white;
  cursor: pointer;
  font-size: 24px;
  line-height: 24px;
  position: relative;
  text-align: center;
  width: 48px;
}
#st-4.st-hidden .st-toggle {
  border-top-right-radius: 1px;
}
#st-4.st-left .st-toggle .st-left {
  display: inline-block;
}
#st-4.st-left.st-hidden .st-toggle .st-left {
  display: none;
}
#st-4.st-left .st-toggle .st-right {
  display: none;
}
#st-4.st-left.st-hidden .st-toggle .st-right {
  display: inline-block;
}#st-4:hover .st-toggle {
  left: 0;
}
#st-4.st-hidden:hover .st-toggle {
  left: 48px;
}
#st-4.st-toggleable:hover .st-btn.st-last {
  border-bottom-right-radius: 0;
}
#st-4.st-toggleable:hover .st-btn.st-last:hover {
  border-bottom-right-radius: 1px;
}
#st-4 .st-btn:hover {
  border-bottom-right-radius: 1px;
  border-top-right-radius: 1px;
}
#st-4.st-has-labels .st-btn:hover {
  width: 120px;
}
#st-4:not(.st-has-labels) .st-btn:hover {
  width: 62px;
}
#st-4 .st-btn.st-hide-label:hover {
  width: 62px;
}
#st-4 .st-btn:hover > svg {
  margin-left: 5px;
}
#st-4 .st-btn:hover > img {
  margin-left: 5px;
}
#st-4 .st-btn:hover > span {
  opacity: 1;
  display: inline-block;
  left: 0;
  filter: alpha(opacity=100);
}
@media (max-width: 1335px) {
  #st-4 .st-btn:hover > svg {
    margin-left: 0;
  }
  #st-4 .st-btn:hover > span {
    display: none;
  }
}@media (max-width: 1335px) {
  #st-4 {
  bottom: 0;
  display: none;
  left: 0;
  right: 0;
  top: auto;
  width: 100%;
}
#st-4.st-hidden {
  bottom: -48px;
  width: 100%;
}
#st-4.st-hidden.st-left {
  left: 0;
}
#st-4.st-hidden.st-right {
  right: 0;
}
#st-4 > div {
  -moz-flex: 1;
  -ms-flex: 1;
  -webkit-flex: 1;
  clear: none;
  flex: 1;
  float: none;
}
#st-4 .st-total {
  background: #fff;
  padding: 6px 8px;
}
#st-4 .st-btn {
  -moz-border-radius: 0 !important;
-webkit-border-radius: 0 !important;
border-radius: 0 !important;
  text-align: center;
  width: auto;
}
#st-4 .st-btn > span {
  display: none;
}
#st-4 .st-toggle {
  display: none;
}
}#st-4 .st-btn[data-network='facebook'] {
  background-color: #3B5998;
}
#st-4 .st-btn[data-network='twitter'] {
  background-color: #55acee;
}
#st-4 .st-btn[data-network='pinterest'] {
  background-color: #CB2027;
}
#st-4 .st-btn[data-network='linkedin'] {
  background-color: #0077b5;
}
#st-4 .st-btn[data-network='googleplus'] {
  background-color: #dc4e41;
}
#st-4 .st-btn[data-network='vk'] {
  background-color: #4c6c91;
}
#st-4 .st-btn[data-network='odnoklassniki'] {
  background-color: #d7772d;
}
#st-4 .st-btn[data-network='tumblr'] {
  background-color: #32506d;
}
#st-4 .st-btn[data-network='reddit'] {
  background-color: #ff4500;
}
#st-4 .st-btn[data-network='blogger'] {
  background-color: #ff8000;
}
#st-4 .st-btn[data-network='email'] {
  background-color: #7d7d7d;
}</style><style type="text/css">.gsc-control-cse{font-family:Arial, sans-serif;border-color:#FFFFFF;background-color:#FFFFFF}.gsc-control-cse .gsc-table-result{font-family:Arial, sans-serif}input.gsc-input,.gsc-input-box,.gsc-input-box-hover,.gsc-input-box-focus{border-color:#D9D9D9}.gsc-search-button-v2,.gsc-search-button-v2:hover,.gsc-search-button-v2:focus{border-color:#666666;background-color:#CECECE;background-image:none;filter:none}.gsc-search-button-v2 svg{fill:#FFFFFF}.gsc-tabHeader.gsc-tabhInactive{border-color:#E9E9E9;background-color:#E9E9E9}.gsc-tabHeader.gsc-tabhActive{border-color:#FF9900;border-bottom-color:#FFFFFF;background-color:#FFFFFF}.gsc-tabsArea{border-color:#FF9900}.gsc-webResult.gsc-result,.gsc-results .gsc-imageResult{border-color:#FFFFFF;background-color:#FFFFFF}.gsc-webResult.gsc-result:hover,.gsc-imageResult:hover{border-color:#FFFFFF;background-color:#FFFFFF}.gs-webResult.gs-result a.gs-title:link,.gs-webResult.gs-result a.gs-title:link b,.gs-imageResult a.gs-title:link,.gs-imageResult a.gs-title:link b{color:#0000CC}.gs-webResult.gs-result a.gs-title:visited,.gs-webResult.gs-result a.gs-title:visited b,.gs-imageResult a.gs-title:visited,.gs-imageResult a.gs-title:visited b{color:#0000CC}.gs-webResult.gs-result a.gs-title:hover,.gs-webResult.gs-result a.gs-title:hover b,.gs-imageResult a.gs-title:hover,.gs-imageResult a.gs-title:hover b{color:#0000CC}.gs-webResult.gs-result a.gs-title:active,.gs-webResult.gs-result a.gs-title:active b,.gs-imageResult a.gs-title:active,.gs-imageResult a.gs-title:active b{color:#0000CC}.gsc-cursor-page{color:#0000CC}a.gsc-trailing-more-results:link{color:#0000CC}.gs-webResult .gs-snippet,.gs-imageResult .gs-snippet,.gs-fileFormatType{color:#000000}.gs-webResult div.gs-visibleUrl,.gs-imageResult div.gs-visibleUrl{color:#008000}.gs-webResult div.gs-visibleUrl-short{color:#008000}.gs-webResult div.gs-visibleUrl-short{display:none}.gs-webResult div.gs-visibleUrl-long{display:block}.gs-promotion div.gs-visibleUrl-short{display:none}.gs-promotion div.gs-visibleUrl-long{display:block}.gsc-cursor-box{border-color:#FFFFFF}.gsc-results .gsc-cursor-box .gsc-cursor-page{border-color:#E9E9E9;background-color:#FFFFFF;color:#0000CC}.gsc-results .gsc-cursor-box .gsc-cursor-current-page{border-color:#FF9900;background-color:#FFFFFF;color:#0000CC}.gsc-webResult.gsc-result.gsc-promotion{border-color:#336699;background-color:#FFFFFF}.gsc-completion-title{color:#0000CC}.gsc-completion-snippet{color:#000000}.gs-promotion a.gs-title:link,.gs-promotion a.gs-title:link *,.gs-promotion .gs-snippet a:link{color:#0000CC}.gs-promotion a.gs-title:visited,.gs-promotion a.gs-title:visited *,.gs-promotion .gs-snippet a:visited{color:#0000CC}.gs-promotion a.gs-title:hover,.gs-promotion a.gs-title:hover *,.gs-promotion .gs-snippet a:hover{color:#0000CC}.gs-promotion a.gs-title:active,.gs-promotion a.gs-title:active *,.gs-promotion .gs-snippet a:active{color:#0000CC}.gs-promotion .gs-snippet,.gs-promotion .gs-title .gs-promotion-title-right,.gs-promotion .gs-title .gs-promotion-title-right *{color:#000000}.gs-promotion .gs-visibleUrl,.gs-promotion .gs-visibleUrl-short{color:#008000}</style><style type="text/css">.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;position:relative;user-select:none;-webkit-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gsq_a{padding:0}.gsq_a{padding:0}.gscsep_a{display:none}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em;-webkit-appearance:button}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_a{padding:0 9px}.gsib_a{padding-right:8px;padding-left:8px}.gsst_a{padding-top:5.5px}.gssb_e{border:0}.gssb_l{margin:5px 0}input.gsc-input::-webkit-input-placeholder{font-size:14px}input.gsc-input:-moz-placeholder{font-size:14px}input.gsc-input::-moz-placeholder{font-size:14px}input.gsc-input:-ms-input-placeholder{font-size:14px}input.gsc-input:focus::-webkit-input-placeholder{color:transparent}input.gsc-input:focus:-moz-placeholder{color:transparent}input.gsc-input:focus::-moz-placeholder{color:transparent}input.gsc-input:focus:-ms-input-placeholder{color:transparent}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style></head>
<body data-gr-c-s-loaded="true"><iframe marginwidth="0" marginheight="0" scrolling="no" frameborder="0" height="0" width="0" id="_mN_cksync_0" style="display: none !important;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource.html"></iframe>
<div id="header-container">

<div class="inner-wrapper">
<div id="o7planning">
<span>
<a href="https://o7planning.org/">
<img height="55" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/triceratops.png">
</a>
</span>
<span id="site-name">o7planning</span>
</div>
<div id="header-right-bar">
<div class="search">
<script>
       (function() {
       var cx = '015481497656125004927:vaeti40tld8';
       var gcse = document.createElement('script');
       gcse.type = 'text/javascript';
       gcse.async = true;
       gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
       var s = document.getElementsByTagName('script')[0];
       s.parentNode.insertBefore(gcse, s);
       })();
    </script>
<div id="___gcse_0"><div class="gsc-control-cse gsc-control-cse-vi"><div class="gsc-control-wrapper-cse" dir="ltr"><form class="gsc-search-box gsc-search-box-tools" accept-charset="utf-8"><table cellspacing="0" cellpadding="0" class="gsc-search-box"><tbody><tr><td class="gsc-input"><div class="gsc-input-box" id="gsc-iw-id1"><table cellspacing="0" cellpadding="0" id="gs_id50" class="gstl_50 " style="width: 100%; padding: 0px;"><tbody><tr><td id="gs_tti50" class="gsib_a"><input autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="tìm kiếm" id="gsc-i-id1" style="width: 100%; padding: 0px; border: none; margin: 0px; height: auto; outline: none; background: url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) left center no-repeat rgb(255, 255, 255); text-indent: 48px;" x-webkit-speech="" x-webkit-grammar="builtin:search" lang="vi" dir="ltr" spellcheck="false" placeholder="Tìm kiếm tùy chỉnh"></td><td class="gsib_b"><div class="gsst_b" id="gs_st50" dir="ltr"><a class="gsst_a" href="javascript:void(0)" style="display: none;"><span class="gscb_a" id="gs_cb50">×</span></a></div></td></tr></tbody></table></div></td><td class="gsc-search-button"><button class="gsc-search-button gsc-search-button-v2" title="tìm kiếm"><svg width="13" height="13" viewBox="0 0 13 13"><path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z"></path></svg></button></td><td class="gsc-clear-button"><div class="gsc-clear-button" title="xoá các kết quả">&nbsp;</div></td></tr></tbody></table></form><div class="gsc-results-wrapper-overlay"><div class="gsc-results-close-btn" tabindex="0"></div><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">Tìm kiếm tùy chỉnh</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table cellspacing="0" cellpadding="0" class="gsc-above-wrapper-area-container"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td><td class="gsc-orderby-container"><div class="gsc-orderby-invisible"><div class="gsc-orderby-label gsc-inline-block">Sắp xếp theo:</div><div class="gsc-option-menu-container gsc-inline-block"><div class="gsc-selected-option-container gsc-inline-block"><div class="gsc-selected-option">Relevance</div><div class="gsc-option-selector"></div></div><div class="gsc-option-menu-invisible"><div class="gsc-option-menu-item gsc-option-menu-item-highlighted"><div class="gsc-option">Relevance</div></div><div class="gsc-option-menu-item"><div class="gsc-option">Date</div></div></div></div></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table cellspacing="0" cellpadding="0" class="gsc-resultsHeader"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">Web</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div class="gsc-result-selector gsc-one-result" title="hiển thị một kết quả">&nbsp;</div><div class="gsc-result-selector gsc-more-results" title="hiển thị thêm nhiều kết quả">&nbsp;</div><div class="gsc-result-selector gsc-all-results" title="hiển thị tất cả kết quả">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div><div class="gsc-modal-background-image" tabindex="0"></div></div></div></div>
</div>
<style>

.gsc-control-cse {
    background-color: inherit;
    font-family: inherit;
}

.cse .gsc-control-cse,
.gsc-control-cse {
    background-color: inherit;
    border: none;
}

.cse .gsc-control-cse,
.gsc-control-cse {
    margin-top: -5px;
    padding: 0px;
    width: 250px;
}

</style>
<div class="languages" style="margin-bottom:5px;">
<a href="https://o7planning.org/" lang="en" title="English">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/en.png" height="25" style="padding:0px 2px;border:1px solid black">
</a>
<a href="https://o7planning.org/vi" lang="vi" title="Vietnamese">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/vi.png" height="25" style="padding:0px 2px;border:1px solid white">
</a>
<a href="https://o7planning.org/de" lang="de" title="German">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/de.png" height="25" style="padding:0px 2px;border:1px solid black">
</a>
<a href="https://o7planning.org/fr" lang="fr" title="France">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/fr.png" height="25" style="padding:0px 2px;border:1px solid black">
</a>
<a href="https://o7planning.org/ru" lang="ru" title="Rusian">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/ru.png" height="25" style="padding:0px 2px;border:1px solid black">
</a>
</div>
<div class="logined-user">
</div>
<div style="clear:both;"></div>
<div id="contact-advertising" style="float:right; color:white;margin-top:10px;">
</div>
</div>
</div>

</div>
<div class="menu-container"><span id="ezoic-pub-ad-placeholder-126" class="ezoic-adpicker-ad"></span>



<div id="cssmenu" class="inner-wrapper"><div id="menu-button">Menu</div>
<ul>
<li>
<a href="https://o7planning.org/vi" style="">Tất cả tài liệu</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="javascript:void(0)" style="cursor:default;">Java</a>
<ul>
<li>
<a href="https://o7planning.org/vi/10973/java-co-ban" style="">Java cơ bản</a>
</li>
<li>
<a href="https://o7planning.org/vi/10985/java-nang-cao" style="">Java nâng cao</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="https://o7planning.org/vi/10981/cong-nghe-cua-eclipse" style="">Công nghệ của Eclipse</a>
<ul>
<li>
<a href="https://o7planning.org/vi/11119/java-swt" style="">SWT</a>
</li>
<li>
<a href="https://o7planning.org/vi/10953/eclipse-rcp" style="">Eclipse RCP</a>
</li>
<li>
<a href="https://o7planning.org/vi/10955/eclipse-rap" style="">Eclipse RAP</a>
</li>
<li>
<a href="https://o7planning.org/vi/10943/eclipse-plugin-tools" style="">Eclipse Plugin Tools</a>
</li>
 </ul>
</li>
<li>
<a href="https://o7planning.org/vi/10983/java-api-cho-html-xml" style="">Java API cho HTML &amp; XML</a>
</li>
<li>
<a href="https://o7planning.org/vi/11005/cac-thu-vien-ma-nguon-mo-java" style="">Các thư viện mã nguồn mở Java</a>
</li>
<li>
<a href="https://o7planning.org/vi/11587/java-application-servers" style="">Java Application Servers</a>
</li>
</ul>
</li>
<li>
<a href="https://o7planning.org/vi/10957/maven" style="">Maven</a>
</li>
<li>
<a href="https://o7planning.org/vi/11239/gradle" style="">Gradle</a>
</li>
<li>
<a href="https://o7planning.org/vi/10979/java-servlet-jsp" style="">Servlet/Jsp</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="javascript:void(0)" style="cursor:default;">Spring</a>
<ul>
<li>
<a href="https://o7planning.org/vi/11669/spring-boot" style="">Spring Boot</a>
</li>
<li>
<a href="https://o7planning.org/vi/11701/spring-cloud" style="">Spring Cloud</a>
</li>
<li>
<a href="https://o7planning.org/vi/10959/spring-mvc" style="">Spring MVC</a>
</li>
</ul>
</li>
<li>
<a href="https://o7planning.org/vi/10961/struts2-framework" style="">Struts2</a>
</li>
<li>
<a href="https://o7planning.org/vi/10969/java-hibernate" style="">Hibernate</a>
</li>
<li>
<a href="https://o7planning.org/vi/11201/java-web-service" style="">Java Web Service</a>
</li>
<li>
<a href="https://o7planning.org/vi/11009/javafx" style="">JavaFX</a>
</li>
<li>
<a href="https://o7planning.org/vi/11119/java-swt" style="">SWT</a>
</li>
<li>
<a href="https://o7planning.org/vi/11023/oracle-java-adf" style="">Oracle ADF</a>
</li>
<li>
<a href="https://o7planning.org/vi/11007/android" style="">Android</a>
</li>
<li>
<a href="https://o7planning.org/vi/11377/python" style="">Python</a>
</li>
<li>
<a href="https://o7planning.org/vi/11015/swift" style="">Swift</a>
</li>
<li>
<a href="https://o7planning.org/vi/10999/csharp" style="">C#</a>
</li>
<li>
<a href="https://o7planning.org/vi/10995/c-cpp" style="">C/C++</a>
</li>
<li>
<a href="https://o7planning.org/vi/11013/ruby" style="">Ruby</a>
</li>
<li>
<a href="https://o7planning.org/vi/11589/batch" style="">Batch</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="javascript:void(0)" style="cursor:default;">Database</a>
<ul>
<li>
<a href="https://o7planning.org/vi/10977/oracle" style="">Oracle</a>
</li>
<li>
<a href="https://o7planning.org/vi/11003/oracle-apex" style="">Oracle APEX</a>
</li>
<li>
<a href="https://o7planning.org/vi/10989/mysql" style="">MySQL</a>
</li>
<li>
<a href="https://o7planning.org/vi/10991/sql-server" style="">SQL Server</a>
</li>
<li>
<a href="https://o7planning.org/vi/11335/postgresql" style="">PostgreSQL</a>
</li>
<li>
<a href="https://o7planning.org/vi/10993/co-so-du-lieu-khac" style="">Cơ sở dữ liệu khác</a>
</li>
</ul>
</li>
<li>
<a href="https://o7planning.org/vi/10987/lap-trinh-bao-cao" style="">Report</a>
</li>
<li>
<a href="https://o7planning.org/vi/11001/lap-trinh-phia-client" style="">Client</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="javascript:void(0)" style="cursor:default;">OS</a>
<ul>
<li>
<a href="https://o7planning.org/vi/11349/ubuntu" style="">Ubuntu</a>
</li>
<li>
<a href="https://o7planning.org/vi/11347/solaris" style="">Solaris</a>
</li>
<li>
<a href="https://o7planning.org/vi/11429/mac-os" style="">Mac OS</a>
</li>
</ul>
</li>
<li>
<a href="https://o7planning.org/vi/11635/trinh-duyet" style="">Trình Duyệt</a>
</li>
<li>
<a href="https://o7planning.org/vi/11709/git" style="">Git</a>
</li>
<li>
<a href="https://o7planning.org/vi/11863/sap" style="">SAP</a>
</li>
<li class="has-sub"><span class="submenu-button"></span>
<a href="javascript:void(0)" style="cursor:default;">Khác</a>
<ul>
<li>
<a href="https://o7planning.org/vi/10975/chua-phan-loai" style="">Chưa phân loại</a>
</li>
<li>
<a href="https://o7planning.org/vi/11011/phan-mem-va-ung-dung-tien-ich" style="">Phần mềm và ứng dụng tiện ích</a>
</li>
</ul>
</li>
<li>
<a href="https://o7planning.org/vi/11047/tuyen-dung" style="">Tuyển dụng</a>
</li>
<li>
<a href="https://o7planning.org/vi/11579/fedu" style="color:#FF9248; font-weight:bold;">Khóa học</a>
</li>
</ul>
</div>

</div>
<div class="body-container">
<section id="section">
<div class="inner-wrapper">





<style>



</style>

<div style="clear:both;"></div>
<div class="top-of-body" style="text-align:center">

<div class="top-ad-container">
<div style="overflow:hidden;">
<span id="ezoic-pub-ad-placeholder-118"></span><span style="display:none !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:110px;min-width:728px;text-align:center !important;" class="ezoic-ad box-2 adtester-container adtester-container-118" data-ez-name="o7planning_org-box-2"><span id="div-gpt-ad-o7planning_org-box-2-0" ezaw="728" ezah="90" style="position:relative;z-index:0;display:none;" class="ezoic-ad"><div id="google_ads_iframe_/1254144/o7planning_org-box-2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-box-2_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-box-2_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(1).html"></iframe></div></span></span><script>var ezzns1 = {0.10:504693,0.45:504700,1.70:504713,2.00:504716,3.50:504724,4.00:504725,1.00:504706,0.15:504694,1.40:504710,1.50:504711,2.20:504718,0.70:504703,0.80:504704,1.80:504714,1.90:504715,2.80:504721,3.00:504722,0.20:504695,0.40:504699,5.00:504727,0.25:504696,0.35:504698,1.10:504707,0.50:504701,1.20:504708,2.60:504720,4.50:504726,0.05:504692,0.30:504697,0.60:504702,0.90:504705,1.30:504709,1.60:504712,2.40:504719,};</script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/publishertag.js.download"></script>
<div class="ezflad-47" style="display:inline-block" adunitname="o7planning_org-box-2" id="crt-1">
<script type="text/javascript">
var ezoflbf_2_1 = function() { __ez.queue.addFunc('ReloadFromP_1118', 'IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.ReloadFromP', 1118, false, ['banger.js'], false, false, false, true); };
var ezoflbf_1 = function() { eval(ez_write_tag([[728,90],'o7planning_org-box-2','ezslot_6']));
		};</script><script type="text/javascript">Criteo.DisplayAd({
    zoneid: 504712, containerid: 'crt-1', passbackcode: ezoflbf_1
});
</script></div>
<script type="text/javascript">
	var __ezfl_sss_1118 = function() {
		setTimeout(function(){
			var ezflaun = IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.GetNameFromPositionId(1118);
			if (typeof ezflaun != 'undefined' && ezflaun.length > 0) {
				if (typeof ez_ad_units != undefined) {
					for (i = 0; i < ez_ad_units.length; i++) {
						if (ezflaun.indexOf(ez_ad_units[i][1]) >= 0) {
							return false;
						}
					}
				}
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.StoreStatSource(ezflaun, 47, 1.60);
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.RemoveSlotById(ezflaun);
			}
		}, 8000);
	};
	__ez.queue.addFunc('__ezfl_sss_1118', '__ezfl_sss_1118', null, false, ['banger.js'], false, false, false, true);
</script>
<div style="clear:both;"></div>
<a href="http://giacat.vn/" target="_blank">
<img src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/click.jpg">
</a>
</div>
</div>

</div>
<div style="clear:both;"></div>
<div class="left" id="main" role="main">

<div id="style-switcher" style="right: -300px;" class="">
<div id="style-switcher-panel">
<h3>Mục lục</h3>
<div class="item-toc-data">
<div class="content-toc-container">

<dl>
<dt>
1- <a class="internal-page-anchor" data-href="#a77495">Giới thiệu</a>
</dt>
<dt>
2- <a class="internal-page-anchor" data-href="#a4447848">Chuẩn bị Database</a>
</dt>
<dt>
3- <a class="internal-page-anchor" data-href="#a4447615">Tạo Maven Project &amp; Khai báo thư viện</a>
</dt>
<dt>
4- <a class="internal-page-anchor" data-href="#a77362">Các Class Entity</a>
</dt>
<dt>
5- <a class="internal-page-anchor" data-href="#a77418">Cấu hình Hibernate</a>
</dt>
<dt>
6- <a class="internal-page-anchor" data-href="#a77482">SessionFactory</a>
</dt>
<dt>
7- <a class="internal-page-anchor" data-href="#a77457">Hibernate Query Language (HQL)</a>
</dt>
<dt>
8- <a class="internal-page-anchor" data-href="#a77396">Query dữ liệu với Hibernate</a>
</dt>
<dd>

<dl>
<dt>
8.1- <a class="internal-page-anchor" data-href="#a77422">Query Object sử dụng HQL</a>
</dt>
<dt>
8.2- <a class="internal-page-anchor" data-href="#a77472">Query lấy dữ liệu một vài cột sử dụng HQL</a>
</dt>
<dt>
8.3- <a class="internal-page-anchor" data-href="#a77394">Query lấy dữ liệu một vài cột sử dụng HQL &amp; JavaBean</a>
</dt>
<dt>
8.4- <a class="internal-page-anchor" data-href="#a77590">Query Lấy dữ liệu duy nhất</a>
</dt>
</dl>
</dd>
<dt>
9- <a class="internal-page-anchor" data-href="#a77440">Đối tượng Transient, Persistent và Detached là gì?</a>
</dt>
<dt>
10- <a class="internal-page-anchor" data-href="#a77390">Vòng đời của Hibernate (Hibernate Lifecycle)</a>
</dt>
<dt>
11- <a class="internal-page-anchor" data-href="#a77372">Thao tác Insert,Update, Delete với Hibernate</a>
</dt>
<dd>

<dl>
<dt>
11.1- <a class="internal-page-anchor" data-href="#a77452">Persistent</a>
</dt>
<dt>
11.2- <a class="internal-page-anchor" data-href="#a77638">Transient --&gt; Persistent : Tổng quan</a>
</dt>
<dt>
11.3- <a class="internal-page-anchor" data-href="#a77404">Transient --&gt; Persistent : Sử dụng persist(Object)</a>
</dt>
<dt>
11.4- <a class="internal-page-anchor" data-href="#a77386">Transient --&gt; Persistent : Sử dụng save(Object) *</a>
</dt>
<dt>
11.5- <a class="internal-page-anchor" data-href="#a77382">Transient --&gt; Persistent : Sử dụng saveOrUpdate(Object)</a>
</dt>
<dt>
11.6- <a class="internal-page-anchor" data-href="#a77370">Transient --&gt; Persistent : Sử dụng merge(Object)</a>
</dt>
<dt>
11.7- <a class="internal-page-anchor" data-href="#a77408">Persistent --&gt; Detached</a>
</dt>
<dt>
11.8- <a class="internal-page-anchor" data-href="#a77428">Detached --&gt; Persistent : Tổng quan</a>
</dt>
<dt>
11.9- <a class="internal-page-anchor" data-href="#a100369">Detached --&gt; Persistent : Sử dụng update(Object)</a>
</dt>
<dt>
11.10- <a class="internal-page-anchor" data-href="#a100393">Detached --&gt; Persistent : Sử dụng saveOrUpdate(Object)</a>
</dt>
<dt>
11.11- <a class="internal-page-anchor" data-href="#a101848">Detached --&gt; Persistent : Sử dụng merge(Object)</a>
</dt>
<dt>
11.12- <a class="internal-page-anchor" data-href="#a101946">Detached --&gt; Persistent : Sử dụng refresh(Object)</a>
</dt>
<dt>
11.13- <a class="internal-page-anchor" data-href="#a101899">Detached --&gt; Persistent : Sử dụng lock(Object)</a>
</dt>
</dl>
</dd>
<dt>
12- <a class="internal-page-anchor" data-href="#a102752">Tạo ra database từ các Entity</a>
</dt>
<dt>
13- <a class="internal-page-anchor" data-href="#a77508">Tra cứu Hibernate</a>
</dt>
</dl>
</div>
</div>
<div id="style-switcher-toggle" class="off"></div>
</div>
</div>
<h1 class="item-title">
Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu
</h1>
<div id="categories-suggest">
<div class="cat-entry">
<h4>Xem thêm các chuyên mục:</h4>
<ul>
<li><a target="_blank" href="https://o7planning.org/vi/10969/java-hibernate" class="target-blank-url">Các hướng dẫn Hibernate Framework</a></li>
</ul>
</div>
<span id="ezoic-pub-ad-placeholder-137" class="ezoic-adpicker-ad"></span><span style="display:block !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:728px;text-align:center !important;" class="ezoic-ad link-h-large-1 adtester-container adtester-container-137" data-ez-name="o7planning_org-link-h-large-1"><div id="o7planning_org-link-h-large-1" class="ezo_link_unit_m"><script type="text/javascript">window._mNHandle = window._mNHandle || {};window._mNHandle.queue = window._mNHandle.queue || [];medianet_versionId = "121199";(function() {var sct = document.createElement("script"), sctHl = document.getElementsByTagName("script")[0], isSSL = 'https:' == document.location.protocol;sct.type = "text/javascript";sct.src = (isSSL ? 'https:' : 'http:') + '//contextual.media.net/dmedianet.js?cid=8CUKY1173' + (isSSL ? '&https=1' : '')+'';sct.async = "async";sctHl.parentNode.insertBefore(sct, sctHl);})();</script><span id="527397821"><script type="text/javascript">try {window._mNHandle.queue.push(function () {window._mNDetails.loadTag("527397821", "728x15", "527397821");});}catch (error) {}</script><iframe marginwidth="0" marginheight="0" scrolling="no" frameborder="0" height="15" width="728" id="_mN_dy_527397821" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(2).html"></iframe></span></div></span></div>
<div style="clear: both;"></div>
<div class="item-toc-data">
<div class="content-toc-container">
<a name="top"> </a>
<dl>
<dt>
1- <a class="internal-page-anchor" data-href="#a77495">Giới thiệu</a>
</dt>
<dt>
2- <a class="internal-page-anchor" data-href="#a4447848">Chuẩn bị Database</a>
</dt>
<dt>
3- <a class="internal-page-anchor" data-href="#a4447615">Tạo Maven Project &amp; Khai báo thư viện</a>
</dt>
<dt>
4- <a class="internal-page-anchor" data-href="#a77362">Các Class Entity</a>
</dt>
<dt>
5- <a class="internal-page-anchor" data-href="#a77418">Cấu hình Hibernate</a>
</dt>
<dt>
6- <a class="internal-page-anchor" data-href="#a77482">SessionFactory</a>
</dt>
<dt>
7- <a class="internal-page-anchor" data-href="#a77457">Hibernate Query Language (HQL)</a>
</dt>
<dt>
8- <a class="internal-page-anchor" data-href="#a77396">Query dữ liệu với Hibernate</a>
</dt>
<dd>
<a name="top"> </a>
<dl>
<dt>
8.1- <a class="internal-page-anchor" data-href="#a77422">Query Object sử dụng HQL</a>
</dt>
<dt>
8.2- <a class="internal-page-anchor" data-href="#a77472">Query lấy dữ liệu một vài cột sử dụng HQL</a>
</dt>
<dt>
8.3- <a class="internal-page-anchor" data-href="#a77394">Query lấy dữ liệu một vài cột sử dụng HQL &amp; JavaBean</a>
</dt>
<dt>
8.4- <a class="internal-page-anchor" data-href="#a77590">Query Lấy dữ liệu duy nhất</a>
</dt>
</dl>
</dd>
<dt>
9- <a class="internal-page-anchor" data-href="#a77440">Đối tượng Transient, Persistent và Detached là gì?</a>
</dt>
<dt>
10- <a class="internal-page-anchor" data-href="#a77390">Vòng đời của Hibernate (Hibernate Lifecycle)</a>
</dt>
<dt>
11- <a class="internal-page-anchor" data-href="#a77372">Thao tác Insert,Update, Delete với Hibernate</a>
</dt>
<dd>
<a name="top"> </a>
<dl>
<dt>
11.1- <a class="internal-page-anchor" data-href="#a77452">Persistent</a>
</dt>
<dt>
11.2- <a class="internal-page-anchor" data-href="#a77638">Transient --&gt; Persistent : Tổng quan</a>
</dt>
<dt>
11.3- <a class="internal-page-anchor" data-href="#a77404">Transient --&gt; Persistent : Sử dụng persist(Object)</a>
</dt>
<dt>
11.4- <a class="internal-page-anchor" data-href="#a77386">Transient --&gt; Persistent : Sử dụng save(Object) *</a>
</dt>
<dt>
11.5- <a class="internal-page-anchor" data-href="#a77382">Transient --&gt; Persistent : Sử dụng saveOrUpdate(Object)</a>
</dt>
<dt>
11.6- <a class="internal-page-anchor" data-href="#a77370">Transient --&gt; Persistent : Sử dụng merge(Object)</a>
</dt>
<dt>
11.7- <a class="internal-page-anchor" data-href="#a77408">Persistent --&gt; Detached</a>
</dt>
<dt>
11.8- <a class="internal-page-anchor" data-href="#a77428">Detached --&gt; Persistent : Tổng quan</a>
</dt>
<dt>
11.9- <a class="internal-page-anchor" data-href="#a100369">Detached --&gt; Persistent : Sử dụng update(Object)</a>
</dt>
<dt>
11.10- <a class="internal-page-anchor" data-href="#a100393">Detached --&gt; Persistent : Sử dụng saveOrUpdate(Object)</a>
</dt>
<dt>
11.11- <a class="internal-page-anchor" data-href="#a101848">Detached --&gt; Persistent : Sử dụng merge(Object)</a>
</dt>
<dt>
11.12- <a class="internal-page-anchor" data-href="#a101946">Detached --&gt; Persistent : Sử dụng refresh(Object)</a>
</dt>
<dt>
11.13- <a class="internal-page-anchor" data-href="#a101899">Detached --&gt; Persistent : Sử dụng lock(Object)</a>
</dt>
</dl>
</dd>
<dt>
12- <a class="internal-page-anchor" data-href="#a102752">Tạo ra database từ các Entity</a>
</dt>
<dt>
13- <a class="internal-page-anchor" data-href="#a77508">Tra cứu Hibernate</a>
</dt>
</dl>
</div>
</div>
<div style="clear: both;"></div>
<div class="sharethis-inline-share-buttons st-inline-share-buttons  st-right st-animated" style="margin:5px 0px;" id="st-1"><div class="st-total ">
  <span class="st-label">55</span>
  <span class="st-shares">
    Shares
  </span>
</div><div class="st-btn st-first" data-network="facebook" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m21.7 16.7h5v5h-5v11.6h-5v-11.6h-5v-5h5v-2.1c0-2 0.6-4.5 1.8-5.9 1.3-1.3 2.8-2 4.7-2h3.5v5h-3.5c-0.9 0-1.5 0.6-1.5 1.5v3.5z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="twitter" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m31.5 11.7c1.3-0.8 2.2-2 2.7-3.4-1.4 0.7-2.7 1.2-4 1.4-1.1-1.2-2.6-1.9-4.4-1.9-1.7 0-3.2 0.6-4.4 1.8-1.2 1.2-1.8 2.7-1.8 4.4 0 0.5 0.1 0.9 0.2 1.3-5.1-0.1-9.4-2.3-12.7-6.4-0.6 1-0.9 2.1-0.9 3.1 0 2.2 1 3.9 2.8 5.2-1.1-0.1-2-0.4-2.8-0.8 0 1.5 0.5 2.8 1.4 4 0.9 1.1 2.1 1.8 3.5 2.1-0.5 0.1-1 0.2-1.6 0.2-0.5 0-0.9 0-1.1-0.1 0.4 1.2 1.1 2.3 2.1 3 1.1 0.8 2.3 1.2 3.6 1.3-2.2 1.7-4.7 2.6-7.6 2.6-0.7 0-1.2 0-1.5-0.1 2.8 1.9 6 2.8 9.5 2.8 3.5 0 6.7-0.9 9.4-2.7 2.8-1.8 4.8-4.1 6.1-6.7 1.3-2.6 1.9-5.3 1.9-8.1v-0.8c1.3-0.9 2.3-2 3.1-3.2-1.1 0.5-2.3 0.8-3.5 1z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="pinterest" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m37.3 20q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3q-2.4 0-4.8-0.7 1.3-2 1.7-3.6 0.2-0.8 1.2-4.7 0.5 0.8 1.7 1.5t2.5 0.6q2.7 0 4.8-1.5t3.3-4.2 1.2-6.1q0-2.5-1.4-4.7t-3.8-3.7-5.7-1.4q-2.4 0-4.4 0.7t-3.4 1.7-2.5 2.4-1.5 2.9-0.4 3q0 2.4 0.8 4.1t2.7 2.5q0.6 0.3 0.8-0.5 0.1-0.1 0.2-0.6t0.2-0.7q0.1-0.5-0.3-1-1.1-1.3-1.1-3.3 0-3.4 2.3-5.8t6.1-2.5q3.4 0 5.3 1.9t1.9 4.7q0 3.8-1.6 6.5t-3.9 2.6q-1.3 0-2.2-0.9t-0.5-2.4q0.2-0.8 0.6-2.1t0.7-2.3 0.2-1.6q0-1.2-0.6-1.9t-1.7-0.7q-1.4 0-2.3 1.2t-1 3.2q0 1.6 0.6 2.7l-2.2 9.4q-0.4 1.5-0.3 3.9-4.6-2-7.5-6.3t-2.8-9.4q0-4.7 2.3-8.6t6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="linkedin" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m13.3 31.7h-5v-16.7h5v16.7z m18.4 0h-5v-8.9c0-2.4-0.9-3.5-2.5-3.5-1.3 0-2.1 0.6-2.5 1.9v10.5h-5s0-15 0-16.7h3.9l0.3 3.3h0.1c1-1.6 2.7-2.8 4.9-2.8 1.7 0 3.1 0.5 4.2 1.7 1 1.2 1.6 2.8 1.6 5.1v9.4z m-18.3-20.9c0 1.4-1.1 2.5-2.6 2.5s-2.5-1.1-2.5-2.5 1.1-2.5 2.5-2.5 2.6 1.2 2.6 2.5z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="reddit" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m40 18.9q0 1.3-0.7 2.3t-1.7 1.7q0.2 1 0.2 2.1 0 3.5-2.3 6.4t-6.5 4.7-9 1.7-8.9-1.7-6.4-4.7-2.4-6.4q0-1.1 0.2-2.1-1.1-0.6-1.8-1.6t-0.7-2.4q0-1.8 1.3-3.2t3.1-1.3q1.9 0 3.3 1.4 4.8-3.3 11.5-3.6l2.6-11.6q0-0.3 0.3-0.5t0.6-0.1l8.2 1.8q0.4-0.8 1.2-1.3t1.8-0.5q1.4 0 2.4 1t0.9 2.3-0.9 2.4-2.4 1-2.4-1-0.9-2.4l-7.5-1.6-2.3 10.5q6.7 0.2 11.6 3.6 1.3-1.4 3.2-1.4 1.8 0 3.1 1.3t1.3 3.2z m-30.7 4.4q0 1.4 1 2.4t2.4 1 2.3-1 1-2.4-1-2.3-2.3-1q-1.4 0-2.4 1t-1 2.3z m18.1 8q0.3-0.3 0.3-0.6t-0.3-0.6q-0.2-0.2-0.5-0.2t-0.6 0.2q-0.9 0.9-2.7 1.4t-3.6 0.4-3.6-0.4-2.7-1.4q-0.2-0.2-0.5-0.2t-0.6 0.2q-0.3 0.2-0.3 0.6t0.3 0.6q1 0.9 2.6 1.5t2.8 0.6 2 0.1 2-0.1 2.8-0.6 2.6-1.6z m-0.1-4.6q1.4 0 2.4-1t1-2.4q0-1.3-1-2.3t-2.4-1q-1.3 0-2.3 1t-1 2.3 1 2.4 2.3 1z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="googleplus" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m25.2 20.3q0 3.6-1.6 6.5t-4.3 4.4-6.5 1.6q-2.6 0-5-1t-4.1-2.7-2.7-4.1-1-5 1-5 2.7-4.1 4.1-2.7 5-1q5 0 8.6 3.3l-3.5 3.4q-2-2-5.1-2-2.1 0-4 1.1t-2.8 2.9-1.1 4.1 1.1 4.1 2.8 2.9 4 1.1q1.5 0 2.7-0.4t2-1 1.4-1.4 0.8-1.4 0.4-1.3h-7.3v-4.4h12.1q0.3 1.1 0.3 2.1z m15.1-2.1v3.6h-3.6v3.7h-3.7v-3.7h-3.7v-3.6h3.7v-3.7h3.7v3.7h3.6z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="odnoklassniki" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m19.8 20.2q-4.2 0-7.2-2.9t-2.9-7.2q0-4.2 2.9-7.1t7.2-3 7.1 3 3 7.1q0 4.2-3 7.2t-7.1 2.9z m0-15.1q-2.1 0-3.5 1.5t-1.5 3.5q0 2.1 1.5 3.5t3.5 1.5 3.5-1.5 1.5-3.5q0-2-1.5-3.5t-3.5-1.5z m11.7 16.4q0.3 0.6 0.3 1.1t-0.1 0.9-0.6 0.8-0.9 0.9-1.4 0.9q-2.6 1.6-7 2.1l1.6 1.6 5.9 6q0.7 0.7 0.7 1.6t-0.7 1.6l-0.2 0.3q-0.7 0.7-1.7 0.7t-1.6-0.7q-1.5-1.5-6-6l-6 6q-0.6 0.7-1.6 0.7t-1.6-0.7l-0.3-0.3q-0.7-0.6-0.7-1.6t0.7-1.6l7.6-7.6q-4.6-0.5-7.1-2.1-0.9-0.6-1.4-0.9t-0.9-0.9-0.6-0.8-0.1-0.9 0.3-1.1q0.2-0.5 0.6-0.8t1-0.5 1.2 0 1.5 0.8q0.1 0.1 0.3 0.3t1 0.5 1.5 0.7 2.1 0.5 2.5 0.3q2 0 3.9-0.6t2.6-1.1l0.9-0.6q0.7-0.5 1.4-0.8t1.3 0 0.9 0.5 0.7 0.8z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="vk" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m39.8 12.2q0.5 1.3-3.1 6.1-0.5 0.7-1.4 1.8-1.6 2-1.8 2.7-0.4 0.8 0.3 1.7 0.3 0.4 1.6 1.7h0.1l0 0q3 2.8 4 4.6 0.1 0.1 0.1 0.3t0.2 0.5 0 0.8-0.5 0.5-1.3 0.3l-5.3 0.1q-0.5 0.1-1.1-0.1t-1.1-0.5l-0.4-0.2q-0.7-0.5-1.5-1.4t-1.4-1.6-1.3-1.2-1.1-0.3q-0.1 0-0.2 0.1t-0.4 0.3-0.4 0.6-0.4 1.1-0.1 1.6q0 0.3-0.1 0.5t-0.1 0.4l-0.1 0.1q-0.4 0.4-1.1 0.5h-2.4q-1.5 0.1-3-0.4t-2.8-1.1-2.1-1.3-1.5-1.2l-0.5-0.5q-0.2-0.2-0.6-0.6t-1.4-1.9-2.2-3.2-2.6-4.4-2.7-5.6q-0.1-0.3-0.1-0.6t0-0.3l0.1-0.1q0.3-0.4 1.2-0.4l5.7-0.1q0.2 0.1 0.5 0.2t0.3 0.2l0.1 0q0.3 0.2 0.5 0.7 0.4 1 1 2.1t0.8 1.7l0.3 0.6q0.6 1.3 1.2 2.2t1 1.4 0.9 0.8 0.7 0.3 0.5-0.1q0.1 0 0.1-0.1t0.3-0.5 0.3-0.9 0.2-1.7 0-2.6q-0.1-0.9-0.2-1.5t-0.3-1l-0.1-0.2q-0.5-0.7-1.8-0.9-0.3-0.1 0.1-0.5 0.4-0.4 0.8-0.7 1.1-0.5 5-0.5 1.7 0.1 2.8 0.3 0.4 0.1 0.7 0.3t0.4 0.5 0.2 0.7 0.1 0.9 0 1.1-0.1 1.5 0 1.7q0 0.3 0 0.9t-0.1 1 0.1 0.8 0.3 0.8 0.4 0.6q0.2 0 0.4 0t0.5-0.2 0.8-0.7 1.1-1.4 1.4-2.2q1.2-2.2 2.2-4.7 0.1-0.2 0.2-0.4t0.3-0.2l0 0 0.1-0.1 0.3-0.1 0.4 0 6 0q0.8-0.1 1.3 0t0.7 0.4z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="tumblr" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m25.9 29.9v-3.5c-1.1 0.8-2.2 1.1-3.3 1.1-0.5 0-1-0.1-1.6-0.4-0.4-0.3-0.6-0.5-0.7-0.9-0.2-0.3-0.3-1.1-0.3-2.4v-5.5h5v-3.3h-5v-5.6h-3c-0.2 1.3-0.5 2.2-0.7 2.8-0.3 0.7-0.8 1.3-1.5 1.9-0.7 0.5-1.4 0.9-2.1 1.2v3h2.3v7.6c0 0.8 0.1 1.6 0.4 2.2 0.2 0.5 0.5 1 1.1 1.5 0.4 0.4 1 0.8 1.8 1.1 1 0.3 1.9 0.4 2.7 0.4 0.8 0 1.6-0.1 2.4-0.3 0.8-0.2 1.7-0.5 2.5-0.9z"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="blogger" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="M27.5,30 L12.5,30 C11.125,30 10,28.875 10,27.5 C10,26.125 11.125,25 12.5,25 L27.5,25 C28.875,25 30,26.125 30,27.5 C30,28.875 28.875,30 27.5,30 M12.5,10 L20,10 C21.375,10 22.5,11.125 22.5,12.5 C22.5,13.875 21.375,15 20,15 L12.5,15 C11.125,15 10,13.875 10,12.5 C10,11.125 11.125,10 12.5,10 M37.41375,15 L35.21875,15 L35.17125,15 C33.7975,15 32.59375,13.8375 32.5,12.5 C32.5,5.365 26.7475,0 19.5625,0 L13.0075,0 C5.8275,0 0.005,5.78125 0,12.91625 L0,27.08875 C0,34.22375 5.8275,40 13.0075,40 L27.0075,40 C34.1925,40 40,34.22375 40,27.08875 L40,17.93375 C40,16.5075 38.85,15 37.41375,15"></path>
  </g>
</svg>
  
</div><div class="st-btn" data-network="wechat" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="M27.7561832,11.4320611 C24.059542,11.6251908 20.8450382,12.7458015 18.2352672,15.2775573 C15.5984733,17.8354198 14.3948092,20.969771 14.7238168,24.8552672 C13.2789313,24.6763359 11.9629008,24.4793893 10.6393893,24.3679389 C10.1822901,24.3294656 9.63984733,24.3841221 9.25267176,24.6025954 C7.96748092,25.3277863 6.73541985,26.1465649 5.2751145,27.0593893 C5.54305344,25.8474809 5.71648855,24.7862595 6.02351145,23.7654962 C6.24931298,23.0152672 6.14473282,22.5977099 5.45358779,22.1091603 C1.01603053,18.9761832 -0.854503817,14.2874809 0.545343511,9.46030534 C1.84045802,4.99465649 5.02091603,2.28641221 9.34244275,0.874656489 C15.240916,-1.05206107 21.869771,0.913282443 25.4564885,5.59633588 C26.7519084,7.28793893 27.5462595,9.18656489 27.7561832,11.4320611 Z M10.7429008,9.92793893 C10.7769466,9.04503817 10.0119084,8.24961832 9.10320611,8.22305344 C8.17282443,8.19572519 7.40763359,8.90671756 7.38045802,9.82351145 C7.3529771,10.7526718 8.06366412,11.4972519 9.00076336,11.5210687 C9.92977099,11.5445802 10.7085496,10.8326718 10.7429008,9.92793893 Z M19.6193893,8.22244275 C18.7073282,8.23923664 17.9366412,9.01603053 17.9528244,9.90244275 C17.9694656,10.8212214 18.7254962,11.54 19.6633588,11.5287023 C20.6036641,11.5174046 21.3167939,10.7909924 21.3079389,9.85282443 C21.3001527,8.9319084 20.5474809,8.20549618 19.6193893,8.22244275 Z M36.0612214,34.4778626 C34.890687,33.9566412 33.8169466,33.1746565 32.6737405,33.0552672 C31.5349618,32.9363359 30.3378626,33.5932824 29.1464122,33.7151145 C25.5172519,34.0864122 22.2659542,33.0749618 19.5850382,30.5957252 C14.4862595,25.8796947 15.2148092,18.6485496 21.1138931,14.7838168 C26.3567939,11.3490076 34.0458015,12.4940458 37.7422901,17.26 C40.9680916,21.4187786 40.5890076,26.9393893 36.6509924,30.4331298 C35.5114504,31.4442748 35.101374,32.2763359 35.8325191,33.609313 C35.9674809,33.8554198 35.9829008,34.1670229 36.0612214,34.4778626 L36.0612214,34.4778626 Z M22.7369466,21.5772519 C23.4821374,21.5780153 24.0957252,20.9948092 24.1239695,20.2587786 C24.1537405,19.479542 23.5270229,18.8259542 22.7467176,18.8227481 C21.9741985,18.8192366 21.3270229,19.4819847 21.3538931,20.2496183 C21.3792366,20.9830534 21.9970992,21.5763359 22.7369466,21.5772519 Z M31.3264122,18.8258015 C30.6033588,18.8207634 29.9890076,19.4126718 29.959542,20.1432061 C29.9282443,20.9244275 30.5354198,21.5659542 31.3085496,21.5679389 C32.0563359,21.5703817 32.6471756,21.0048855 32.6743511,20.2607634 C32.7033588,19.4777099 32.0958779,18.831145 31.3264122,18.8258015 L31.3264122,18.8258015 Z"></path>
  </g>
</svg>
  
</div><div class="st-btn st-last" data-network="email" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m33.4 13.4v-3.4l-13.4 8.4-13.4-8.4v3.4l13.4 8.2z m0-6.8q1.3 0 2.3 1.1t0.9 2.3v20q0 1.3-0.9 2.3t-2.3 1.1h-26.8q-1.3 0-2.3-1.1t-0.9-2.3v-20q0-1.3 0.9-2.3t2.3-1.1h26.8z"></path>
  </g>
</svg>
  
</div></div>
<div style="clear: both;"></div>



<div style="clear: both;"></div>
<div class="item-data">
<div class="content-content-container">
<dl>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77836.png">
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77495"></a>1- Giới thiệu </h2>
<div class="ct-place-holder" id="ct-place-holder-77495">
<span id="ezoic-pub-ad-placeholder-102"></span><span style="display:none;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:270px;min-width:300px;" class="ezoic-ad medrectangle-3 adtester-container adtester-container-102" data-ez-name="o7planning_org-medrectangle-3"><span id="div-gpt-ad-o7planning_org-medrectangle-3-0" ezaw="300" ezah="250" style="position:relative;z-index:0;display:none;" class="ezoic-ad"><div id="google_ads_iframe_/1254144/o7planning_org-medrectangle-3_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-medrectangle-3_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-medrectangle-3_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(3).html"></iframe></div></span></span><script>var ezzns21 = {0.25:504548,1.40:504651,5.00:504669,1.20:504649,2.40:504659,2.80:504661,0.05:504099,0.20:504145,1.00:504647,1.10:504648,1.50:504652,3.50:504665,0.10:504141,0.35:504552,0.45:504555,0.50:504556,0.30:504551,0.60:504557,4.00:504666,0.15:504144,1.30:504650,1.60:504653,1.80:504655,0.40:504554,1.70:504654,1.90:504656,2.00:504657,0.80:504559,0.90:504560,2.60:504660,4.50:504667,0.70:504558,2.20:504658,3.00:504664,};</script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/publishertag.js.download"></script>
<div class="ezflad-47" style="display:inline-block" adunitname="o7planning_org-medrectangle-3" id="crt-21">
<script type="text/javascript">
var ezoflbf_2_21 = function() { __ez.queue.addFunc('ReloadFromP_1102', 'IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.ReloadFromP', 1102, false, ['banger.js'], false, false, false, true); };
var ezoflbf_21 = function() { eval(ez_write_tag([[300,250],'o7planning_org-medrectangle-3','ezslot_3']));
		};</script><script type="text/javascript">ezoflbf_21();
</script></div>
<script type="text/javascript">
	var __ezfl_sss_1102 = function() {
		setTimeout(function(){
			var ezflaun = IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.GetNameFromPositionId(1102);
			if (typeof ezflaun != 'undefined' && ezflaun.length > 0) {
				if (typeof ez_ad_units != undefined) {
					for (i = 0; i < ez_ad_units.length; i++) {
						if (ezflaun.indexOf(ez_ad_units[i][1]) >= 0) {
							return false;
						}
					}
				}
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.StoreStatSource(ezflaun, 47, 8.50);
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.RemoveSlotById(ezflaun);
			}
		}, 8000);
	};
	__ez.queue.addFunc('__ezfl_sss_1102', '__ezfl_sss_1102', null, false, ['banger.js'], false, false, false, true);
</script>
</div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Tài liệu này được viết dựa trên:
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ul>
<li> <h3>Hibernate 5.2.2.Final</h3> </li>
<li> <h3>Eclipse 4.6 (MARS)</h3> </li>
</ul>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
History:
<ul>
<li>Last Update: 14-09-2016 (dd-MM-yyyy).</li>
</ul>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Trong tài liệu này tôi hướng dẫn bạn làm việc với Hibernate 5. Nó có rất nhiều thay đổi so với phiên bản 4. Một số thay đổi quan trọng được đề cập ở dưới đây:
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ul>
<li>Class <strong>org.hibernate.Query</strong> đã bị lỗi thời, và được thay thế bởi <strong>org.hibernate.query.Query</strong></li>
<li>Class <strong>org.hibernate.Session</strong> đã được cập nhập thành để sử dụng kiểu Generics.</li>
</ul>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Chi tiết các thay đổi:
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ol>
<li>Hibernate 5 là điểm bắt đầu cho Hibernate Spatial, nó là một phần của dự án Hibernate, như vậy chúng ta có thể xử lý các dữ liệu GIS (Dữ liệu bản đồ số).</li>
<li>Hỗ trợ Java 8 Date và Time trong domain model mappings. Các ánh xạ giữ các kiểu Date tiêu chuẩn trong SQL và Java 8 Date Time như dưới đây:
<ul>
<li>DATE: <strong>java.time.LocalDate</strong></li>
<li>TIME: <strong>java.time.LocalTime</strong>, <strong>java.time.OffsetTime</strong></li>
<li>TIMESTAMP: <strong>java.time.Instant</strong>, <strong>java.time.LocalDateTime</strong>, <strong>java.time.OffsetDateTime</strong> và <strong>java.time.ZonedDateTime</strong></li>
</ul> </li>
<li>Các cơ chế cải tiến bytecode đã được thiết kế lại từ đầu, và Hibernate có cả hai tính năng plugin Maven và Gradle. Có ba khía cạnh chính được cải tiến:
<ul>
<li>Lazy initialization: Các trường (fields) có thể được khai báo là LAZY và chúng sẽ được lấy (fetched) chỉ khi chúng được truy cập lần đầu tiên.</li>
<li>Dirty checking: Các Entities được cải tiến để có thể nắm được tất cả các thuộc tính bị thay đổi sau khi được nạp (loaded) vào Persistence Context.</li>
<li>Bidirectional associations: Nó có thể đồng bộ hai phía của một liên hợp hai chiều (bidirectional association) một cách tự động, thậm trí trong trường hợp người lập trình chỉ cập nhập một phía.</li>
</ul> </li>
<li>Hibernate's native APIs (Session, ...) cập nhập API để sử dụng các kiểu Generic. Không cần phải ép kiểu khi quét lấy (fetching) các entity.</li>
<li>Hibernate 5.0 mở rộng hơn cho các kiểu (Chẳng hạn UUID).</li>
<li>Bộ đệm thứ cấp cho các kiểu tham chiếu. Tính năng này cho phép trực tiếp lưu trữ các tham chiếu của các entity vào một bộ nhớ đệm (cache) thứ cấp đối với các entity không thay đổi.</li>
</ol>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a4447848"></a>2- Chuẩn bị Database </h2>
<div class="ct-place-holder" id="ct-place-holder-4447848"></div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
<strong>Hibernate </strong>vốn là một thư viện sinh ra để làm việc với mọi loại DB, nó không phụ thuộc vào bạn chọn loại
<strong>DB </strong>nào. Nếu Java là
<em><strong>"Viết 1 lần chạy mọi nơi"</strong></em> thì
<strong>Hibernate </strong>là
<em><strong>"Viết 1 lần chạy trên mọi loại DB"</strong></em>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Trong tài liệu này, tôi sử dụng
<em><strong>simplehr</strong></em>, nó là một database đơn giản, được sử dụng trong nhiều hướng dẫn trên
<strong>o7planning</strong>. Bạn có thể tạo nó với một trong các loại cơ sở dữ liệu
<strong>Oracle</strong>,
<strong>MySQL</strong> hoặc
<strong>SQL Server</strong>. Xem hướng dẫn dưới đây:
</div>
</dd>
<dd>
<div class="df-fragment df-none-entrypoint">
<ul>
<li><a target="_blank" href="https://o7planning.org/vi/10117/co-so-du-lieu-mau" class="target-blank-url">Cơ sở dữ liệu mẫu</a></li>
</ul>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a4447615"></a>3- Tạo Maven Project &amp; Khai báo thư viện </h2>
<div class="ct-place-holder" id="ct-place-holder-4447615">
<span id="ezoic-pub-ad-placeholder-111"></span>
</div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Ở đây tôi tạo một Maven project, và khai báo các thư viện Hibernate trong
<em><strong>pom.xml</strong></em>.
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ul>
<li><strong>File/New/Other...</strong></li>
</ul>
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/4447686.png">
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/4447706.png">
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/4447726.png">
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/4447731.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Project đã được tạo ra.
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/4447759.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Trong
<em><strong>pom.xml</strong></em> tôi khai báo thư viện
<strong>Hibernate 5</strong>, và các thư viện JDBC cho các loại Database khác nhau
<strong>Oracle</strong>,
<strong>MySQL</strong> và
<strong>SQL Server</strong>.
</div>
</dd>
<dd>
<div class="df-fragment df-text-xml">
<div class="df-file-name">
pom.xml
</div>
<div><div id="highlighter_684046" class="syntaxhighlighter  xml"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">project</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a>"</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain"><a href="http://maven.apache.org/xsd/maven-4.0.0.xsd">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>"&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">modelVersion</code><code class="xml plain">&gt;4.0.0&lt;/</code><code class="xml keyword">modelVersion</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.o7planning&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;HibernateTutorial&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;0.0.1-SNAPSHOT&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">packaging</code><code class="xml plain">&gt;jar&lt;/</code><code class="xml keyword">packaging</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">name</code><code class="xml plain">&gt;HibernateTutorial&lt;/</code><code class="xml keyword">name</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">url</code><code class="xml plain">&gt;<a href="http://maven.apache.org/">http://maven.apache.org</a>&lt;/</code><code class="xml keyword">url</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">properties</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">project.build.sourceEncoding</code><code class="xml plain">&gt;UTF-8&lt;/</code><code class="xml keyword">project.build.sourceEncoding</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">properties</code><code class="xml plain">&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">repositories</code><code class="xml plain">&gt;</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Repository for ORACLE JDBC Driver --&gt;</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">repository</code><code class="xml plain">&gt;</code></div><div class="line number23 index22 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">id</code><code class="xml plain">&gt;codelds&lt;/</code><code class="xml keyword">id</code><code class="xml plain">&gt;</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">url</code><code class="xml plain">&gt;<a href="https://code.lds.org/nexus/content/groups/main-repo">https://code.lds.org/nexus/content/groups/main-repo</a>&lt;/</code><code class="xml keyword">url</code><code class="xml plain">&gt;</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">repository</code><code class="xml plain">&gt;</code></div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">repositories</code><code class="xml plain">&gt;</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependencies</code><code class="xml plain">&gt;</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;junit&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;junit&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;3.8.1&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number36 index35 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">scope</code><code class="xml plain">&gt;test&lt;/</code><code class="xml keyword">scope</code><code class="xml plain">&gt;</code></div><div class="line number37 index36 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Hibernate Core --&gt;</code></div><div class="line number40 index39 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- <a href="https://mvnrepository.com/artifact/org.hibernate/hibernate-core">https://mvnrepository.com/artifact/org.hibernate/hibernate-core</a> --&gt;</code></div><div class="line number41 index40 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number42 index41 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.hibernate&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number43 index42 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;hibernate-core&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number44 index43 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;5.2.2.Final&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number45 index44 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- MySQL JDBC driver --&gt;</code></div><div class="line number49 index48 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- <a href="http://mvnrepository.com/artifact/mysql/mysql-connector-java%20--">http://mvnrepository.com/artifact/mysql/mysql-connector-java%20--</a>&gt;</code></div><div class="line number50 index49 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number51 index50 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;mysql&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number52 index51 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;mysql-connector-java&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number53 index52 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;5.1.34&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number54 index53 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Oracle JDBC driver --&gt;</code></div><div class="line number57 index56 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number58 index57 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;com.oracle&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number59 index58 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;ojdbc6&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number60 index59 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;11.2.0.3&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number61 index60 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- SQLServer JDBC driver (JTDS) --&gt;</code></div><div class="line number64 index63 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- <a href="http://mvnrepository.com/artifact/net.sourceforge.jtds/jtds%20--">http://mvnrepository.com/artifact/net.sourceforge.jtds/jtds%20--</a>&gt;</code></div><div class="line number65 index64 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number66 index65 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;net.sourceforge.jtds&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number67 index66 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;jtds&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number68 index67 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;1.3.1&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number69 index68 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number70 index69 alt1">&nbsp;</div><div class="line number71 index70 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dependencies</code><code class="xml plain">&gt;</code></div><div class="line number72 index71 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number73 index72 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">project</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77362"></a>4- Các Class Entity </h2>
<div class="ct-place-holder" id="ct-place-holder-77362">
<span id="ezoic-pub-ad-placeholder-112"></span><span style="display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px;" class="ezoic-ad large-leaderboard-2 adtester-container adtester-container-112" data-ez-name="o7planning_org-large-leaderboard-2"><span id="div-gpt-ad-o7planning_org-large-leaderboard-2-0" ezaw="336" ezah="280" style="position:relative;z-index:0;display:inline-block;" class="ezoic-ad"><script data-cfasync="false" type="text/javascript" style="display:none;">eval(ez_write_tag([[336,280],'o7planning_org-large-leaderboard-2','ezslot_2']));</script><div id="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-2_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-2_0" width="336" height="280" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(4).html"></iframe></div></span></span>
</div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Chúng ta tạo các class
<strong>Entity</strong>. Mỗi
<strong>Entity </strong>sẽ mô tả một bảng trong
<strong>DB</strong>. Hãy khoan nói về những gì có trong các class đó.
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77356.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ol>
<li><strong>Department </strong>- Phòng ban</li>
<li><strong>Employee </strong>- Nhân viên</li>
<li><strong>SalaryGrade </strong>- Bậc lương</li>
<li><strong>Timekeeper </strong>- Máy chấm công, giờ ra vào của nhân viên.</li>
</ol>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
Department.java
</div>
<div><div id="highlighter_392104" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.HashSet;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Set;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Column;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Entity;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.FetchType;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Id;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.OneToMany;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Table;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.UniqueConstraint;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java color1">@Entity</code></div><div class="line number15 index14 alt2"><code class="java color1">@Table</code><code class="java plain">(name = </code><code class="java string">"DEPARTMENT"</code><code class="java plain">,</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">uniqueConstraints = { </code><code class="java color1">@UniqueConstraint</code><code class="java plain">(columnNames = { </code><code class="java string">"DEPT_NO"</code> <code class="java plain">}) })</code></div><div class="line number17 index16 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">Department {</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java keyword">private</code> <code class="java plain">Integer deptId;</code></div><div class="line number20 index19 alt1"><code class="java keyword">private</code> <code class="java plain">String deptNo;</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java keyword">private</code> <code class="java plain">String deptName;</code></div><div class="line number23 index22 alt2"><code class="java keyword">private</code> <code class="java plain">String location;</code></div><div class="line number24 index23 alt1"><code class="java keyword">private</code> <code class="java plain">Set&lt;Employee&gt; employees = </code><code class="java keyword">new</code> <code class="java plain">HashSet&lt;Employee&gt;(</code><code class="java value">0</code><code class="java plain">);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java keyword">public</code> <code class="java plain">Department() {</code></div><div class="line number27 index26 alt2"><code class="java plain">}</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java keyword">public</code> <code class="java plain">Department(Integer deptId, String deptName, String location) {</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptId = deptId;</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptNo = </code><code class="java string">"D"</code> <code class="java plain">+ </code><code class="java keyword">this</code><code class="java plain">.deptId;</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptName = deptName;</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.location = location;</code></div><div class="line number34 index33 alt1"><code class="java plain">}</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java color1">@Id</code></div><div class="line number37 index36 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"DEPT_ID"</code><code class="java plain">)</code></div><div class="line number38 index37 alt1"><code class="java keyword">public</code> <code class="java plain">Integer getDeptId() {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">deptId;</code></div><div class="line number40 index39 alt1"><code class="java plain">}</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setDeptId(Integer deptId) {</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptId = deptId;</code></div><div class="line number44 index43 alt1"><code class="java plain">}</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"DEPT_NO"</code><code class="java plain">, length = </code><code class="java value">20</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number47 index46 alt2"><code class="java keyword">public</code> <code class="java plain">String getDeptNo() {</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">deptNo;</code></div><div class="line number49 index48 alt2"><code class="java plain">}</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setDeptNo(String deptNo) {</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptNo = deptNo;</code></div><div class="line number53 index52 alt2"><code class="java plain">}</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"DEPT_NAME"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number56 index55 alt1"><code class="java keyword">public</code> <code class="java plain">String getDeptName() {</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">deptName;</code></div><div class="line number58 index57 alt1"><code class="java plain">}</code></div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setDeptName(String deptName) {</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.deptName = deptName;</code></div><div class="line number62 index61 alt1"><code class="java plain">}</code></div><div class="line number63 index62 alt2">&nbsp;</div><div class="line number64 index63 alt1"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"LOCATION"</code><code class="java plain">)</code></div><div class="line number65 index64 alt2"><code class="java keyword">public</code> <code class="java plain">String getLocation() {</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">location;</code></div><div class="line number67 index66 alt2"><code class="java plain">}</code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setLocation(String location) {</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.location = location;</code></div><div class="line number71 index70 alt2"><code class="java plain">}</code></div><div class="line number72 index71 alt1">&nbsp;</div><div class="line number73 index72 alt2"><code class="java color1">@OneToMany</code><code class="java plain">(fetch = FetchType.LAZY, mappedBy = </code><code class="java string">"department"</code><code class="java plain">)</code></div><div class="line number74 index73 alt1"><code class="java keyword">public</code> <code class="java plain">Set&lt;Employee&gt; getEmployees() {</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">employees;</code></div><div class="line number76 index75 alt1"><code class="java plain">}</code></div><div class="line number77 index76 alt2">&nbsp;</div><div class="line number78 index77 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmployees(Set&lt;Employee&gt; employees) {</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.employees = employees;</code></div><div class="line number80 index79 alt1"><code class="java plain">}</code></div><div class="line number81 index80 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
Employee.java
</div>
<div><div id="highlighter_304046" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div><div class="line number136 index135 alt1">136</div><div class="line number137 index136 alt2">137</div><div class="line number138 index137 alt1">138</div><div class="line number139 index138 alt2">139</div><div class="line number140 index139 alt1">140</div><div class="line number141 index140 alt2">141</div><div class="line number142 index141 alt1">142</div><div class="line number143 index142 alt2">143</div><div class="line number144 index143 alt1">144</div><div class="line number145 index144 alt2">145</div><div class="line number146 index145 alt1">146</div><div class="line number147 index146 alt2">147</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.HashSet;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Set;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Column;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Entity;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.FetchType;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Id;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.JoinColumn;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Lob;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.ManyToOne;</code></div><div class="line number14 index13 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.OneToMany;</code></div><div class="line number15 index14 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Table;</code></div><div class="line number16 index15 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Temporal;</code></div><div class="line number17 index16 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.TemporalType;</code></div><div class="line number18 index17 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.UniqueConstraint;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="java color1">@Entity</code></div><div class="line number21 index20 alt2"><code class="java color1">@Table</code><code class="java plain">(name = </code><code class="java string">"EMPLOYEE"</code><code class="java plain">,</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">uniqueConstraints = { </code><code class="java color1">@UniqueConstraint</code><code class="java plain">(columnNames = { </code><code class="java string">"EMP_NO"</code> <code class="java plain">}) })</code></div><div class="line number23 index22 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">Employee {</code></div><div class="line number24 index23 alt1"><code class="java keyword">private</code> <code class="java plain">Long empId;</code></div><div class="line number25 index24 alt2"><code class="java keyword">private</code> <code class="java plain">String empNo;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java keyword">private</code> <code class="java plain">String empName;</code></div><div class="line number28 index27 alt1"><code class="java keyword">private</code> <code class="java plain">String job;</code></div><div class="line number29 index28 alt2"><code class="java keyword">private</code> <code class="java plain">Employee manager;</code></div><div class="line number30 index29 alt1"><code class="java keyword">private</code> <code class="java plain">Date hideDate;</code></div><div class="line number31 index30 alt2"><code class="java keyword">private</code> <code class="java plain">Float salary;</code></div><div class="line number32 index31 alt1"><code class="java keyword">private</code> <code class="java keyword">byte</code><code class="java plain">[] image;</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java keyword">private</code> <code class="java plain">Department department;</code></div><div class="line number35 index34 alt2"><code class="java keyword">private</code> <code class="java plain">Set&lt;Employee&gt; employees = </code><code class="java keyword">new</code> <code class="java plain">HashSet&lt;Employee&gt;(</code><code class="java value">0</code><code class="java plain">);</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="java keyword">public</code> <code class="java plain">Employee() {</code></div><div class="line number38 index37 alt1"><code class="java plain">}</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java keyword">public</code> <code class="java plain">Employee(Long empId, String empName, String job, Employee manager,</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Date hideDate, Float salary, Float comm, Department department) {</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empId = empId;</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empNo = </code><code class="java string">"E"</code> <code class="java plain">+ </code><code class="java keyword">this</code><code class="java plain">.empId;</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empName = empName;</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.job = job;</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.manager = manager;</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.hideDate = hideDate;</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.salary = salary;</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.department = department;</code></div><div class="line number50 index49 alt1"><code class="java plain">}</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="java color1">@Id</code></div><div class="line number53 index52 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"EMP_ID"</code><code class="java plain">)</code></div><div class="line number54 index53 alt1"><code class="java keyword">public</code> <code class="java plain">Long getEmpId() {</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empId;</code></div><div class="line number56 index55 alt1"><code class="java plain">}</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpId(Long empId) {</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empId = empId;</code></div><div class="line number60 index59 alt1"><code class="java plain">}</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"EMP_NO"</code><code class="java plain">, length = </code><code class="java value">20</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number63 index62 alt2"><code class="java keyword">public</code> <code class="java plain">String getEmpNo() {</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empNo;</code></div><div class="line number65 index64 alt2"><code class="java plain">}</code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpNo(String empNo) {</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empNo = empNo;</code></div><div class="line number69 index68 alt2"><code class="java plain">}</code></div><div class="line number70 index69 alt1">&nbsp;</div><div class="line number71 index70 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"EMP_NAME"</code><code class="java plain">, length = </code><code class="java value">50</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number72 index71 alt1"><code class="java keyword">public</code> <code class="java plain">String getEmpName() {</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empName;</code></div><div class="line number74 index73 alt1"><code class="java plain">}</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpName(String empName) {</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empName = empName;</code></div><div class="line number78 index77 alt1"><code class="java plain">}</code></div><div class="line number79 index78 alt2">&nbsp;</div><div class="line number80 index79 alt1"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"JOB"</code><code class="java plain">, length = </code><code class="java value">30</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number81 index80 alt2"><code class="java keyword">public</code> <code class="java plain">String getJob() {</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">job;</code></div><div class="line number83 index82 alt2"><code class="java plain">}</code></div><div class="line number84 index83 alt1">&nbsp;</div><div class="line number85 index84 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setJob(String job) {</code></div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.job = job;</code></div><div class="line number87 index86 alt2"><code class="java plain">}</code></div><div class="line number88 index87 alt1">&nbsp;</div><div class="line number89 index88 alt2"><code class="java color1">@ManyToOne</code><code class="java plain">(fetch = FetchType.LAZY)</code></div><div class="line number90 index89 alt1"><code class="java color1">@JoinColumn</code><code class="java plain">(name = </code><code class="java string">"MNG_ID"</code><code class="java plain">)</code></div><div class="line number91 index90 alt2"><code class="java keyword">public</code> <code class="java plain">Employee getManager() {</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">manager;</code></div><div class="line number93 index92 alt2"><code class="java plain">}</code></div><div class="line number94 index93 alt1">&nbsp;</div><div class="line number95 index94 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setManager(Employee manager) {</code></div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.manager = manager;</code></div><div class="line number97 index96 alt2"><code class="java plain">}</code></div><div class="line number98 index97 alt1">&nbsp;</div><div class="line number99 index98 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"HIRE_DATE"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number100 index99 alt1"><code class="java color1">@Temporal</code><code class="java plain">(TemporalType.DATE)</code></div><div class="line number101 index100 alt2"><code class="java keyword">public</code> <code class="java plain">Date getHideDate() {</code></div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">hideDate;</code></div><div class="line number103 index102 alt2"><code class="java plain">}</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setHideDate(Date hideDate) {</code></div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.hideDate = hideDate;</code></div><div class="line number107 index106 alt2"><code class="java plain">}</code></div><div class="line number108 index107 alt1">&nbsp;</div><div class="line number109 index108 alt2"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"SALARY"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number110 index109 alt1"><code class="java keyword">public</code> <code class="java plain">Float getSalary() {</code></div><div class="line number111 index110 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">salary;</code></div><div class="line number112 index111 alt1"><code class="java plain">}</code></div><div class="line number113 index112 alt2">&nbsp;</div><div class="line number114 index113 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setSalary(Float salary) {</code></div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.salary = salary;</code></div><div class="line number116 index115 alt1"><code class="java plain">}</code></div><div class="line number117 index116 alt2">&nbsp;</div><div class="line number118 index117 alt1"><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"IMAGE"</code><code class="java plain">, length = </code><code class="java value">1111111</code><code class="java plain">, nullable = </code><code class="java keyword">true</code><code class="java plain">)</code></div><div class="line number119 index118 alt2"><code class="java color1">@Lob</code></div><div class="line number120 index119 alt1"><code class="java keyword">public</code> <code class="java keyword">byte</code><code class="java plain">[] getImage() {</code></div><div class="line number121 index120 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">image;</code></div><div class="line number122 index121 alt1"><code class="java plain">}</code></div><div class="line number123 index122 alt2">&nbsp;</div><div class="line number124 index123 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setImage(</code><code class="java keyword">byte</code><code class="java plain">[] image) {</code></div><div class="line number125 index124 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.image = image;</code></div><div class="line number126 index125 alt1"><code class="java plain">}</code></div><div class="line number127 index126 alt2">&nbsp;</div><div class="line number128 index127 alt1"><code class="java color1">@ManyToOne</code><code class="java plain">(fetch = FetchType.LAZY)</code></div><div class="line number129 index128 alt2"><code class="java color1">@JoinColumn</code><code class="java plain">(name = </code><code class="java string">"DEPT_ID"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number130 index129 alt1"><code class="java keyword">public</code> <code class="java plain">Department getDepartment() {</code></div><div class="line number131 index130 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">department;</code></div><div class="line number132 index131 alt1"><code class="java plain">}</code></div><div class="line number133 index132 alt2">&nbsp;</div><div class="line number134 index133 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setDepartment(Department department) {</code></div><div class="line number135 index134 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.department = department;</code></div><div class="line number136 index135 alt1"><code class="java plain">}</code></div><div class="line number137 index136 alt2">&nbsp;</div><div class="line number138 index137 alt1"><code class="java color1">@OneToMany</code><code class="java plain">(fetch = FetchType.LAZY, mappedBy = </code><code class="java string">"empId"</code><code class="java plain">)</code></div><div class="line number139 index138 alt2"><code class="java keyword">public</code> <code class="java plain">Set&lt;Employee&gt; getEmployees() {</code></div><div class="line number140 index139 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">employees;</code></div><div class="line number141 index140 alt2"><code class="java plain">}</code></div><div class="line number142 index141 alt1">&nbsp;</div><div class="line number143 index142 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmployees(Set&lt;Employee&gt; employees) {</code></div><div class="line number144 index143 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.employees = employees;</code></div><div class="line number145 index144 alt2"><code class="java plain">}</code></div><div class="line number146 index145 alt1">&nbsp;</div><div class="line number147 index146 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
SalaryGrade.java
</div>
<div><div id="highlighter_118367" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Column;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Entity;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Id;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Table;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java color1">@Entity</code></div><div class="line number9 index8 alt2"><code class="java color1">@Table</code><code class="java plain">(name = </code><code class="java string">"SALARY_GRADE"</code><code class="java plain">)</code></div><div class="line number10 index9 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">SalaryGrade {</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Integer grade;</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Float lowSalary;</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Float highSalary;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">SalaryGrade() {</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">SalaryGrade(Integer grade, Float lowSalary, Float highSalary) {</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.grade = grade;</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.lowSalary = lowSalary;</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.highSalary = highSalary;</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;</code><code class="java color1">@Id</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"GRADE"</code><code class="java plain">)</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Integer getGrade() {</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">grade;</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setGrade(Integer grade) {</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.grade = grade;</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"LOW_SALARY"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Float getLowSalary() {</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">lowSalary;</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setLowSalary(Float lowSalary) {</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.lowSalary = lowSalary;</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"HIGH_SALARY"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Float getHighSalary() {</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">highSalary;</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setHighSalary(Float highSalary) {</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.highSalary = highSalary;</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number51 index50 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
Timekeeper.java
</div>
<div><div id="highlighter_971310" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Column;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Entity;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.FetchType;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.GeneratedValue;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Id;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.JoinColumn;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.ManyToOne;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Table;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java plain">javax.persistence.Temporal;</code></div><div class="line number14 index13 alt1"><code class="java keyword">import</code> <code class="java plain">javax.persistence.TemporalType;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.annotations.GenericGenerator;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java color1">@Entity</code></div><div class="line number19 index18 alt2"><code class="java color1">@Table</code><code class="java plain">(name = </code><code class="java string">"TIMEKEEPER"</code><code class="java plain">)</code></div><div class="line number20 index19 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">Timekeeper {</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java keyword">char</code> <code class="java plain">IN = </code><code class="java string">'I'</code><code class="java plain">;</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java keyword">char</code> <code class="java plain">OUT = </code><code class="java string">'O'</code><code class="java plain">;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String timekeeperId;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Date dateTime;</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Employee employee;</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java comments">// 'I' or 'O'</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">char</code> <code class="java plain">inOut;</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@Id</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@GeneratedValue</code><code class="java plain">(generator = </code><code class="java string">"uuid"</code><code class="java plain">)</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@GenericGenerator</code><code class="java plain">(name = </code><code class="java string">"uuid"</code><code class="java plain">, strategy = </code><code class="java string">"uuid2"</code><code class="java plain">)</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"Timekeeper_Id"</code><code class="java plain">, length = </code><code class="java value">36</code><code class="java plain">)</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String getTimekeeperId() {</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">timekeeperId;</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setTimekeeperId(String timekeeperId) {</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.timekeeperId = timekeeperId;</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"Date_Time"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@Temporal</code><code class="java plain">(TemporalType.TIMESTAMP)</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Date getDateTime() {</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">dateTime;</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setDateTime(Date dateTime) {</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.dateTime = dateTime;</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@ManyToOne</code><code class="java plain">(fetch = FetchType.LAZY)</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@JoinColumn</code><code class="java plain">(name = </code><code class="java string">"EMP_ID"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">)</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Employee getEmployee() {</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">employee;</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmployee(Employee employee) {</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.employee = employee;</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java color1">@Column</code><code class="java plain">(name = </code><code class="java string">"In_Out"</code><code class="java plain">, nullable = </code><code class="java keyword">false</code><code class="java plain">, length = </code><code class="java value">1</code><code class="java plain">)</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">char</code> <code class="java plain">getInOut() {</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">inOut;</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setInOut(</code><code class="java keyword">char</code> <code class="java plain">inOut) {</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.inOut = inOut;</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77418"></a>5- Cấu hình Hibernate </h2>
<div class="ct-place-holder" id="ct-place-holder-77418"></div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Mục đích là để
<strong>Hibernate </strong>đọc được vào
<strong>Database</strong>, cũng như khai báo danh sách các
<strong>Entity</strong>, bạn đã tạo ở bước trên.
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Tạo file cấu hình
<em><strong>hibernate.cfg.xml</strong></em> đặt tại
<em><strong>src/main/java</strong></em>
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77484.png">
</div>
</dd>
<dd>
<div class="df-fragment df-text-xml">
<div class="df-file-name">
hibernate.cfg.xml (ORACLE)
</div>
<div><div id="highlighter_673066" class="syntaxhighlighter  xml"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">'1.0'</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">'utf-8'</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">"<a href="http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd</a>"&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.dialect"</code><code class="xml plain">&gt;org.hibernate.dialect.Oracle10gDialect&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.driver_class"</code><code class="xml plain">&gt;oracle.jdbc.driver.OracleDriver&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.url"</code><code class="xml plain">&gt;jdbc:oracle:thin:@localhost:1521:db11g&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.username"</code><code class="xml plain">&gt;simplehr&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.password"</code><code class="xml plain">&gt;12345&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.show_sql"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.release_mode"</code><code class="xml plain">&gt;auto&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"current_session_context_class"</code><code class="xml plain">&gt;thread&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hibernate.connection.autoReconnect"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Department"</code> <code class="xml plain">/&gt;</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Employee"</code> <code class="xml plain">/&gt;</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.SalaryGrade"</code> <code class="xml plain">/&gt;</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Timekeeper"</code> <code class="xml plain">/&gt;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-xml">
<div class="df-file-name">
hibernate.cfg.xml (MySQL)
</div>
<div><div id="highlighter_774216" class="syntaxhighlighter  xml"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">'1.0'</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">'utf-8'</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;!DOCTYPE hibernate-configuration PUBLIC</code></div><div class="line number3 index2 alt2"><code class="xml plain">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</code></div><div class="line number4 index3 alt1"><code class="xml plain">"<a href="http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd</a>"&gt;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Database connection settings --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.driver_class"</code><code class="xml plain">&gt;com.mysql.jdbc.Driver&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.url"</code><code class="xml plain">&gt;jdbc:<a href="mysql://tran-vmware:3306/simplehr?serverTimezone=UTC">mysql://tran-vmware:3306/simplehr?serverTimezone=UTC</a>&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.username"</code><code class="xml plain">&gt;root&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.password"</code><code class="xml plain">&gt;1234&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- JDBC connection pool (use the built-in) --&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.pool_size"</code><code class="xml plain">&gt;1&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- SQL dialect --&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dialect"</code><code class="xml plain">&gt;org.hibernate.dialect.MySQLDialect&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Enable Hibernate's automatic session context management --&gt;</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"current_session_context_class"</code><code class="xml plain">&gt;thread&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Disable the second-level cache --&gt;</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"cache.provider_class"</code><code class="xml plain">&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Echo all executed SQL to stdout --&gt;</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"show_sql"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Department"</code> <code class="xml plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Employee"</code> <code class="xml plain">/&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.SalaryGrade"</code> <code class="xml plain">/&gt;</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Timekeeper"</code> <code class="xml plain">/&gt;</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-xml">
<div class="df-file-name">
hibernate.cfg.xml (SQL Server)
</div>
<div><div id="highlighter_804419" class="syntaxhighlighter  xml"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">'1.0'</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">'utf-8'</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;!DOCTYPE hibernate-configuration PUBLIC</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">"<a href="http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd</a>"&gt;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Database connection settings --&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.driver_class"</code><code class="xml plain">&gt;net.sourceforge.jtds.jdbc.Driver&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.url"</code><code class="xml plain">&gt;jdbc:jtds:<a href="sqlserver://localhost:1433/simplehr;instance=SQLEXPRESS">sqlserver://localhost:1433/simplehr;instance=SQLEXPRESS</a>&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.username"</code><code class="xml plain">&gt;sa&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.password"</code><code class="xml plain">&gt;1234&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- JDBC connection pool (use the built-in) --&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"connection.pool_size"</code><code class="xml plain">&gt;1&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- SQL dialect --&gt;</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dialect"</code><code class="xml plain">&gt;org.hibernate.dialect.SQLServerDialect&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Enable Hibernate's automatic session context management --&gt;</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"current_session_context_class"</code><code class="xml plain">&gt;thread&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Disable the second-level cache --&gt;</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"cache.provider_class"</code><code class="xml plain">&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Echo all executed SQL to stdout --&gt;</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"show_sql"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Department"</code> <code class="xml plain">/&gt;</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Employee"</code> <code class="xml plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.SalaryGrade"</code> <code class="xml plain">/&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">mapping</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.o7planning.tutorial.hibernate.entities.Timekeeper"</code> <code class="xml plain">/&gt;</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">session-factory</code><code class="xml plain">&gt;</code></div><div class="line number35 index34 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">hibernate-configuration</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Với mỗi loại Database khác nhau có một Dialect khác nhau.
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Dialect cho Oracle:
<ul>
<li>org.hibernate.dialect.Oracle10gDialect (Dùng cho 10g &amp;11g)</li>
<li>org.hibernate.dialect.Oracle12cDialect</li>
</ul> Dialect cho SQL Server:
<ul>
<li>org.hibernate.dialect.SQLServerDialect</li>
<li>org.hibernate.dialect.SQLServer2012Dialect</li>
<li>org.hibernate.dialect.SQLServer2008Dialect</li>
</ul> Dialect cho MySQL
<ul>
<li>org.hibernate.dialect.MySQLDialect</li>
<li>org.hibernate.dialect.MySQL5Dialect</li>
</ul>
</div>
</dd>
<dd>
<blockquote>
<div class="df-fragment df-cktext-default">
Chú ý:
<strong>org.hibernate.dialect.Oracle10gDialect</strong> được sử dụng cho cả Oracle 10g, 11g, 12c.
</div>
</blockquote>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<h3>Dialect là gì?</h3>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<strong>Dialect</strong> là một class, nó nói với Hibernate cách chuyển các kiểu dữ liệu của Database thành các kiểu dữ liệu của Java, và ngược lại. Đồng thời nó cũng được sử dụng để định nghĩa cách chuyển đổi giữa các hàm của HSQL (Hibernate SQL) thành các hàm của Database tương ứng.
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<table border="1" cellpadding="5" cellspacing="1" style="width:100%">
<tbody>
<tr>
<td><strong>Java SQL Type</strong></td>
<td><strong>Oracle</strong></td>
<td><strong>My SQL</strong></td>
<td><strong>SQL Server</strong></td>
</tr>
<tr>
<td>Types.BIT</td>
<td>number(1,0)</td>
<td>bit</td>
<td>bit</td>
</tr>
<tr>
<td>Types.BIGINT</td>
<td>number(19,0)</td>
<td>bigint</td>
<td>bigint</td>
</tr>
<tr>
<td>Types.DATE</td>
<td>date</td>
<td>date</td>
<td>date</td>
</tr>
<tr>
<td>&nbsp;.......</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>Types.CLOB</td>
<td>clob</td>
<td>longtext</td>
<td>varchar(MAX)</td>
</tr>
<tr>
<td>Types.BLOB</td>
<td>blob</td>
<td>longblob</td>
<td>varbinary(MAX)</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77482"></a>6- SessionFactory </h2>
<div class="ct-place-holder" id="ct-place-holder-77482"></div>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
HibernateUtils.java
</div>
<div><div id="highlighter_514294" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.boot.Metadata;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.boot.MetadataSources;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.boot.registry.StandardServiceRegistryBuilder;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.service.ServiceRegistry;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">HibernateUtils {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">SessionFactory sessionFactory = buildSessionFactory();</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java comments">// Hibernate 5:</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">SessionFactory buildSessionFactory() {</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo đối tượng ServiceRegistry từ hibernate.cfg.xml</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ServiceRegistry serviceRegistry = </code><code class="java keyword">new</code> <code class="java plain">StandardServiceRegistryBuilder()</code><code class="java comments">//</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.configure(</code><code class="java string">"hibernate.cfg.xml"</code><code class="java plain">).build();</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo nguồn siêu dữ liệu (metadata) từ ServiceRegistry</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Metadata metadata = </code><code class="java keyword">new</code> <code class="java plain">MetadataSources(serviceRegistry).getMetadataBuilder().build();</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">metadata.getSessionFactoryBuilder().build();</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Throwable ex) {</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.err.println(</code><code class="java string">"Initial SessionFactory creation failed."</code> <code class="java plain">+ ex);</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throw</code> <code class="java keyword">new</code> <code class="java plain">ExceptionInInitializerError(ex);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">SessionFactory getSessionFactory() {</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">sessionFactory;</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">shutdown() {</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Giải phóng cache và Connection Pools.</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">getSessionFactory().close();</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77457"></a>7- Hibernate Query Language (HQL) </h2>
<div class="ct-place-holder" id="ct-place-holder-77457"></div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Hibernate sử dụng ngôn ngữ
<strong>Hibernate Query Language</strong> (
<strong>HQL</strong>) để query dữ liệu.
<strong>HQL </strong>có một chút khác biệt với
<strong>SQL</strong> mà bạn đã biết.
<br>
<br>
<strong>SQL</strong>:
<ul>
<li>Query dữ liệu trên các bảng.</li>
</ul>
 <strong>HQL</strong>:
<ul>
<li>Query dữ liệu trên các class Entity.</li>
</ul>
</div>
</dd>
<dd>
<div class="df-fragment df-text-sql">
<div><div id="highlighter_302025" class="syntaxhighlighter  sql"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql comments">-- SQL</code></div><div class="line number2 index1 alt1"><code class="sql comments">-- Đây là một câu lệnh SQL query dữ liệu trên bảng DEPARTMENT.</code></div><div class="line number3 index2 alt2"><code class="sql keyword">Select</code> <code class="sql plain">d.DEPT_NO, d.DEPT_NAME </code><code class="sql keyword">from</code> <code class="sql plain">DEPARTMENT d;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql comments">-- HQL</code></div><div class="line number6 index5 alt1"><code class="sql comments">-- Đây là một câu lệnh HQL query dữ liệu trên Entity Department.</code></div><div class="line number7 index6 alt2"><code class="sql keyword">Select</code> <code class="sql plain">d.deptNo, d.deptName </code><code class="sql keyword">from</code> <code class="sql plain">Department d;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="sql comments">-- Query Object</code></div><div class="line number10 index9 alt1"><code class="sql keyword">Select</code> <code class="sql plain">d </code><code class="sql keyword">from</code> <code class="sql plain">Department d;</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<h3>Nguyên tắc hoạt động của Hibernate:</h3>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Ứng dụng của bạn viết các câu lệnh
<strong>HQL </strong>trong thời gian chạy Hibernate tự biết nó đang làm việc với loại Database nào, nó sẽ tự chuyển đổi các câu lệnh
<strong>HQL </strong>sang
<strong>SQL </strong>tương ứng với loại DB đó. Thực tế chúng ta biết rằng cú pháp
<strong>SQL </strong>có sự khác nhau đôi chút giữa các loại
<strong>Database </strong>khác nhau. Và kiểu dữ liệu cũng vậy.
</div>
</dd>
<dd>
<blockquote>
<div class="df-fragment df-cktext-default">
Bạn có thể tham khảo thêm về cú pháp HQL tại:
<p>&nbsp;</p>
</div>
<div class="df-fragment df-cktext-default">
<ul>
<li><a href="http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/queryhql.html">http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/queryhql.html</a></li>
</ul>
</div>
</blockquote>
</dd>
<dt class="content-toc">
<h2><a name="a77396"></a>8- Query dữ liệu với Hibernate </h2>
<div class="ct-place-holder" id="ct-place-holder-77396">
<span id="ezoic-pub-ad-placeholder-123"></span>
</div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Có nhiều cách để lấy dữ liệu với Hibernate. Trong phần này tôi sẽ giới thiệu một vài cách lấy dữ liệu thông dụng.
</div>
</dd>
<dd>
<dl>
<dt class="content-toc">
<h3>8.1- Query Object sử dụng HQL <a name="a77422"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Ví dụ đầu tiên, sử dụng HQL query các đối tượng Entity:
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
QueryObjectDemo.java
</div>
<div><div id="highlighter_944751" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.query;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.List;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">QueryObjectDemo {</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tất cả các lệnh hành động với DB thông qua Hibernate</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// đều phải nằm trong 1 giao dịch (Transaction)</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Bắt đầu giao dịch</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một câu lệnh HQL query object.</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tương đương với Native SQL:</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Select e.* from EMPLOYEE e order by e.EMP_NAME, e.EMP_NO</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select e from "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" order by e.empName, e.empNo "</code><code class="java plain">;</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo đối tượng Query.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Employee&gt; query = session.createQuery(sql);</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực hiện truy vấn.</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">List&lt;Employee&gt; employees = query.getResultList();</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(Employee emp : employees) {</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp: "</code> <code class="java plain">+ emp.getEmpNo() + </code><code class="java string">" : "</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getEmpName());</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Commit dữ liệu</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Rollback trong trường hợp có lỗi xẩy ra.</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number51 index50 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77608.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<h3>Demo2:</h3>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
QueryObjectDemo2.java
</div>
<div><div id="highlighter_257384" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.query;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.List;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">QueryObjectDemo2 {</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tất cả các lệnh hành động với DB thông qua Hibernate</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// đều phải nằm trong 1 giao dịch (Transaction)</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Bắt đầu giao dịch</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một câu lệnh HQL query object.</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// HQL Có tham số.</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tương đương với Native SQL:</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Select e.* from EMPLOYEE e cross join DEPARTMENT d</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// where e.DEPT_ID = d.DEPT_ID and d.DEPT_NO = :deptNo;</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select e from "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" where e.department.deptNo=:deptNo "</code><code class="java plain">;</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo đối tượng Query.</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Employee&gt; query = session.createQuery(sql);</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"deptNo"</code><code class="java plain">, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực hiện truy vấn.</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">List&lt;Employee&gt; employees = query.getResultList();</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(Employee emp : employees) {</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp: "</code> <code class="java plain">+ emp.getEmpNo() + </code><code class="java string">" : "</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getEmpName());</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Commit dữ liệu</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Rollback trong trường hợp có lỗi xẩy ra.</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number54 index53 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dt class="content-toc">
<h3>8.2- Query lấy dữ liệu một vài cột sử dụng HQL <a name="a77472"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
QuerySomeColumnDemo.java
</div>
<div><div id="highlighter_843639" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.query;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.List;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">QuerySomeColumnDemo {</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Query một vài cột.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Việc lấy dữ liệu trong trường hợp này sẽ phức tạp hơn.</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select e.empId, e.empNo, e.empName from "</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code><code class="java plain">;</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Object[]&gt; query = session.createQuery(sql);</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực hiện truy vấn.</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lấy ra danh sách các đối tượng Object[]</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">List&lt;Object[]&gt; datas = query.getResultList();</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(Object[] emp : datas) {</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp Id: "</code> <code class="java plain">+ emp[</code><code class="java value">0</code><code class="java plain">]);</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" Emp No: "</code> <code class="java plain">+ emp[</code><code class="java value">1</code><code class="java plain">]);</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" Emp Name: "</code> <code class="java plain">+ emp[</code><code class="java value">2</code><code class="java plain">]);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Commit dữ liệu</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Rollback trong trường hợp có lỗi xẩy ra.</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number50 index49 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77604.png">
</div>
</dd>
<dt class="content-toc">
<h3>8.3- Query lấy dữ liệu một vài cột sử dụng HQL &amp; JavaBean <a name="a77394"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Trong trường hợp bạn cần lấy dữ liệu một số cột trên một số bảng, cách tốt nhất là sử dụng Java beans. Class Java bean sẽ có một cấu tử để khởi tạo các giá trị các trường của nó. Cấu tử này tham gia vào câu truy vấn HQL.
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
ShortEmpInfo.java
</div>
<div><div id="highlighter_361605" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.beans;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ShortEmpInfo {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Long empId;</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String empNo;</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String empName;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;</code><code class="java comments">// Cấu tử có 3 tham số, sẽ được sử dụng trong Hibernate Query.</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">ShortEmpInfo(Long empId, String empNo, String empName) {</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empId = empId;</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empNo = empNo;</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empName = empName;</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Long getEmpId() {</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empId;</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpId(Long empId) {</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empId = empId;</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String getEmpNo() {</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empNo;</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpNo(String empNo) {</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empNo = empNo;</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String getEmpName() {</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">empName;</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmpName(String empName) {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.empName = empName;</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
ShortEmpInfoQueryDemo.java
</div>
<div><div id="highlighter_836278" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.query;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.List;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.beans.ShortEmpInfo;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ShortEmpInfoQueryDemo {</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng cấu tử của Class ShortEmpInfo</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select new "</code> <code class="java plain">+ ShortEmpInfo.</code><code class="java keyword">class</code><code class="java plain">.getName()</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">"(e.empId, e.empNo, e.empName)"</code> <code class="java plain">+ </code><code class="java string">" from "</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code><code class="java plain">;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;ShortEmpInfo&gt; query = session.createQuery(sql);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực hiện truy vấn.</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lấy ra danh sách các đối tượng ShortEmpInfo</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">List&lt;ShortEmpInfo&gt; employees = query.getResultList();</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(ShortEmpInfo emp : employees) {</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp: "</code> <code class="java plain">+ emp.getEmpNo() + </code><code class="java string">" : "</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getEmpName());</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Commit data.</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Rollback trong trường hợp có lỗi xẩy ra.</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number48 index47 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dt class="content-toc">
<h3>8.4- Query Lấy dữ liệu duy nhất <a name="a77590"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
UniqueResultDemo.java
</div>
<div><div id="highlighter_501834" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.query;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Set;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Department;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">UniqueResultDemo {</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">Department getDepartment(Session session, String deptNo) {</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select d from "</code> <code class="java plain">+ Department.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" d "</code><code class="java comments">//</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" where d.deptNo= :deptNo "</code><code class="java plain">;</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Department&gt; query = session.createQuery(sql);</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"deptNo"</code><code class="java plain">, deptNo);</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">(Department) query.getSingleResult();</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">Employee getEmployee(Session session, Long empId) {</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select e from "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code><code class="java comments">//</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" where e.empId= :empId "</code><code class="java plain">;</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Employee&gt; query = session.createQuery(sql);</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"empId"</code><code class="java plain">, empId);</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">(Employee) query.getSingleResult();</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Department dept = getDepartment(session, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Set&lt;Employee&gt; emps = dept.getEmployees();</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Dept Name: "</code> <code class="java plain">+ dept.getDeptName());</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(Employee emp : emps) {</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" Emp name: "</code> <code class="java plain">+ emp.getEmpName());</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = getEmployee(session, 7839L);</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp Name: "</code> <code class="java plain">+ emp.getEmpName());</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number56 index55 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
</dl>
</dd>
<dt class="content-toc">
<h2><a name="a77440"></a>9- Đối tượng Transient, Persistent và Detached là gì? </h2>
<div class="ct-place-holder" id="ct-place-holder-77440"></div>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
DataUtils.java
</div>
<div><div id="highlighter_975926" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.query.Query;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Department;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">DataUtils {</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">Department findDepartment(Session session, String deptNo) {</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select d from "</code> <code class="java plain">+ Department.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" d "</code><code class="java comments">//</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" Where d.deptNo = :deptNo"</code><code class="java plain">;</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Department&gt; query = session.createQuery(sql);</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"deptNo"</code><code class="java plain">, deptNo);</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">query.getSingleResult();</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">Long getMaxEmpId(Session session) {</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select max(e.empId) from "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code><code class="java plain">;</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Number&gt; query = session.createQuery(sql);</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Number value = query.getSingleResult();</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(value == </code><code class="java keyword">null</code><code class="java plain">) {</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">0L;</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">value.longValue();</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">Employee findEmployee(Session session, String empNo) {</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Select e from "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code><code class="java comments">//</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" Where e.empNo = :empNo"</code><code class="java plain">;</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query&lt;Employee&gt; query = session.createQuery(sql);</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"empNo"</code><code class="java plain">, empNo);</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">query.getSingleResult();</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Đây là ví dụ đơn giản sử dụng
<strong>Session.persist(Object)</strong> để insert một đối tượng
<em><strong>Transient </strong></em>vào
<strong>DB</strong>.
<br> Khái niệm đối tượng
<em><strong>Transitent</strong></em>,
<em><strong>Persistent</strong></em>,
<em><strong>Detached </strong></em>sẽ được giải thích trong ví dụ này.
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
PersistDemo.java
</div>
<div><div id="highlighter_711577" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Department;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PersistDemo {</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Department department = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long maxEmpId = DataUtils.getMaxEmpId(session);</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long empId = maxEmpId + </code><code class="java value">1</code><code class="java plain">;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Phòng ban với mã số D10.</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó là đối tượng chịu sự quản lý của session</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Và được gọi là đối tượng persistent.</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">department = DataUtils.findDepartment(session, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo mới đối tượng Employee</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đối tượng này chưa chịu sự quản lý của session.</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó được coi là đối tượng Transient.</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = </code><code class="java keyword">new</code> <code class="java plain">Employee();</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpId(empId);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpNo(</code><code class="java string">"E"</code> <code class="java plain">+ empId);</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpName(</code><code class="java string">"Name "</code> <code class="java plain">+ empId);</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setJob(</code><code class="java string">"Coder"</code><code class="java plain">);</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(1000f);</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setManager(</code><code class="java keyword">null</code><code class="java plain">);</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setHideDate(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setDepartment(department);</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng persist(..)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'emp' đã chịu sự quản lý của session.</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nó có trạng thái persistent.</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chưa có hành động gì với DB tại đây.</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.persist(emp);</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tại bước này dữ liệu mới được đẩy xuống DB.</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Câu lệnh Insert được tạo ra.</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sau khi session bị đóng lại (commit, rollback, close)</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đối tượng 'emp', 'dept' trở thành đối tượng Detached.</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó không còn trong sự quản lý của session nữa.</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp No: "</code> <code class="java plain">+ emp.getEmpNo());</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number71 index70 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77492.png">
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77390"></a>10- Vòng đời của Hibernate (Hibernate Lifecycle) </h2>
<div class="ct-place-holder" id="ct-place-holder-77390"></div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Class
<strong>Session</strong> của
<strong>Hibernate </strong>có một số các method quan trọng. Chúng được chia ra các nhóm như hình minh họa dưới đây.
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77388.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Một đối tượng trong
<strong>Hibernate </strong>có 1 trong 4 trạng thái:
<ul>
<li><strong>Transient</strong>&nbsp;&nbsp;&nbsp; (Tạm thời)</li>
<li><strong>Persistent</strong>&nbsp;&nbsp; (Bền vững)</li>
<li><strong>Removed</strong>&nbsp;&nbsp;&nbsp;&nbsp; (Đã bị xóa - dưới DB)</li>
<li><strong>Detached</strong>&nbsp;&nbsp;&nbsp; (Đã bị tách riêng ra - so với session hiện tại)</li>
</ul> Chúng ta giải thích chúng bằng hình minh họa dưới đây:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77398.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
<ol>
<li>Trường hợp bạn tạo mới một đối tượng java từ một Entity, đối tượng đó có tình trạng là <em><strong>Transient</strong></em>. Hibernate không biết về sự tồn tại của nó. Nó nằm ngoài sự quản lý của Hibernate.</li>
<li>Trường hợp bạn lấy ra đối tượng Entity bằng method get, load hoặc find, bạn có được một đối tượng nó tương ứng với 1 record dưới database. Đối tượng này có trạng thái <em><strong>Persistent</strong></em>. Nó được quản lý bởi Hibernate.</li>
<li>Session gọi một trong các method save,saveOrUpdate, persist, merge sẽ đẩy đối tượng <em><strong>Transient </strong></em>vào sự quản lý của Hibernate và đối tượng này chuyển sang trạng thái <em><strong>Persistent</strong></em>. Tùy tình huống nó sẽ insert hoặc update dữ liệu vào DB.</li>
<li>Session gọi evict(..) hoặc clear() để đuổi các đối tượng có trạng thái persistent (bền vững) ra khỏi sự quản lý của Hibernate, giờ các đối tượng này sẽ có trạng thái mới là Detected (Bị tách ra).&nbsp; Nếu nó không được đính (Attached) trở lại, nó sẽ bị bộ gom rác của Java quét đi theo cơ chế thông thường.</li>
<li>Sử dụng update(..), saveOrUpdate(..), merge(..) sẽ đính trở lại các đối tượng Detached vào lại. Tùy tình huống nó sẽ tạo ra dưới DB câu lệnh update hoặc insert. Các đối tượng sẽ trở về trạng thái Persistent (bền vững).</li>
<li>Session gọi method remove(..), delete(..) để xóa một bản ghi, đối tượng persistent giờ chuyển sang trạng thái Removed (Đã bị xóa).</li>
</ol>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77372"></a>11- Thao tác Insert,Update, Delete với Hibernate </h2>
<div class="ct-place-holder" id="ct-place-holder-77372"></div>
</dt>
<dd>
<dl>
<dt class="content-toc">
<h3>11.1- Persistent <a name="a77452"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77632.png">
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
PersistentDemo.java
</div>
<div><div id="highlighter_735394" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Department;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PersistentDemo {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Department department = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Finding Department deptNo = D10..."</code><code class="java plain">);</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đây là một đối tượng có trạng thái Persistent.</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">department = DataUtils.findDepartment(session, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- First change Location"</code><code class="java plain">);</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thay đổi gì đó trên đối tượng Persistent.</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">department.setLocation(</code><code class="java string">"Chicago "</code> <code class="java plain">+ System.currentTimeMillis());</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Location = "</code> <code class="java plain">+ department.getLocation());</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Calling flush..."</code><code class="java plain">);</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng session.flush() để chủ động đẩy các thay đổi xuống DB.</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Có tác dụng trên tất cả các đối tượng Persistent có thay đổi.</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.flush();</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Flush OK"</code><code class="java plain">);</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Second change Location"</code><code class="java plain">);</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thay đổi gì đó trên đối tượng Persistent.</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hình thành câu lệnh update, sẽ được thực thi</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// sau khi session đóng lại (commit).</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">department.setLocation(</code><code class="java string">"Chicago "</code> <code class="java plain">+ System.currentTimeMillis());</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// In ra Location.</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Location = "</code> <code class="java plain">+ department.getLocation());</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Calling commit..."</code><code class="java plain">);</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lệnh commit sẽ làm tất cả những sự thay đổi được đẩy xuống DB.</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Commit OK"</code><code class="java plain">);</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo lại session sau khi nó đã bị đóng trước đó</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// (Do commit hoặc rollback)</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session = factory.getCurrentSession();</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number67 index66 alt2">&nbsp;</div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Finding Department deptNo = D10..."</code><code class="java plain">);</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Query lại Department D10.</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">department = DataUtils.findDepartment(session, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// In ra thông tin Location.</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- D10 Location = "</code> <code class="java plain">+ department.getLocation());</code></div><div class="line number77 index76 alt2">&nbsp;</div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number85 index84 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77566.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.2- Transient --&gt; Persistent : Tổng quan <a name="a77638"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77636.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.3- Transient --&gt; Persistent : Sử dụng persist(Object) <a name="a77404"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
PersistTransientDemo.java
</div>
<div><div id="highlighter_107394" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.text.DateFormat;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.text.SimpleDateFormat;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Timekeeper;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PersistTransientDemo {</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">DateFormat df = </code><code class="java keyword">new</code> <code class="java plain">SimpleDateFormat(</code><code class="java string">"dd-MM-yyyy HH:mm:ss"</code><code class="java plain">);</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Timekeeper persist_Transient(Session session, Employee emp) {</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hãy chú ý:</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// timekeeperId cấu hình tự động được tạo ra bởi UUID.</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GeneratedValue(generator = "uuid")</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GenericGenerator(name = "uuid", strategy = "uuid2")</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một đối tượng, nó đang có tình trạng Transient.</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Timekeeper tk1 = </code><code class="java keyword">new</code> <code class="java plain">Timekeeper();</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk1.setEmployee(emp);</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk1.setInOut(Timekeeper.IN);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk1.setDateTime(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Now, 'tk1' is transient object</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk1 Persistent? "</code> <code class="java plain">+ session.contains(tk1));</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"====== CALL persist(tk).... ==========="</code><code class="java plain">);</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hibernate gán Id vào 'tk1', sẽ chưa có insert gì cả</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.persist(tk1);</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 'tk1' đã được gắn ID</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">"- tk1.getTimekeeperId() = "</code> <code class="java plain">+ tk1.getTimekeeperId());</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk1' đã có trạng thái Persistent</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó đã được quản lý trong Session.</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nhưng chưa có hành động gì insert xuống DB.</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk1 Persistent? "</code> <code class="java plain">+ session.contains(tk1));</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Call flush.."</code><code class="java plain">);</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB, gọi flush().</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu không gọi flush() dữ liệu sẽ được đẩy xuống tại lệnh commit().</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này mới có insert.</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.flush();</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String timekeeperId = tk1.getTimekeeperId();</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- timekeeperId = "</code> <code class="java plain">+ timekeeperId);</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- inOut = "</code> <code class="java plain">+ tk1.getInOut());</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- dateTime = "</code> <code class="java plain">+ df.format(tk1.getDateTime()));</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println();</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">tk1;</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number74 index73 alt1">&nbsp;</div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number76 index75 alt1">&nbsp;</div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">persist_Transient(session, emp);</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number86 index85 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77448.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.4- Transient --&gt; Persistent : Sử dụng save(Object) * <a name="a77386"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
SaveTransientDemo.java
</div>
<div><div id="highlighter_877145" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.Serializable;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.text.DateFormat;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.text.SimpleDateFormat;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Timekeeper;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">SaveTransientDemo {</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">DateFormat df = </code><code class="java keyword">new</code> <code class="java plain">SimpleDateFormat(</code><code class="java string">"dd-MM-yyyy HH:mm:ss"</code><code class="java plain">);</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Timekeeper persist_Transient(Session session, Employee emp) {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hãy chú ý:</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// timekeeperId cấu hình tự động được tạo ra bởi UUID.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GeneratedValue(generator = "uuid")</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GenericGenerator(name = "uuid", strategy = "uuid2")</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một đối tượng, nó đang có tình trạng Transient.</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Timekeeper tk2 = </code><code class="java keyword">new</code> <code class="java plain">Timekeeper();</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk2.setEmployee(emp);</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk2.setInOut(Timekeeper.IN);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk2.setDateTime(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk2' đang có tình trạng Transient.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk2 Persistent? "</code> <code class="java plain">+ session.contains(tk2));</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"====== CALL save(tk).... ==========="</code><code class="java plain">);</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// save() rất giống với persist()</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// save() trả về ID còn persist() là void.</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hibernate gán Id vào 'tk2', sẽ chưa có insert gì cả</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó trả về ID của 'tk2'.</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Serializable id = session.save(tk2);</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- id = "</code> <code class="java plain">+ id);</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 'tk2' đã được gắn ID</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">"- tk2.getTimekeeperId() = "</code> <code class="java plain">+ tk2.getTimekeeperId());</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk2' đã có trạng thái Persistent</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó đã được quản lý trong Session.</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nhưng chưa có hành động gì insert xuống DB.</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk2 Persistent? "</code> <code class="java plain">+ session.contains(tk2));</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Call flush.."</code><code class="java plain">);</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB, gọi flush().</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu không gọi flush() dữ liệu sẽ được đẩy xuống tại lệnh commit().</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này mới có insert.</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.flush();</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String timekeeperId = tk2.getTimekeeperId();</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- timekeeperId = "</code> <code class="java plain">+ timekeeperId);</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- inOut = "</code> <code class="java plain">+ tk2.getInOut());</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- dateTime = "</code> <code class="java plain">+ df.format(tk2.getDateTime()));</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println();</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">tk2;</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number74 index73 alt1">&nbsp;</div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number76 index75 alt1">&nbsp;</div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">persist_Transient(session, emp);</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number85 index84 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77540.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.5- Transient --&gt; Persistent : Sử dụng saveOrUpdate(Object) <a name="a77382"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
SaveOrUpdateTransientDemo.java
</div>
<div><div id="highlighter_828865" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.text.DateFormat;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.text.SimpleDateFormat;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Timekeeper;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">SaveOrUpdateTransientDemo {</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">DateFormat df = </code><code class="java keyword">new</code> <code class="java plain">SimpleDateFormat(</code><code class="java string">"dd-MM-yyyy HH:mm:ss"</code><code class="java plain">);</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Timekeeper saveOrUpdate_Transient(Session session,</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp) {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hãy chú ý:</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// timekeeperId cấu hình tự động được tạo ra bởi UUID.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GeneratedValue(generator = "uuid")</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GenericGenerator(name = "uuid", strategy = "uuid2")</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một đối tượng, nó đang có tình trạng Transient.</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Timekeeper tk3 = </code><code class="java keyword">new</code> <code class="java plain">Timekeeper();</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk3.setEmployee(emp);</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk3.setInOut(Timekeeper.IN);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk3.setDateTime(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk3' đang có tình trạng Transient.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk3 Persistent? "</code> <code class="java plain">+ session.contains(tk3));</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"====== CALL saveOrUpdate(tk).... ==========="</code><code class="java plain">);</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tại đây Hibernate sẽ kiểm tra, tk3 có ID chưa (timekeeperId)</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu chưa có nó tự gán ID vào.</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.saveOrUpdate(tk3);</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">"- tk3.getTimekeeperId() = "</code> <code class="java plain">+ tk3.getTimekeeperId());</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk3' đã có trạng thái Persistent</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó đã được quản lý trong Session.</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nhưng chưa có hành động gì insert, hoặc update xuống DB.</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk3 Persistent? "</code> <code class="java plain">+ session.contains(tk3));</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Call flush.."</code><code class="java plain">);</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB, gọi flush().</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu không gọi flush() dữ liệu sẽ được đẩy xuống tại lệnh commit().</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này có thể có Insert hoặc Update xuống DB. (!!!)</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tùy thuộc vào ID của 'tk3' có trên DB chưa.</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.flush();</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String timekeeperId = tk3.getTimekeeperId();</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- timekeeperId = "</code> <code class="java plain">+ timekeeperId);</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- inOut = "</code> <code class="java plain">+ tk3.getInOut());</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- dateTime = "</code> <code class="java plain">+ df.format(tk3.getDateTime()));</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println();</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">tk3;</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number63 index62 alt2">&nbsp;</div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number71 index70 alt2">&nbsp;</div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">saveOrUpdate_Transient(session, emp);</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number82 index81 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77380.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.6- Transient --&gt; Persistent : Sử dụng merge(Object) <a name="a77370"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
MergeTransientDemo.java
</div>
<div><div id="highlighter_933301" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.text.DateFormat;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.text.SimpleDateFormat;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Timekeeper;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MergeTransientDemo {</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">DateFormat df = </code><code class="java keyword">new</code> <code class="java plain">SimpleDateFormat(</code><code class="java string">"dd-MM-yyyy HH:mm:ss"</code><code class="java plain">);</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Timekeeper saveOrUpdate_Transient(Session session,</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp) {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hãy chú ý:</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// timekeeperId cấu hình tự động được tạo ra bởi UUID.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GeneratedValue(generator = "uuid")</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// @GenericGenerator(name = "uuid", strategy = "uuid2")</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tạo một đối tượng, nó đang có tình trạng Transient.</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Timekeeper tk4 = </code><code class="java keyword">new</code> <code class="java plain">Timekeeper();</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk4.setEmployee(emp);</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk4.setInOut(Timekeeper.IN);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tk4.setDateTime(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk4' đang có tình trạng Transient.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk4 Persistent? "</code> <code class="java plain">+ session.contains(tk4));</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"====== CALL merge(tk).... ==========="</code><code class="java plain">);</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hibernate2 có method copyOrUpdateCopy</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// phiên bản 3 trở nó đổi tên thành merge.</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// (Vì vậy sẽ có sự tương đồng).</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tại đây Hibernate sẽ kiểm tra, tk4 có ID (timekeeperId) chưa</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu chưa có nó tự gán ID vào.</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sau đó tạo ra một bản copy và trả về.</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Timekeeper tk4Copy = (Timekeeper) session.merge(tk4);</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">"- tk4.getTimekeeperId() = "</code> <code class="java plain">+ tk4.getTimekeeperId());</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chú ý:</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'tk4' vẫn có trạng thái Transient.</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// còn 'tk4Copy' thì có trạng thái Persistent.</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nhưng chưa có hành động gì insert, hoặc update xuống DB.</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk4 Persistent? "</code> <code class="java plain">+ session.contains(tk4));</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 'tk4Copy' có trạng thái Persistent.</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">"- tk4Copy Persistent? "</code> <code class="java plain">+ session.contains(tk4Copy));</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- Call flush.."</code><code class="java plain">);</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB, gọi flush().</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu không gọi flush() dữ liệu sẽ được đẩy xuống tại lệnh commit().</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này có thể có Insert hoặc Update xuống DB. (!!!)</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tùy thuộc vào ID của 'tk4' có trên DB chưa.</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.flush();</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 'tk4' vẫn là Transient, sau khi flush().</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nhận xét: merge(..) an toàn hơn so với saveOrUpdate().</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- tk4 Persistent? "</code> <code class="java plain">+ session.contains(tk4));</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String timekeeperId = tk4.getTimekeeperId();</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- timekeeperId = "</code> <code class="java plain">+ timekeeperId);</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- inOut = "</code> <code class="java plain">+ tk4.getInOut());</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- dateTime = "</code> <code class="java plain">+ df.format(tk4.getDateTime()));</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println();</code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">tk4;</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number81 index80 alt2">&nbsp;</div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number86 index85 alt1">&nbsp;</div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number88 index87 alt1">&nbsp;</div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">saveOrUpdate_Transient(session, emp);</code></div><div class="line number90 index89 alt1">&nbsp;</div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number93 index92 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number95 index94 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number97 index96 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77486.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.7- Persistent --&gt; Detached <a name="a77408"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Một đối tượng đang có tình trạng Persistent (Được quản lý bởi Hibernate) có thể chuyển sang trạng thái Detached (Tách ra, không được Hibernate quản lý)&nbsp; thông qua method của
<strong>Session</strong>:
<ul>
<li>evict(Object)
<ul>
<li>Đuổi cổ một đối tượng ra khỏi sự quản lý của Hibernate</li>
</ul> </li>
<li>clear()
<ul>
<li>Đuổi cổ tất các các đối tượng đang được quản lý bởi Hibernate ra.</li>
</ul> </li>
</ul> Tất nhiên khi một session gọi commit(), close() hoặc rollback() lúc đó session đã kết thúc. Tất cả các đối tượng Persistence của session này sẽ là Detached đối với một session mới được mở ra.
<br> &nbsp;
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77490.png">
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
EvictDemo.java
</div>
<div><div id="highlighter_13439" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">EvictDemo {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đây là một đối tượng có tình trạng Persistent.</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- emp Persistent? "</code> <code class="java plain">+ session.contains(emp));</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng evict(Object) để đuổi đối tượng Persistent</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ra khỏi quản lý của Hibernate.</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.evict(emp);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'emp' đang có trạng thái Detached.</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- emp Persistent? "</code> <code class="java plain">+ session.contains(emp));</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tất cả các thay đổi trên 'emp' sẽ không được update</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nếu không đưa 'emp' trở lại trạng thái Persistent.</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpNo(</code><code class="java string">"NEW"</code><code class="java plain">);</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number43 index42 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77406.png">
</div>
</dd>
<dd>
 <div class="df-fragment df-text-java">
<div class="df-file-name">
ClearDemo.java
</div>
<div><div id="highlighter_774800" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Department;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ClearDemo {</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session = factory.getCurrentSession();</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Department dept = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().begin();</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đây là một đối tượng có tình trạng Persistent.</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">dept = DataUtils.findDepartment(session, </code><code class="java string">"D10"</code><code class="java plain">);</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng clear để đuổi hết tất cả các đối tượng có</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// trạng thái Persistent ra khỏi sự quản lý của Hibernate.</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.clear();</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này 'emp' &amp; 'dept' đang có trạng thái Detached.</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- emp Persistent? "</code> <code class="java plain">+ session.contains(emp));</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- dept Persistent? "</code> <code class="java plain">+ session.contains(dept));</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tất cả các thay đổi trên 'emp' sẽ không được update</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nếu không đưa 'emp' trở lại trạng thái Persistent.</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpNo(</code><code class="java string">"NEW"</code><code class="java plain">);</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">dept = DataUtils.findDepartment(session, </code><code class="java string">"D20"</code><code class="java plain">);</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Dept Name = "</code><code class="java plain">+ dept.getDeptName());</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().commit();</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session.getTransaction().rollback();</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number46 index45 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77606.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.8- Detached --&gt; Persistent : Tổng quan <a name="a77428"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Một đối tượng có trạng thái Detached (Bị tách ra khỏi sự quản lý của Hibernate) có thể được Attach trở lại thông qua một vài method của Session:
<ul>
<li>update(Object)</li>
<li>saveOrUpdate(Object)</li>
<li>merge(Object)</li>
<li>refresh(Object)</li>
<li>lock(Object)</li>
</ul> Bạn có thể xem sự khác nhau của các method này theo các ví dụ dưới đây:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/77426.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.9- Detached --&gt; Persistent : Sử dụng update(Object) <a name="a100369"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
UpdateDetachedDemo.java
</div>
<div><div id="highlighter_222095" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">UpdateDetachedDemo {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session1 = factory.getCurrentSession();</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().begin();</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Đây là đối tượng có trạng thái Persistent.</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session1, </code><code class="java string">"E7499"</code><code class="java plain">);</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng lại sau commit được gọi.</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().commit();</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().rollback();</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Mở một Session khác</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session2 = factory.getCurrentSession();</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().begin();</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Kiểm tra trạng thái của emp:</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"- emp Persistent? "</code> <code class="java plain">+ session2.contains(emp));</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp salary: "</code> <code class="java plain">+ emp.getSalary());</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(emp.getSalary() + </code><code class="java value">100</code><code class="java plain">);</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// update(..) chỉ áp dụng cho đối tượng Detached.</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// (Không dùng được với đối tượng Transient).</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng update(emp) để đưa emp trở lại trạng thái Persistent.</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.update(emp);</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB.</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Câu lệnh update sẽ được gọi.</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.flush();</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Emp salary after update: "</code> <code class="java plain">+ emp.getSalary());</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session2 đã bị đóng lại sau commit được gọi.</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().commit();</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().rollback();</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number63 index62 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/100388.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.10- Detached --&gt; Persistent : Sử dụng saveOrUpdate(Object) <a name="a100393"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
SaveOrUpdateDetachedDemo.java
</div>
<div><div id="highlighter_516123" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div><div class="line number136 index135 alt1">136</div><div class="line number137 index136 alt2">137</div><div class="line number138 index137 alt1">138</div><div class="line number139 index138 alt2">139</div><div class="line number140 index139 alt1">140</div><div class="line number141 index140 alt2">141</div><div class="line number142 index141 alt1">142</div><div class="line number143 index142 alt2">143</div><div class="line number144 index143 alt1">144</div><div class="line number145 index144 alt2">145</div><div class="line number146 index145 alt1">146</div><div class="line number147 index146 alt2">147</div><div class="line number148 index147 alt1">148</div><div class="line number149 index148 alt2">149</div><div class="line number150 index149 alt1">150</div><div class="line number151 index150 alt2">151</div><div class="line number152 index151 alt1">152</div><div class="line number153 index152 alt2">153</div><div class="line number154 index153 alt1">154</div><div class="line number155 index154 alt2">155</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Random;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">SaveOrUpdateDetachedDemo {</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một đối tượng có trạng thái Detached.</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = getEmployee_Detached();</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - GET EMP "</code> <code class="java plain">+ emp.getEmpId());</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngẫu nhiên xóa hoặc không xóa Employee ứng với ID.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">boolean</code> <code class="java plain">delete = deleteOrNotDelete(emp.getEmpId());</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - DELETE? "</code> <code class="java plain">+ delete);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// saveOrUpdate đối tượng Detached.</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">saveOrUpdate_test(emp);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sau khi gọi saveOrUpdate().</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Có thể ID của Entity sẽ khác đi trong trường hợp</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// entity có ID tự tăng và saveOrUpdate tạo ra câu Insert.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - EMP ID "</code> <code class="java plain">+ emp.getEmpId());</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hàm trả về một đối tượng Employee đã</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nằm ngoài sự quản lý của Hibernate (Detached).</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Employee getEmployee_Detached() {</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session1 = factory.getCurrentSession();</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().begin();</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long maxEmpId = DataUtils.getMaxEmpId(session1);</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Max Emp ID "</code> <code class="java plain">+ maxEmpId);</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp2 = DataUtils.findEmployee(session1, </code><code class="java string">"E7839"</code><code class="java plain">);</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long empId = maxEmpId + </code><code class="java value">1</code><code class="java plain">;</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = </code><code class="java keyword">new</code> <code class="java plain">Employee();</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpId(empId);</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpNo(</code><code class="java string">"E"</code> <code class="java plain">+ empId);</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setDepartment(emp2.getDepartment());</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpName(emp2.getEmpName());</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setHideDate(emp2.getHideDate());</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setJob(</code><code class="java string">"Test"</code><code class="java plain">);</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(1000F);</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// emp đã được quản lý bởi Hibernate</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.persist(emp);</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng lại sau commit được gọi.</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một bản ghi Employee đã được insert vào DB.</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().commit();</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().rollback();</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng 'emp' đã trở về trạng thái Detached.</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">emp;</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Xóa Employee theo ID cho bởi tham số.</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngẫu nhiên xóa hoặc không xóa.</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">boolean</code> <code class="java plain">deleteOrNotDelete(Long empId) {</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một số ngẫu nhiên từ 0-9</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code> <code class="java plain">random = </code><code class="java keyword">new</code> <code class="java plain">Random().nextInt(</code><code class="java value">10</code><code class="java plain">);</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(random &lt; </code><code class="java value">5</code><code class="java plain">) {</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">false</code><code class="java plain">;</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number85 index84 alt2">&nbsp;</div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session2 = factory.getCurrentSession();</code></div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number88 index87 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().begin();</code></div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Delete "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code></div><div class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" where e.empId =:empId "</code><code class="java plain">;</code></div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query query = session2.createQuery(sql);</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"empId"</code><code class="java plain">, empId);</code></div><div class="line number93 index92 alt2">&nbsp;</div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.executeUpdate();</code></div><div class="line number95 index94 alt2">&nbsp;</div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().commit();</code></div><div class="line number97 index96 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">true</code><code class="java plain">;</code></div><div class="line number98 index97 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number99 index98 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number100 index99 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().rollback();</code></div><div class="line number101 index100 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">false</code><code class="java plain">;</code></div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number103 index102 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">saveOrUpdate_test(Employee emp) {</code></div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number107 index106 alt2">&nbsp;</div><div class="line number108 index107 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Mở một Session khác</code></div><div class="line number109 index108 alt2">&nbsp;</div><div class="line number110 index109 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session3 = factory.getCurrentSession();</code></div><div class="line number111 index110 alt2">&nbsp;</div><div class="line number112 index111 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number113 index112 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().begin();</code></div><div class="line number114 index113 alt1">&nbsp;</div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực tế emp đang có trạng thái Detached</code></div><div class="line number116 index115 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó không được quản lý bởi Hibernate.</code></div><div class="line number117 index116 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Kiểm tra trạng thái của emp:</code></div><div class="line number118 index117 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number119 index118 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - emp Persistent? "</code> <code class="java plain">+ session3.contains(emp));</code></div><div class="line number120 index119 alt1">&nbsp;</div><div class="line number121 index120 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Emp salary before update: "</code></div><div class="line number122 index121 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getSalary());</code></div><div class="line number123 index122 alt2">&nbsp;</div><div class="line number124 index123 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Set salary mới cho đối tượng Detached emp.</code></div><div class="line number125 index124 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Bạn cũng có thể sét ID mới nếu muốn.</code></div><div class="line number126 index125 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(emp.getSalary() + </code><code class="java value">100</code><code class="java plain">);</code></div><div class="line number127 index126 alt2">&nbsp;</div><div class="line number128 index127 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sử dụng saveOrUpdate(emp) để đưa emp</code></div><div class="line number129 index128 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// trở lại trạng thái Persistent.</code></div><div class="line number130 index129 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chú ý: Nếu có một đối tượng có cùng ID</code></div><div class="line number131 index130 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// đang được quản lý bởi Hibernate mà gọi hàm này sẽ bị Exception.</code></div><div class="line number132 index131 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//</code></div><div class="line number133 index132 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này vẫn chưa có sử lý gì liên quan DB.</code></div><div class="line number134 index133 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.saveOrUpdate(emp);</code></div><div class="line number135 index134 alt2">&nbsp;</div><div class="line number136 index135 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB.</code></div><div class="line number137 index136 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tại đây có thể có thể tạo ra câu Insert hoặc Update vào DB.</code></div><div class="line number138 index137 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu bản ghi tương ứng đã bị xóa bởi ai đó, câu lệnh Insert sẽ</code></div><div class="line number139 index138 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// được tạo ra.</code></div><div class="line number140 index139 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngược lại sẽ là một câu lệnh Update.</code></div><div class="line number141 index140 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.flush();</code></div><div class="line number142 index141 alt1">&nbsp;</div><div class="line number143 index142 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number144 index143 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">" - Emp salary after update: "</code> <code class="java plain">+ emp.getSalary());</code></div><div class="line number145 index144 alt2">&nbsp;</div><div class="line number146 index145 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session3 đã bị đóng lại sau commit được gọi.</code></div><div class="line number147 index146 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().commit();</code></div><div class="line number148 index147 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number149 index148 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number150 index149 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().rollback();</code></div><div class="line number151 index150 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number152 index151 alt1">&nbsp;</div><div class="line number153 index152 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number154 index153 alt1">&nbsp;</div><div class="line number155 index154 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Chạy ví dụ trên một vài lần, bạn có thể thấy 2 tình huống
<strong><em>saveOrUpdate </em></strong>tạo ra Insert hoặc Update vào DB.
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
INSERT:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/101833.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
UPDATE:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/101841.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.11- Detached --&gt; Persistent : Sử dụng merge(Object) <a name="a101848"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
<strong>Hibernate </strong>phiên bản 2 có method
<em><strong>saveOrUpdateCopy</strong></em>(Object), từ phiên bản 3 trở lên nó đổi tên thành
<em><strong>merge</strong></em>(Object). Chính vì vậy
<em><strong>merge </strong></em>có một chút tương đồng và một chút khác biệt so với
<em><strong>saveOrUpdate</strong></em>.
<br>
<br>
<em><strong>merge</strong></em>(Object) không đưa đối tượng vào sự quản lý của
<strong>Hibernate </strong>nhưng nó tạo ra một bản copy của đối tượng đó và quản lý đối tượng copy.
<br>
<br> Nếu bạn gọi
<em><strong>saveOrUpdate</strong></em>(aObject) trong khi đã có một đối tượng bObject đang được quản lý bởi
<strong>Hibernate </strong>và có cùng ID với aObject một ngoại lệ sẽ được ném ra. Trong khi sử dụng
<em><strong>merge</strong></em>(aObject) sẽ không bị ngoại lệ này.
</div>
</dd>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
MergeDetachedDemo.java
</div>
<div><div id="highlighter_163571" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div><div class="line number136 index135 alt1">136</div><div class="line number137 index136 alt2">137</div><div class="line number138 index137 alt1">138</div><div class="line number139 index138 alt2">139</div><div class="line number140 index139 alt1">140</div><div class="line number141 index140 alt2">141</div><div class="line number142 index141 alt1">142</div><div class="line number143 index142 alt2">143</div><div class="line number144 index143 alt1">144</div><div class="line number145 index144 alt2">145</div><div class="line number146 index145 alt1">146</div><div class="line number147 index146 alt2">147</div><div class="line number148 index147 alt1">148</div><div class="line number149 index148 alt2">149</div><div class="line number150 index149 alt1">150</div><div class="line number151 index150 alt2">151</div><div class="line number152 index151 alt1">152</div><div class="line number153 index152 alt2">153</div><div class="line number154 index153 alt1">154</div><div class="line number155 index154 alt2">155</div><div class="line number156 index155 alt1">156</div><div class="line number157 index156 alt2">157</div><div class="line number158 index157 alt1">158</div><div class="line number159 index158 alt2">159</div><div class="line number160 index159 alt1">160</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Random;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Query;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MergeDetachedDemo {</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một đối tượng có trạng thái Detached.</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = getEmployee_Detached();</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - GET EMP "</code> <code class="java plain">+ emp.getEmpId());</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngẫu nhiên xóa hoặc không xóa Employee ứng với ID.</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">boolean</code> <code class="java plain">delete = deleteOrNotDelete(emp.getEmpId());</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - DELETE? "</code> <code class="java plain">+ delete);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// saveOrUpdate đối tượng Detached.</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">saveOrUpdate_test(emp);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sau khi gọi saveOrUpdate().</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Có thể ID của Entity sẽ khác đi trong trường hợp</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// entity có ID tự tăng và saveOrUpdate tạo ra câu Insert.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - EMP ID "</code> <code class="java plain">+ emp.getEmpId());</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hàm trả về một đối tượng Employee đã</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nằm ngoài sự quản lý của Hibernate (Detached).</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Employee getEmployee_Detached() {</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session1 = factory.getCurrentSession();</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().begin();</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long maxEmpId = DataUtils.getMaxEmpId(session1);</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Max Emp ID "</code> <code class="java plain">+ maxEmpId);</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp2 = DataUtils.findEmployee(session1, </code><code class="java string">"E7839"</code><code class="java plain">);</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Long empId = maxEmpId + </code><code class="java value">1</code><code class="java plain">;</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = </code><code class="java keyword">new</code> <code class="java plain">Employee();</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpId(empId);</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpNo(</code><code class="java string">"E"</code> <code class="java plain">+ empId);</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setDepartment(emp2.getDepartment());</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setEmpName(emp2.getEmpName());</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setHideDate(emp2.getHideDate());</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setJob(</code><code class="java string">"Test"</code><code class="java plain">);</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(1000F);</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// emp đã được quản lý bởi Hibernate</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.persist(emp);</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng lại sau commit được gọi.</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một bản ghi Employee đã được insert vào DB.</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().commit();</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().rollback();</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng 'emp' đã trở về trạng thái Detached.</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">emp;</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Xóa Employee theo ID cho bởi tham số.</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngẫu nhiên xóa hoặc không xóa.</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">boolean</code> <code class="java plain">deleteOrNotDelete(Long empId) {</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một số ngẫu nhiên từ 0-9</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code> <code class="java plain">random = </code><code class="java keyword">new</code> <code class="java plain">Random().nextInt(</code><code class="java value">10</code><code class="java plain">);</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(random &lt; </code><code class="java value">5</code><code class="java plain">) {</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">false</code><code class="java plain">;</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number85 index84 alt2">&nbsp;</div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session2 = factory.getCurrentSession();</code></div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number88 index87 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().begin();</code></div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sql = </code><code class="java string">"Delete "</code> <code class="java plain">+ Employee.</code><code class="java keyword">class</code><code class="java plain">.getName() + </code><code class="java string">" e "</code></div><div class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ </code><code class="java string">" where e.empId =:empId "</code><code class="java plain">;</code></div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Query query = session2.createQuery(sql);</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.setParameter(</code><code class="java string">"empId"</code><code class="java plain">, empId);</code></div><div class="line number93 index92 alt2">&nbsp;</div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">query.executeUpdate();</code></div><div class="line number95 index94 alt2">&nbsp;</div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().commit();</code></div><div class="line number97 index96 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">true</code><code class="java plain">;</code></div><div class="line number98 index97 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number99 index98 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number100 index99 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().rollback();</code></div><div class="line number101 index100 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">false</code><code class="java plain">;</code></div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number103 index102 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">saveOrUpdate_test(Employee emp) {</code></div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number107 index106 alt2">&nbsp;</div><div class="line number108 index107 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Mở một Session khác</code></div><div class="line number109 index108 alt2">&nbsp;</div><div class="line number110 index109 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session3 = factory.getCurrentSession();</code></div><div class="line number111 index110 alt2">&nbsp;</div><div class="line number112 index111 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number113 index112 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().begin();</code></div><div class="line number114 index113 alt1">&nbsp;</div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực tế emp đang có trạng thái Detached</code></div><div class="line number116 index115 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó không được quản lý bởi Hibernate.</code></div><div class="line number117 index116 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Kiểm tra trạng thái của emp:</code></div><div class="line number118 index117 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number119 index118 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - emp Persistent? "</code> <code class="java plain">+ session3.contains(emp));</code></div><div class="line number120 index119 alt1">&nbsp;</div><div class="line number121 index120 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Emp salary before update: "</code></div><div class="line number122 index121 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getSalary());</code></div><div class="line number123 index122 alt2">&nbsp;</div><div class="line number124 index123 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Set salary mới cho đối tượng Detached emp.</code></div><div class="line number125 index124 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Bạn cũng có thể sét ID mới nếu muốn.</code></div><div class="line number126 index125 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(emp.getSalary() + </code><code class="java value">100</code><code class="java plain">);</code></div><div class="line number127 index126 alt2">&nbsp;</div><div class="line number128 index127 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// merge(emp) trả về empMerge, một bản copy của emp,</code></div><div class="line number129 index128 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// empMerge được quản lý bởi Hibernate.</code></div><div class="line number130 index129 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Còn emp vẫn trong tình trạng Detached</code></div><div class="line number131 index130 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//</code></div><div class="line number132 index131 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Lúc này vẫn chưa có sử lý gì liên quan DB.</code></div><div class="line number133 index132 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee empMerge = (Employee) session3.merge(emp);</code></div><div class="line number134 index133 alt1">&nbsp;</div><div class="line number135 index134 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number136 index135 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - emp Persistent? "</code> <code class="java plain">+ session3.contains(emp));</code></div><div class="line number137 index136 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number138 index137 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - empMerge Persistent? "</code></div><div class="line number139 index138 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ session3.contains(empMerge));</code></div><div class="line number140 index139 alt1">&nbsp;</div><div class="line number141 index140 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Chủ động đẩy dữ liệu xuống DB.</code></div><div class="line number142 index141 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Tại đây có thể có thể tạo ra câu Insert hoặc Update vào DB.</code></div><div class="line number143 index142 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nếu bản ghi tương ứng đã bị xóa bởi ai đó, câu lệnh Insert sẽ</code></div><div class="line number144 index143 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// được tạo ra.</code></div><div class="line number145 index144 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Ngược lại sẽ là một câu lệnh Update.</code></div><div class="line number146 index145 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.flush();</code></div><div class="line number147 index146 alt2">&nbsp;</div><div class="line number148 index147 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out</code></div><div class="line number149 index148 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.println(</code><code class="java string">" - Emp salary after update: "</code> <code class="java plain">+ emp.getSalary());</code></div><div class="line number150 index149 alt1">&nbsp;</div><div class="line number151 index150 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session3 đã bị đóng lại sau commit được gọi.</code></div><div class="line number152 index151 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().commit();</code></div><div class="line number153 index152 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number154 index153 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number155 index154 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session3.getTransaction().rollback();</code></div><div class="line number156 index155 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number157 index156 alt2">&nbsp;</div><div class="line number158 index157 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number159 index158 alt2">&nbsp;</div><div class="line number160 index159 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
INSERT:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/101889.png">
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
UPDATE:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/101896.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.12- Detached --&gt; Persistent : Sử dụng refresh(Object) <a name="a101946"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-text-java">
<div class="df-file-name">
RefreshDetachedDemo.java
</div>
<div><div id="highlighter_17921" class="syntaxhighlighter  java"><div class="toolbar"><span><a class="toolbar_item command_help help internal-page-anchor" data-href="#">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">org.o7planning.tutorial.hibernate.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">org.hibernate.Session;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.hibernate.SessionFactory;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.DataUtils;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.HibernateUtils;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">org.o7planning.tutorial.hibernate.entities.Employee;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">RefreshDetachedDemo {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) {</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một đối tượng có trạng thái Detached.</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = getEmployee_Detached();</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - GET EMP "</code> <code class="java plain">+ emp.getEmpId());</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// refresh đối tượng Detached.</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">refresh_test(emp);</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Hàm trả về một đối tượng Employee đã</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// nằm ngoài sự quản lý của Hibernate (Detached).</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">Employee getEmployee_Detached() {</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session1 = factory.getCurrentSession();</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Employee emp = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().begin();</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp = DataUtils.findEmployee(session1, </code><code class="java string">"E7839"</code><code class="java plain">);</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng lại sau commit được gọi.</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Một bản ghi Employee đã được insert vào DB.</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().commit();</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session1.getTransaction().rollback();</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// session1 đã bị đóng 'emp' đã trở về trạng thái Detached.</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">emp;</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">refresh_test(Employee emp) {</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">SessionFactory factory = HibernateUtils.getSessionFactory();</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Mở một Session khác</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Session session2 = factory.getCurrentSession();</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().begin();</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thực tế emp đang có trạng thái Detached</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Nó không được quản lý bởi Hibernate.</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Kiểm tra trạng thái của emp:</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; false</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - emp Persistent? "</code> <code class="java plain">+ session2.contains(emp));</code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Emp salary before update: "</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getSalary());</code></div><div class="line number63 index62 alt2">&nbsp;</div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Set salary mới cho đối tượng Detached emp.</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">emp.setSalary(emp.getSalary() + </code><code class="java value">100</code><code class="java plain">);</code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// refresh tạo ra câu query.</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Và đưa đối tượng Detached về Persistent.</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Các thay đổi của emp không được lưu lại.O</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.refresh(emp);</code></div><div class="line number71 index70 alt2">&nbsp;</div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ==&gt; true</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - emp Persistent? "</code> <code class="java plain">+ session2.contains(emp));</code></div><div class="line number74 index73 alt1">&nbsp;</div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">" - Emp salary after refresh: "</code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ emp.getSalary());</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().commit();</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">session2.getTransaction().rollback();</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number83 index82 alt2">&nbsp;</div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number85 index84 alt2">&nbsp;</div><div class="line number86 index85 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
</dd>
<dd>
<div class="df-fragment df-cktext-default">
Kết quả chạy ví dụ:
</div>
</dd>
<dd>
<div class="df-fragment df-binary-image">
<img alt="" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/101959.png">
</div>
</dd>
<dt class="content-toc">
<h3>11.13- Detached --&gt; Persistent : Sử dụng lock(Object) <a name="a101899"></a> </h3>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
<ul>
<li>TODO...</li>
</ul>
</div>
</dd>
</dl>
</dd>
<dt class="content-toc">
<h2><a name="a102752"></a>12- Tạo ra database từ các Entity </h2>
<div class="ct-place-holder" id="ct-place-holder-102752"></div>
</dt>
<dd>
<div class="df-fragment df-cktext-default">
Hibernate cho phép bạn tạo ra các bảng từ các Entity, với đầy đủ các giàng buộc giữa các bảng.
</div>
</dd>
<dd>
<div class="df-fragment df-none-entrypoint">
<ul>
<li><a target="_blank" href="https://o7planning.org/vi/11223/tao-ra-he-thong-bang-tu-cac-class-entity-trong-hibernate" class="target-blank-url">Tạo ra hệ thống Bảng từ các class Entity trong Hibernate</a></li>
</ul>
</div>
</dd>
<dt class="content-toc">
<h2><a name="a77508"></a>13- Tra cứu Hibernate </h2>
<div class="ct-place-holder" id="ct-place-holder-77508">
<span id="ezoic-pub-ad-placeholder-105"></span><span style="display:none;float:none !important;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:270px;min-width:300px;" class="ezoic-ad box-4 adtester-container adtester-container-105" data-ez-name="o7planning_org-box-4"><span id="div-gpt-ad-o7planning_org-box-4-0" ezaw="300" ezah="250" style="position:relative;z-index:0;display:none;" class="ezoic-ad"><div id="google_ads_iframe_/1254144/o7planning_org-box-4_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-box-4_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-box-4_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(5).html"></iframe></div></span></span><script>var ezzns3 = {1.90:504656,2.40:504659,2.60:504660,3.00:504664,4.50:504667,0.35:504552,1.00:504647,1.10:504648,0.50:504556,0.90:504560,2.00:504657,1.30:504650,1.40:504651,2.20:504658,5.00:504669,0.15:504144,0.20:504145,0.45:504555,0.05:504099,0.30:504551,0.80:504559,1.60:504653,1.80:504655,2.80:504661,0.25:504548,0.40:504554,1.20:504649,1.50:504652,4.00:504666,1.70:504654,3.50:504665,0.10:504141,0.60:504557,0.70:504558,};</script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/publishertag.js.download"></script>
<div class="ezflad-47" style="display:inline-block" adunitname="o7planning_org-box-4" id="crt-3">
<script type="text/javascript">
var ezoflbf_2_3 = function() { __ez.queue.addFunc('ReloadFromP_1105', 'IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.ReloadFromP', 1105, false, ['banger.js'], false, false, false, true); };
var ezoflbf_3 = function() { eval(ez_write_tag([[300,250],'o7planning_org-box-4','ezslot_5']));
		};</script><script type="text/javascript">ezoflbf_3();
</script></div>
<script type="text/javascript">
	var __ezfl_sss_1105 = function() {
		setTimeout(function(){
			var ezflaun = IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.GetNameFromPositionId(1105);
			if (typeof ezflaun != 'undefined' && ezflaun.length > 0) {
				if (typeof ez_ad_units != undefined) {
					for (i = 0; i < ez_ad_units.length; i++) {
						if (ezflaun.indexOf(ez_ad_units[i][1]) >= 0) {
							return false;
						}
					}
				}
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.StoreStatSource(ezflaun, 47, 14.00);
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.RemoveSlotById(ezflaun);
			}
		}, 8000);
	};
	__ez.queue.addFunc('__ezfl_sss_1105', '__ezfl_sss_1105', null, false, ['banger.js'], false, false, false, true);
</script>
</div>
</dt>
<dd>
<div class="df-fragment df-none-entrypoint">
<ul>
<li><a target="_blank" href="https://o7planning.org/vi/10225/tra-cuu-java-hibernate" class="target-blank-url">Tra cứu Java Hibernate</a></li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div style="clear:both;"></div>
<div class="ml-rcm" rc-type="job" rc-layout="bjobs" rc-li="3" rc-for="url" rc-title="Những việc làm hấp dẫn" token-site="WsmweDJRAMnCx1EntT8uk%2FoFc0HYK6OQoip4A1c5Yhb%2FwHoIMCFoyd574A3ljsIeY8cLYTKaOQyegLKvhmnshg%3D%3D" animate="on"></div>
<div style="clear:both;"></div>

<div id="categories-suggest">
<div class="cat-entry">
<h4>Xem thêm các chuyên mục:</h4>
<ul>
<li><a href="https://o7planning.org/vi/10969/java-hibernate">Các hướng dẫn Hibernate Framework</a></li>
</ul>
</div>
</div>

</div>
<aside id="sidebar" role="complementary">




<div class="cat-entry"><span id="ezoic-pub-ad-placeholder-138" class="ezoic-adpicker-ad"></span><span style="display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px;" class="ezoic-ad box-1 adtester-container adtester-container-138" data-ez-name="o7planning_org-box-1"><span id="div-gpt-ad-o7planning_org-box-1-0" ezaw="336" ezah="280" style="position:relative;z-index:0;display:inline-block;" class="ezoic-ad"><script data-cfasync="false" type="text/javascript" style="display:none;">eval(ez_write_tag([[336,280],'o7planning_org-box-1','ezslot_1']));</script><div id="google_ads_iframe_/1254144/o7planning_org-box-1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-box-1_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-box-1_0" width="336" height="280" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(6).html"></iframe></div></span></span>
<h4>Các hướng dẫn Hibernate Framework</h4>
<ul>
<li><a href="https://o7planning.org/vi/10201/huong-dan-lap-trinh-java-hibernate-cho-nguoi-moi-bat-dau">Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu</a></li>
<li><a href="https://o7planning.org/vi/11223/tao-ra-he-thong-bang-tu-cac-class-entity-trong-hibernate">Tạo ra hệ thống Bảng từ các class Entity trong Hibernate</a></li>
<li><a href="https://o7planning.org/vi/10225/tra-cuu-java-hibernate">Tra cứu Java Hibernate</a></li>
<li><a href="https://o7planning.org/vi/10119/cai-dat-jboss-tools-vao-eclipse">Cài đặt JBoss Tools vào Eclipse</a></li>
<li><a href="https://o7planning.org/vi/10125/su-dung-hibernate-tool-tao-ra-cac-class-entity-tu-cac-bang">Sử dụng Hibernate Tool tạo ra các class Entity từ các bảng</a></li>
<li><a href="https://o7planning.org/vi/11797/phan-trang-pagination-trong-java-hibernate">Phân trang (Pagination) trong Java Hibernate</a></li>
</ul>
</div>



<div style="clear:both;"></div>
<div class="">
<span id="ezoic-pub-ad-placeholder-125"></span>
<span id="ezoic-pub-ad-placeholder-116" class="ezoic-adpicker-ad"></span><span style="display:block !important;float:none !important;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:300px;min-width:336px;text-align:center !important;" class="ezoic-ad large-billboard-2 adtester-container adtester-container-116" data-ez-name="o7planning_org-large-billboard-2"><span id="div-gpt-ad-o7planning_org-large-billboard-2-0" ezaw="336" ezah="280" style="position:relative;z-index:0;display:inline-block;" class="ezoic-ad"><script data-cfasync="false" type="text/javascript" style="display:none;">eval(ez_write_tag([[336,280],'o7planning_org-large-billboard-2','ezslot_4']));</script><div id="google_ads_iframe_/1254144/o7planning_org-large-billboard-2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-large-billboard-2_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-large-billboard-2_0" width="336" height="280" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(7).html"></iframe></div></span></span></div>
<div style="clear:both;"></div>


<div class="cat-entry" style="color:#006633;">
<h4>Tài liệu mới nhất</h4>
<ul>
<li>
<a href="https://o7planning.org/vi/11853/huong-dan-tao-vps-mien-phi-tren-google-cloud">
Hướng dẫn tạo VPS miễn phí trên Google Cloud
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11833/huong-dan-download-sap-trial-system">
Hướng dẫn download SAP Trial System
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11673/vi-du-upload-file-voi-spring-boot-va-angularjs">
Ví dụ Upload file với Spring Boot và AngularJS
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11677/bao-mat-spring-boot-restful-service-su-dung-auth0-jwt">
Bảo mật Spring Boot RESTful Service sử dụng Auth0 JWT
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11823/dang-nhap-bang-mang-xa-hoi-voi-oauth2-trong-spring-boot">
Đăng nhập bằng mạng xã hội với OAuth2 trong Spring Boot
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11801/huong-dan-su-dung-spring-boot-va-mustache">
Hướng dẫn sử dụng Spring Boot và Mustache
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11799/huong-dan-su-dung-spring-boot-va-groovy">
Hướng dẫn sử dụng Spring Boot và Groovy
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11813/vi-du-upload-file-voi-spring-boot-va-jquery-ajax">
Ví dụ Upload file với Spring Boot và jQuery Ajax
</a>
</li>
<li>
<a href="https://o7planning.org/vi/11797/phan-trang-pagination-trong-java-hibernate">
Phân trang (Pagination) trong Java Hibernate
 </a>
</li>
<li>
<a href="https://o7planning.org/vi/11793/vi-du-crud-voi-spring-boot-rest-va-angularjs">
Ví dụ CRUD với Spring Boot, REST và AngularJS
</a>
</li>
</ul>
</div>


<div id="ads-float-marker" style="padding:5px;"></div>
<div id="ads-float">
<span id="ezoic-pub-ad-placeholder-108"></span><span style="display:block !important;float:none;margin-bottom:20px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:280px;min-width:336px;text-align:center !important;" class="ezoic-ad large-leaderboard-1 adtester-container adtester-container-108" data-ez-name="o7planning_org-large-leaderboard-1"><span id="div-gpt-ad-o7planning_org-large-leaderboard-1-0" ezaw="336" ezah="280" style="position:relative;z-index:0;display:inline-block;" class="ezoic-ad"><script data-cfasync="false" type="text/javascript" style="display:none;">eval(ez_write_tag([[336,280],'o7planning_org-large-leaderboard-1','ezslot_0']));</script><div id="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-1_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-large-leaderboard-1_0" width="336" height="280" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(8).html"></iframe></div></span></span>
<div style="clear:both;"></div>
<div style="clear:both;"></div>
<span id="ezoic-pub-ad-placeholder-122"></span><span style="display:inline-block;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:160px;" class="ezoic-ad link-v-med-1 adtester-container adtester-container-122" data-ez-name="o7planning_org-link-v-med-1"><div id="o7planning_org-link-v-med-1" class="ezo_link_unit_m"><script type="text/javascript">window._mNHandle = window._mNHandle || {};window._mNHandle.queue = window._mNHandle.queue || [];medianet_versionId = "121199";(function() {var sct = document.createElement("script"), sctHl = document.getElementsByTagName("script")[0], isSSL = 'https:' == document.location.protocol;sct.type = "text/javascript";sct.src = (isSSL ? 'https:' : 'http:') + '//contextual.media.net/dmedianet.js?cid=8CUKY1173' + (isSSL ? '&https=1' : '')+'';sct.async = "async";sctHl.parentNode.insertBefore(sct, sctHl);})();</script><span id="967248659"><script type="text/javascript">try {window._mNHandle.queue.push(function () {window._mNDetails.loadTag("967248659", "160x90", "967248659");});}catch (error) {}</script><iframe marginwidth="0" marginheight="0" scrolling="no" frameborder="0" height="90" width="160" id="_mN_dy_967248659" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(9).html"></iframe></span></div></span>
<div style="clear:both;"></div>
</div>


</aside>
<div style="clear:both;"></div>

</div>
<div style="clear:both;"></div>
</section>
</div><img width="1" height="1" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/pixel.gif" id="imgfollowtd" style="display: none !important;">
<div id="footer-ads-container">
<div id="footer-ads-holder" class="inner-wrapper">
<span id="ezoic-pub-ad-placeholder-117"></span><span style="display:none !important;float:none;margin-bottom:20px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-height:250px;min-width:970px;text-align:left !important;" class="ezoic-ad medrectangle-1 adtester-container adtester-container-117" data-ez-name="o7planning_org-medrectangle-1"><span id="div-gpt-ad-o7planning_org-medrectangle-1-0" ezaw="970" ezah="250" style="position:relative;z-index:0;display:none;" class="ezoic-ad"><div id="google_ads_iframe_/1254144/o7planning_org-medrectangle-1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1254144/o7planning_org-medrectangle-1_0" title="3rd party ad content" name="google_ads_iframe_/1254144/o7planning_org-medrectangle-1_0" width="970" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(10).html"></iframe></div></span></span><script>var ezzns4 = {};</script><script type="text/javascript" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/publishertag.js.download"></script>
<div class="ezflad-47" style="display:inline-block" adunitname="o7planning_org-medrectangle-1" id="crt-4">
<script type="text/javascript">
var ezoflbf_2_4 = function() { __ez.queue.addFunc('ReloadFromP_1117', 'IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.ReloadFromP', 1117, false, ['banger.js'], false, false, false, true); };
var ezoflbf_4 = function() { eval(ez_write_tag([[970,250],'o7planning_org-medrectangle-1','ezslot_7']));
		};</script><script type="text/javascript">ezoflbf_4();
</script></div>
<script type="text/javascript">
	var __ezfl_sss_1117 = function() {
		setTimeout(function(){
			var ezflaun = IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.GetNameFromPositionId(1117);
			if (typeof ezflaun != 'undefined' && ezflaun.length > 0) {
				if (typeof ez_ad_units != undefined) {
					for (i = 0; i < ez_ad_units.length; i++) {
						if (ezflaun.indexOf(ez_ad_units[i][1]) >= 0) {
							return false;
						}
					}
				}
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.StoreStatSource(ezflaun, 47, 13.00);
				IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL.RemoveSlotById(ezflaun);
			}
		}, 8000);
	};
	__ez.queue.addFunc('__ezfl_sss_1117', '__ezfl_sss_1117', null, false, ['banger.js'], false, false, false, true);
</script>
</div>
</div>
<div id="footer-container">

<div id="footer" class="inner-wrapper" style="height: 85px;">
<div class="site">
o7planning.org
</div>
<div class="statistics">
</div>
<div class="statistics">
<br><br>
Liên kết bạn bè:
<a target="_blank" href="http://freetuts.net/" style="color:white;" class="target-blank-url">PHP (freetuts.net)</a>
|
<a target="_blank" href="http://laptrinhvb.net/" style="color:white;" class="target-blank-url">
Vb.Net (laptrinhvb.net)
</a>
</div>
<span id="ezoic-pub-ad-placeholder-136" class="ezoic-adpicker-ad"></span><span style="display:block !important;float:none;margin-bottom:2px !important;margin-left:0px !important;margin-right:0px !important;margin-top:2px !important;min-width:728px;text-align:center !important;" class="ezoic-ad link-h-large-2 adtester-container adtester-container-136" data-ez-name="o7planning_org-link-h-large-2"><div id="o7planning_org-link-h-large-2" class="ezo_link_unit_m"><script type="text/javascript">window._mNHandle = window._mNHandle || {};window._mNHandle.queue = window._mNHandle.queue || [];medianet_versionId = "121199";(function() {var sct = document.createElement("script"), sctHl = document.getElementsByTagName("script")[0], isSSL = 'https:' == document.location.protocol;sct.type = "text/javascript";sct.src = (isSSL ? 'https:' : 'http:') + '//contextual.media.net/dmedianet.js?cid=8CUKY1173' + (isSSL ? '&https=1' : '')+'';sct.async = "async";sctHl.parentNode.insertBefore(sct, sctHl);})();</script><span id="588886160"><script type="text/javascript">try {window._mNHandle.queue.push(function () {window._mNDetails.loadTag("588886160", "728x15", "588886160");});}catch (error) {}</script><iframe marginwidth="0" marginheight="0" scrolling="no" frameborder="0" height="15" width="728" id="_mN_dy_588886160" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/saved_resource(11).html"></iframe></span></div></span></div>

</div>
<script>
         SyntaxHighlighter.highlight();
      </script>
<div id="nav-controls">
<a href="javascript:top.window.scrollTo(0,0)" title="Top">
<img alt="Top" border="0" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/go-top.png"></a>
<br>
<a href="javascript:window.scrollTo(document.body.clientWidth,document.body.clientHeight/2)" title="Center">
<img alt="Middle page" border="0" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/go-center.png"></a>
<br>
<a href="javascript:window.scrollTo(document.body.clientWidth,document.body.clientHeight)" title="Bottom">
<img alt="Bottom" border="0" src="./1_Hướng dẫn lập trình Java Hibernate cho người mới bắt đầu_files/go-bottom.png"></a>
</div>
<div>
</div>
<div id="aweb" style="width:1px;height: 1px;border:1px solid blue;overflow:hidden;"></div>
<script type="text/javascript" style="display:none;">
var __ez_dims = (function() {
	var setCookie = function( name, content, expiry ) {
		return document.cookie = name+'='+content+((expiry)?';expires='+(new Date(Math.floor(new Date().getTime()+expiry*1000)).toUTCString()):'');
	};
	var ffid = 1;
	var oh = window.screen.height;
	var ow = window.screen.width;
	var h = ffid === 1 ? oh : (oh > ow) ? oh : ow;
	var w = ffid === 1 ? ow : (oh > ow) ? ow : oh;
	var uh = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight;
	var uw = window.innerWidth || document.documentElement.clientWidth || document.getElementsByTagName('body')[0].clientWidth;
	setCookie('ezds', encodeURIComponent('ffid='+ffid+',w='+w+',h='+h), (31536e3*7));
	setCookie('ezohw', encodeURIComponent('w='+uw+',h='+uh), (31536e3*7));
})();
</script><script type="text/javascript" style="display:none;" async="">
__ez.queue.addFile('edmonton.php', '//o7planning.org/detroitchicago/edmonton.webp?a=a&cb=173-0&shcb=29', true, [], true, false, false, false);
__ez.queue.addFile('jellyfish.php', '//o7planning.org/porpoiseant/jellyfish.webp?a=a&cb=173-0&shcb=29', false, [], true, false, false, false);
</script>
<div id="dmo1" style="display:none">
<script type="text/javascript"><!--
		google_ad_client = "ca-pub-6396844742497208";
		/* dmo */
		google_ad_slot = "dmo";
		google_ad_width = 88;
		google_ad_height = 31;
		//-->
	</script>
<script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
<script>var _comscore=_comscore||[];_comscore.push({c1:"2",c2:"20015427"});(function(){var s=document.createElement("script"),el=document.getElementsByTagName("script")[0];s.async=true;s.src=(document.location.protocol=="https:"?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";el.parentNode.insertBefore(s,el)})();</script><noscript>&lt;img src="https://sb.scorecardresearch.com/p?c1=2&amp;c2=20015427&amp;cv=2.0&amp;cj=1"/&gt;</noscript>
<script type="text/javascript">var _qevents=_qevents||[];(function(){var elem=document.createElement('script');elem.src=(document.location.protocol=="https:"?"https://secure":"http://edge")+".quantserve.com/quant.js";elem.async=true;elem.type="text/javascript";var scpt=document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem,scpt)})();_qevents.push({qacct:"p-31iz6hfFutd16",labels:"Domain.o7planning_org,DomainId.22529"});</script><noscript>&lt;div style="display:none;"&gt;&lt;img src="//pixel.quantserve.com/pixel/p-31iz6hfFutd16.gif?labels=Domain.o7planning_org,DomainId.22529"border="0"height="1"width="1"alt="Quantcast"/&gt;&lt;/div&gt;</noscript>
<div id="st-4" class=" st-sticky-share-buttons st-left st-toggleable st-has-labels st-show-total "><div class="st-total ">
  <span class="st-label">55</span>
  <span class="st-shares">
    Shares
  </span>
</div><div class="st-btn st-first" data-network="facebook" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m21.7 16.7h5v5h-5v11.6h-5v-11.6h-5v-5h5v-2.1c0-2 0.6-4.5 1.8-5.9 1.3-1.3 2.8-2 4.7-2h3.5v5h-3.5c-0.9 0-1.5 0.6-1.5 1.5v3.5z"></path>
  </g>
</svg>
  <span class="st-label">48</span>
</div><div class="st-btn st-hide-label" data-network="twitter" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m31.5 11.7c1.3-0.8 2.2-2 2.7-3.4-1.4 0.7-2.7 1.2-4 1.4-1.1-1.2-2.6-1.9-4.4-1.9-1.7 0-3.2 0.6-4.4 1.8-1.2 1.2-1.8 2.7-1.8 4.4 0 0.5 0.1 0.9 0.2 1.3-5.1-0.1-9.4-2.3-12.7-6.4-0.6 1-0.9 2.1-0.9 3.1 0 2.2 1 3.9 2.8 5.2-1.1-0.1-2-0.4-2.8-0.8 0 1.5 0.5 2.8 1.4 4 0.9 1.1 2.1 1.8 3.5 2.1-0.5 0.1-1 0.2-1.6 0.2-0.5 0-0.9 0-1.1-0.1 0.4 1.2 1.1 2.3 2.1 3 1.1 0.8 2.3 1.2 3.6 1.3-2.2 1.7-4.7 2.6-7.6 2.6-0.7 0-1.2 0-1.5-0.1 2.8 1.9 6 2.8 9.5 2.8 3.5 0 6.7-0.9 9.4-2.7 2.8-1.8 4.8-4.1 6.1-6.7 1.3-2.6 1.9-5.3 1.9-8.1v-0.8c1.3-0.9 2.3-2 3.1-3.2-1.1 0.5-2.3 0.8-3.5 1z"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn st-hide-label" data-network="pinterest" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m37.3 20q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3q-2.4 0-4.8-0.7 1.3-2 1.7-3.6 0.2-0.8 1.2-4.7 0.5 0.8 1.7 1.5t2.5 0.6q2.7 0 4.8-1.5t3.3-4.2 1.2-6.1q0-2.5-1.4-4.7t-3.8-3.7-5.7-1.4q-2.4 0-4.4 0.7t-3.4 1.7-2.5 2.4-1.5 2.9-0.4 3q0 2.4 0.8 4.1t2.7 2.5q0.6 0.3 0.8-0.5 0.1-0.1 0.2-0.6t0.2-0.7q0.1-0.5-0.3-1-1.1-1.3-1.1-3.3 0-3.4 2.3-5.8t6.1-2.5q3.4 0 5.3 1.9t1.9 4.7q0 3.8-1.6 6.5t-3.9 2.6q-1.3 0-2.2-0.9t-0.5-2.4q0.2-0.8 0.6-2.1t0.7-2.3 0.2-1.6q0-1.2-0.6-1.9t-1.7-0.7q-1.4 0-2.3 1.2t-1 3.2q0 1.6 0.6 2.7l-2.2 9.4q-0.4 1.5-0.3 3.9-4.6-2-7.5-6.3t-2.8-9.4q0-4.7 2.3-8.6t6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn" data-network="linkedin" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m13.3 31.7h-5v-16.7h5v16.7z m18.4 0h-5v-8.9c0-2.4-0.9-3.5-2.5-3.5-1.3 0-2.1 0.6-2.5 1.9v10.5h-5s0-15 0-16.7h3.9l0.3 3.3h0.1c1-1.6 2.7-2.8 4.9-2.8 1.7 0 3.1 0.5 4.2 1.7 1 1.2 1.6 2.8 1.6 5.1v9.4z m-18.3-20.9c0 1.4-1.1 2.5-2.6 2.5s-2.5-1.1-2.5-2.5 1.1-2.5 2.5-2.5 2.6 1.2 2.6 2.5z"></path>
  </g>
</svg>
  <span class="st-label">1</span>
</div><div class="st-btn st-hide-label" data-network="googleplus" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m25.2 20.3q0 3.6-1.6 6.5t-4.3 4.4-6.5 1.6q-2.6 0-5-1t-4.1-2.7-2.7-4.1-1-5 1-5 2.7-4.1 4.1-2.7 5-1q5 0 8.6 3.3l-3.5 3.4q-2-2-5.1-2-2.1 0-4 1.1t-2.8 2.9-1.1 4.1 1.1 4.1 2.8 2.9 4 1.1q1.5 0 2.7-0.4t2-1 1.4-1.4 0.8-1.4 0.4-1.3h-7.3v-4.4h12.1q0.3 1.1 0.3 2.1z m15.1-2.1v3.6h-3.6v3.7h-3.7v-3.7h-3.7v-3.6h3.7v-3.7h3.7v3.7h3.6z"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn st-hide-label" data-network="vk" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m39.8 12.2q0.5 1.3-3.1 6.1-0.5 0.7-1.4 1.8-1.6 2-1.8 2.7-0.4 0.8 0.3 1.7 0.3 0.4 1.6 1.7h0.1l0 0q3 2.8 4 4.6 0.1 0.1 0.1 0.3t0.2 0.5 0 0.8-0.5 0.5-1.3 0.3l-5.3 0.1q-0.5 0.1-1.1-0.1t-1.1-0.5l-0.4-0.2q-0.7-0.5-1.5-1.4t-1.4-1.6-1.3-1.2-1.1-0.3q-0.1 0-0.2 0.1t-0.4 0.3-0.4 0.6-0.4 1.1-0.1 1.6q0 0.3-0.1 0.5t-0.1 0.4l-0.1 0.1q-0.4 0.4-1.1 0.5h-2.4q-1.5 0.1-3-0.4t-2.8-1.1-2.1-1.3-1.5-1.2l-0.5-0.5q-0.2-0.2-0.6-0.6t-1.4-1.9-2.2-3.2-2.6-4.4-2.7-5.6q-0.1-0.3-0.1-0.6t0-0.3l0.1-0.1q0.3-0.4 1.2-0.4l5.7-0.1q0.2 0.1 0.5 0.2t0.3 0.2l0.1 0q0.3 0.2 0.5 0.7 0.4 1 1 2.1t0.8 1.7l0.3 0.6q0.6 1.3 1.2 2.2t1 1.4 0.9 0.8 0.7 0.3 0.5-0.1q0.1 0 0.1-0.1t0.3-0.5 0.3-0.9 0.2-1.7 0-2.6q-0.1-0.9-0.2-1.5t-0.3-1l-0.1-0.2q-0.5-0.7-1.8-0.9-0.3-0.1 0.1-0.5 0.4-0.4 0.8-0.7 1.1-0.5 5-0.5 1.7 0.1 2.8 0.3 0.4 0.1 0.7 0.3t0.4 0.5 0.2 0.7 0.1 0.9 0 1.1-0.1 1.5 0 1.7q0 0.3 0 0.9t-0.1 1 0.1 0.8 0.3 0.8 0.4 0.6q0.2 0 0.4 0t0.5-0.2 0.8-0.7 1.1-1.4 1.4-2.2q1.2-2.2 2.2-4.7 0.1-0.2 0.2-0.4t0.3-0.2l0 0 0.1-0.1 0.3-0.1 0.4 0 6 0q0.8-0.1 1.3 0t0.7 0.4z"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn st-hide-label" data-network="odnoklassniki" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m19.8 20.2q-4.2 0-7.2-2.9t-2.9-7.2q0-4.2 2.9-7.1t7.2-3 7.1 3 3 7.1q0 4.2-3 7.2t-7.1 2.9z m0-15.1q-2.1 0-3.5 1.5t-1.5 3.5q0 2.1 1.5 3.5t3.5 1.5 3.5-1.5 1.5-3.5q0-2-1.5-3.5t-3.5-1.5z m11.7 16.4q0.3 0.6 0.3 1.1t-0.1 0.9-0.6 0.8-0.9 0.9-1.4 0.9q-2.6 1.6-7 2.1l1.6 1.6 5.9 6q0.7 0.7 0.7 1.6t-0.7 1.6l-0.2 0.3q-0.7 0.7-1.7 0.7t-1.6-0.7q-1.5-1.5-6-6l-6 6q-0.6 0.7-1.6 0.7t-1.6-0.7l-0.3-0.3q-0.7-0.6-0.7-1.6t0.7-1.6l7.6-7.6q-4.6-0.5-7.1-2.1-0.9-0.6-1.4-0.9t-0.9-0.9-0.6-0.8-0.1-0.9 0.3-1.1q0.2-0.5 0.6-0.8t1-0.5 1.2 0 1.5 0.8q0.1 0.1 0.3 0.3t1 0.5 1.5 0.7 2.1 0.5 2.5 0.3q2 0 3.9-0.6t2.6-1.1l0.9-0.6q0.7-0.5 1.4-0.8t1.3 0 0.9 0.5 0.7 0.8z"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn" data-network="tumblr" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m25.9 29.9v-3.5c-1.1 0.8-2.2 1.1-3.3 1.1-0.5 0-1-0.1-1.6-0.4-0.4-0.3-0.6-0.5-0.7-0.9-0.2-0.3-0.3-1.1-0.3-2.4v-5.5h5v-3.3h-5v-5.6h-3c-0.2 1.3-0.5 2.2-0.7 2.8-0.3 0.7-0.8 1.3-1.5 1.9-0.7 0.5-1.4 0.9-2.1 1.2v3h2.3v7.6c0 0.8 0.1 1.6 0.4 2.2 0.2 0.5 0.5 1 1.1 1.5 0.4 0.4 1 0.8 1.8 1.1 1 0.3 1.9 0.4 2.7 0.4 0.8 0 1.6-0.1 2.4-0.3 0.8-0.2 1.7-0.5 2.5-0.9z"></path>
  </g>
</svg>
  <span class="st-label">1</span>
</div><div class="st-btn" data-network="reddit" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m40 18.9q0 1.3-0.7 2.3t-1.7 1.7q0.2 1 0.2 2.1 0 3.5-2.3 6.4t-6.5 4.7-9 1.7-8.9-1.7-6.4-4.7-2.4-6.4q0-1.1 0.2-2.1-1.1-0.6-1.8-1.6t-0.7-2.4q0-1.8 1.3-3.2t3.1-1.3q1.9 0 3.3 1.4 4.8-3.3 11.5-3.6l2.6-11.6q0-0.3 0.3-0.5t0.6-0.1l8.2 1.8q0.4-0.8 1.2-1.3t1.8-0.5q1.4 0 2.4 1t0.9 2.3-0.9 2.4-2.4 1-2.4-1-0.9-2.4l-7.5-1.6-2.3 10.5q6.7 0.2 11.6 3.6 1.3-1.4 3.2-1.4 1.8 0 3.1 1.3t1.3 3.2z m-30.7 4.4q0 1.4 1 2.4t2.4 1 2.3-1 1-2.4-1-2.3-2.3-1q-1.4 0-2.4 1t-1 2.3z m18.1 8q0.3-0.3 0.3-0.6t-0.3-0.6q-0.2-0.2-0.5-0.2t-0.6 0.2q-0.9 0.9-2.7 1.4t-3.6 0.4-3.6-0.4-2.7-1.4q-0.2-0.2-0.5-0.2t-0.6 0.2q-0.3 0.2-0.3 0.6t0.3 0.6q1 0.9 2.6 1.5t2.8 0.6 2 0.1 2-0.1 2.8-0.6 2.6-1.6z m-0.1-4.6q1.4 0 2.4-1t1-2.4q0-1.3-1-2.3t-2.4-1q-1.3 0-2.3 1t-1 2.3 1 2.4 2.3 1z"></path>
  </g>
</svg>
  <span class="st-label">1</span>
</div><div class="st-btn st-hide-label" data-network="blogger" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="M27.5,30 L12.5,30 C11.125,30 10,28.875 10,27.5 C10,26.125 11.125,25 12.5,25 L27.5,25 C28.875,25 30,26.125 30,27.5 C30,28.875 28.875,30 27.5,30 M12.5,10 L20,10 C21.375,10 22.5,11.125 22.5,12.5 C22.5,13.875 21.375,15 20,15 L12.5,15 C11.125,15 10,13.875 10,12.5 C10,11.125 11.125,10 12.5,10 M37.41375,15 L35.21875,15 L35.17125,15 C33.7975,15 32.59375,13.8375 32.5,12.5 C32.5,5.365 26.7475,0 19.5625,0 L13.0075,0 C5.8275,0 0.005,5.78125 0,12.91625 L0,27.08875 C0,34.22375 5.8275,40 13.0075,40 L27.0075,40 C34.1925,40 40,34.22375 40,27.08875 L40,17.93375 C40,16.5075 38.85,15 37.41375,15"></path>
  </g>
</svg>
  <span class="st-label"></span>
</div><div class="st-btn st-last" data-network="email" style="display: inline-block;">
  <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m33.4 13.4v-3.4l-13.4 8.4-13.4-8.4v3.4l13.4 8.2z m0-6.8q1.3 0 2.3 1.1t0.9 2.3v20q0 1.3-0.9 2.3t-2.3 1.1h-26.8q-1.3 0-2.3-1.1t-0.9-2.3v-20q0-1.3 0.9-2.3t2.3-1.1h26.8z"></path>
  </g>
</svg>
  <span class="st-label">2</span>
</div><div class="st-toggle">
  <div class="st-left">
    <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m22 30.7q0 0.3-0.2 0.5l-1.1 1.1q-0.3 0.3-0.6 0.3t-0.5-0.3l-10.4-10.4q-0.2-0.2-0.2-0.5t0.2-0.5l10.4-10.4q0.3-0.2 0.5-0.2t0.6 0.2l1.1 1.1q0.2 0.3 0.2 0.5t-0.2 0.6l-8.8 8.7 8.8 8.8q0.2 0.2 0.2 0.5z m8.6 0q0 0.3-0.3 0.5l-1.1 1.1q-0.2 0.3-0.5 0.3t-0.5-0.3l-10.4-10.4q-0.2-0.2-0.2-0.5t0.2-0.5l10.4-10.4q0.2-0.2 0.5-0.2t0.5 0.2l1.1 1.1q0.3 0.3 0.3 0.5t-0.3 0.6l-8.7 8.7 8.7 8.8q0.3 0.2 0.3 0.5z"></path>
  </g>
</svg>
  </div>
  <div class="st-right">
    <svg fill="#fff" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40">
  <g>
    <path d="m22.3 21.4q0 0.3-0.2 0.5l-10.4 10.4q-0.3 0.3-0.6 0.3t-0.5-0.3l-1.1-1.1q-0.2-0.2-0.2-0.5t0.2-0.5l8.8-8.8-8.8-8.7q-0.2-0.3-0.2-0.6t0.2-0.5l1.1-1.1q0.3-0.2 0.5-0.2t0.6 0.2l10.4 10.4q0.2 0.2 0.2 0.5z m8.6 0q0 0.3-0.3 0.5l-10.4 10.4q-0.2 0.3-0.5 0.3t-0.5-0.3l-1.1-1.1q-0.2-0.2-0.2-0.5t0.2-0.5l8.8-8.8-8.8-8.7q-0.2-0.3-0.2-0.6t0.2-0.5l1.1-1.1q0.2-0.2 0.5-0.2t0.5 0.2l10.4 10.4q0.3 0.2 0.3 0.5z"></path>
  </g>
</svg>
  </div>
</div></div><table cellspacing="0" cellpadding="0" class="gstl_50 gssb_c" style="width: 167px; display: none; top: 35px; position: absolute; left: 1329px;"><tbody><tr><td class="gssb_f"></td><td class="gssb_e" style="width: 100%;"></td></tr></tbody></table></body></html>