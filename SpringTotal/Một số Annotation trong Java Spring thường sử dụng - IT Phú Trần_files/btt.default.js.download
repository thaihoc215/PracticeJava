
(function(require,define){var DOMAIN,CUSTOMER,ZOTABOX,DOMAIN_STATIC_DIR,DOMAIN_CACHE_DIR;var Stats;var _,async,Class,Widget,DomainRules;var Sly,CookieManager,Request,jQuery;define("Widgets.BackToTop.BaseWidgetFunction",["Depd.ZBLib","Depd.TweenMax"],function(t,o){return{iframe:null,ZBLib:null,onIframeReady:function(){},onloaded:function(){},initialize:function(){this._initializeComponent()},render:function(){var o=this;_.extend(this.data,{domain:DOMAIN}),this.data.ZOTABOX_DOMAIN_ACTIONS=ZOTABOX.actions,this.ZBLib=new t;this.el.appendChild(this.iframe),this.iframe.contentDocument?iframeDocument=this.iframe.contentDocument:this.iframe.contentWindow&&(iframeDocument=this.iframe.contentWindow.document),iframeDocument.open(),this.iframe.contentWindow._=_,this.iframe.contentWindow.Stats=Stats,this.iframe.contentWindow.ZOTABOX=ZOTABOX,this.iframe.contentWindow.Zotabox=Zotabox,this.iframe.contentWindow.DOMAIN=DOMAIN,this.iframe.contentWindow.ZBLib=o.ZBLib,iframeDocument.write(o.templates.iframe(_.extend({},o.data,{buttonsHtml:o._getButtonsHtml()}))),this.iframe.setAttribute("id","ztb-btt-widget-"+this.data.client_hash_id),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("class","ztb-btt-widget-iframe"),iframeDocument.close();var i=document.createElement("style");i.setAttribute("type","text/css"),i.styleSheet?i.styleSheet.cssText=Zotabox.getTemplates("fonts")({STATIC_DOMAIN_URI:[Zotabox.getDomainURIs("static"),"__"+Zotabox.getConfig().version].join("/")}):i.textContent=Zotabox.getTemplates("fonts")({STATIC_DOMAIN_URI:[Zotabox.getDomainURIs("static"),"__"+Zotabox.getConfig().version].join("/")}),iframeDocument.getElementsByTagName("head")[0].appendChild(i);var a=document.createElement("style");a.setAttribute("type","text/css"),a.styleSheet?a.styleSheet.cssText=o.styles.iframe:a.textContent=o.styles.iframe,iframeDocument.getElementsByTagName("head")[0].appendChild(a);var e=0,n=setInterval(function(){return e>40?clearInterval(n):o.iframe.contentWindow.BackToTop?(_.isFunction(o.onloaded)&&(o.BackToTopBox=new o.iframe.contentWindow.BackToTop,o.onloaded()),clearInterval(n)):void e++},100);return this},_getButtonsHtml:function(){var t=_.sortBy(this.getButtons(),"position"),o="";for(i=0;i<t.length;i++){var a=t[i];!0==a.on&&(o+=this.templates["icon-item"](a))}return o},toBoolean:function(t){return!!/(true|1)/g.test(String(t).toLowerCase())},getButtons:function(){return[{name:"shopping_cart",label:"Shopping Cart",icon:this.data.shopping_cart_icon,deeplink:this.data.shopping_cart_link,background:this.data.button_color,position:this.data.shopping_cart_position,on:this.toBoolean(this.data.shopping_cart_on),target:this.autoBlank(this.data.shopping_cart_link)},{name:"home",label:"Home",icon:this.data.home_icon,deeplink:this.ZBLib?this.ZBLib.convertUrl(this.data.home_link):this.data.home_link,background:this.data.button_color,position:this.data.home_position,on:this.toBoolean(this.data.home_on),target:this.autoBlank(this.data.home_link)},{name:"email",label:"Email",icon:this.data.email_icon,deeplink:"mailto:"+this.data.email,background:this.data.button_color,position:this.data.email_position,on:this.toBoolean(this.data.email_on),target:"_parent"},{name:"back_to_top",label:"Back to top",icon:this.data.back_to_top_icon,deeplink:"javascript:void(0);",background:this.data.button_color,position:this.data.back_to_top_position,on:this.toBoolean(this.data.back_to_top_on),target:""},{name:"back",label:"Back",icon:this.data.back_icon,deeplink:"javascript:void(0);",background:this.data.button_color,position:this.data.back_position,on:this.toBoolean(this.data.back_on),target:""},{name:"messenger",label:"Messenger",icon:this.data.messenger_icon,deeplink:this.convertFacebookFanpageURL(),background:this.data.button_color,position:this.data.messenger_position,on:this.toBoolean(this.data.messenger_on),target:"_blank"},{name:"support",label:"Support",icon:this.data.support_icon,deeplink:this.ZBLib?this.ZBLib.convertUrl(this.data.support_link):this.data.support_link,background:this.data.button_color,position:this.data.support_position,on:this.toBoolean(this.data.support_on),target:this.autoBlank(this.data.support_link)},{name:"coupon",label:"Coupon",icon:this.data.coupon_icon,deeplink:this.ZBLib?this.ZBLib.convertUrl(this.data.coupon_link):this.data.coupon_link,background:this.data.button_color,position:this.data.coupon_position,on:this.toBoolean(this.data.coupon_on),target:this.autoBlank(this.data.coupon_link)},{name:"location",label:"Location",icon:this.data.location_icon,deeplink:this.ZBLib?this.ZBLib.convertUrl(this.data.location_link):this.data.location_link,background:this.data.button_color,position:this.data.location_position,on:this.toBoolean(this.data.location_on),target:this.autoBlank(this.data.location_link)}]},_getCountButton:function(){var t=_.chain(this.getButtons()).reject(function(t){return _.isEqual(t.on,!1)}).size().value();return t<=0?0:t},convertFacebookFanpageURL:function(){var t=this.data.messenger_link;return t=t.replace("facebook.com","messenger.com/t")},autoBlank:function(t){var o=location.hostname,i="_blank";return(t.search(o)>=0||0==t.search("/")||0!=t.search("http"))&&(i="_parent"),i},calcWidthHeightIframe:function(){var t=this.data.icon_size,o=0,i=this._getCountButton(),a=1;return"style1"!=this.data.icon_style&&(a=5),o=i*(t+a)-a,("bottom/right"==this.data.placement&&"horizontal"==this.data.direction||"horizontal"==this.data.direction)&&(t=o,o=this.data.icon_size),{width:t,height:o}},backToTop:function(){Zotabox.Core.jQuery("html,body").animate({scrollTop:0},500)},doShow:function(){var t=this;this.BackToTopBox?this.BackToTopBox.refreshUI():this.onloaded=function(){t.BackToTopBox.refreshUI()};if(1==this.data.back_to_top_on){var o=this.data.placement;_.isEqual(this.data.placement,"bottom/right")&&(o=this.data.offsetRight>this.data.offsetLeft?"left":"right"),Zotabox.getMobileButton().addButton(_.extend({name:"back_to_top",label:"Back To Top",icon:"zb-btt-icon "+this.data.back_to_top_icon,color:this.data.button_color,target:"_parent",deeplink:"javascript:Zotabox.getWidgetById("+this.data.widget_id+").backToTop();",position:0,on:!!Zotabox.getDomainRules().isEnable(this._id),iconColor:this.data.icon_color,align:o},t.data,{})),Zotabox.getMobileButton().setOptions({align:o})}},_initializeComponent:function(){var t=this.calcWidthHeightIframe();this.iframe=document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("seamless",!0),this.iframe.setAttribute("width",t.width),this.iframe.setAttribute("height",t.height),this.iframe.setAttribute("style","width: "+t.width+"px;height:"+t.height+"px")}}});define("Widgets.BackToTop.Default",["Depd.TweenMax","Widgets.BackToTop.BaseWidgetFunction"],function(e,t){var n=_.extend(t,{});return Zotabox.Widget.extend(n)});define("Widgets.BackToTop.Default.Template",[],{"icon-item":function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ztb-icon-item '+(null==(__t=name)?"":__t)+'">\n\t<a href="'+(null==(__t=deeplink)?"":__t)+'" target="'+(null==(__t=target)?"":__t)+'">\n\t\t<i class="'+(null==(__t=icon)?"":__t)+'"></i>\n\t</a>\n</div>';return __p},iframe:function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+="<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n    ";var assetUri=[Zotabox.getDomainURIs().static,"__"+Zotabox.getConfig().version].join("/");__p+='\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <meta http-equiv="Content-Security-Policy" content="default-src *; media-src *; img-src * \'self\' data: blob:; script-src * \'self\' \'unsafe-inline\' \'unsafe-eval\'; style-src * \'self\' \'unsafe-inline\'; font-src * data: ;">\n    <script type="text/javascript" src="'+(null==(__t=assetUri)?"":__t)+'/asset/script/jquery.js"><\/script>\n    <style type="text/css">/*<![CDATA[*/'+(null==(__t=base_custom_css)?"":__t)+'/*]]>*/</style>\n    <style type="text/css">/*<![CDATA[*/'+(null==(__t=custom_css)?"":__t)+'/*]]>*/</style>\n</head>\n\n<body>\n    <div class="ztb-icon-wrapper '+(null==(__t=icon_style)?"":__t)+'">\n        '+(null==(__t=buttonsHtml)?"":__t)+"\n    </div>\n    ";var assetUri=[Zotabox.getDomainURIs().static,"__"+Zotabox.getConfig().version].join("/");__p+="\n\n<script type=\"text/javascript\">\n    var BackToTop = function() {\n        this.initialize();\n    }\n    var isShowButton = false;\n    BackToTop.prototype = {\n        initialize: function() {\n            var _super = this;\n            //click back to top\n            this.backToTop();\n\n            //Click back\n            this.back();\n            if(Zotabox.Core.jQuery(parent.window).width() <= 700){\n                _super.buttonEvent();\n            }\n        },\n        refreshUI: function(){\n            var _super = this;\n            jQuery(document).ready(function(){\n                //set button max position\n                _super.setButtonPosition();\n                _super.buttonEvent();\n                Zotabox.addEvent('resize', parent.window, function(e) {\n                    _super.setButtonPosition();\n                });\n            })\n        },\n        backToTop: function(){\n            if('"+__e(back_to_top_on)+"' == true){\n                document.querySelector(\".ztb-icon-item.back_to_top\").onclick = function(){\n                    Zotabox.Core.jQuery('html,body').animate({\n                        scrollTop: 0\n                    }, 500);\n                }\n            }\n        },\n        back: function(){\n            if('"+__e(back_on)+"' == true){\n                document.querySelector(\".ztb-icon-item.back\").onclick = function(){\n                    parent.window.history.go(-1);\n                }\n            }\n        },\n        buttonEvent: function(){\n            var _super = this,\n            when_scroll = parseInt('"+(null==(__t=when_scroll)?"":__t)+"')*(jQuery(parent.document).height() / 100),\n            randomNumber = Math.random(),\n            windowScrollTop = parent.document.documentElement.scrollTop || parent.document.body.scrollTop,\n            srcoll_top = windowScrollTop + Zotabox.Core.jQuery(parent.window).height();\n            Zotabox.addEvent('scroll', parent.window, function(e) {\n                var top = parent.window.pageYOffset;\n                var windowInnerHeight = parent.window.innerHeight;\n                var bottom = windowInnerHeight + top;\n                var bodyHeight = Math.max(document.body.scrollHeight, parent.document.body.offsetHeight,\n                        parent.document.documentElement.clientHeight, parent.document.documentElement.scrollHeight,\n                        parent.document.documentElement.offsetHeight);\n                var onOffset = (bodyHeight - innerHeight) * parseInt('"+(null==(__t=when_scroll)?"":__t)+"') / 100 + innerHeight;\n                windowScrollTop = parent.document.documentElement.scrollTop || parent.document.body.scrollTop;\n                srcoll_top = windowScrollTop + Zotabox.Core.jQuery(parent.window).height();\n                if(when_scroll == 0){\n                    //Hien thi ngay lap tuc\n                    _super.showButton();\n                }else if(onOffset <= bottom && top > 0){\n                    //Hien thi sau khi scroll\n                    _super.showButton();\n                }else{\n                    //An button\n                    _super.hideButton();\n                }\n            });\n\n            //Hien thi ngay lap tuc\n            if((srcoll_top > when_scroll || when_scroll == 0) && windowScrollTop > 0){\n                _super.showButton();\n            }\n        },\n        showButton: function(){\n            var elm = Zotabox.Core.jQuery(\"#ztb-btt-widget-"+(null==(__t=client_hash_id)?"":__t)+"\"),\n                elmMobile = Zotabox.Core.jQuery('[data-wzb=\"SocialMobileTool\"] .zbx-trigger .ztb-single-btt');\n            if(!isShowButton || elm.css('display') == 'none' || elmMobile.css('display') == 'none'){\n                isShowButton = true;\n                elm.show();\n                elmMobile.delay(300).css(\"display\",\"block\");\n                elm.addClass(\"ztb-btt-show\");\n                elm.animate({\n                    opacity: 1,\n                }, 300, function() {\n                    // Animation complete.\n                });\n            }\n        },\n        hideButton: function(){\n            if(isShowButton){\n                var elm = Zotabox.Core.jQuery(\"#ztb-btt-widget-"+(null==(__t=client_hash_id)?"":__t)+'"),\n                    elmMobile = Zotabox.Core.jQuery(\'[data-wzb="SocialMobileTool"] .zbx-trigger .ztb-single-btt\');\n                isShowButton = false;\n                elm.animate({\n                    opacity: 0,\n                }, 300, function() {\n                    elm.hide();\n                    elm.removeClass("ztb-btt-show");\n                });\n                elmMobile.delay(300).css("display","none");\n            }\n        },\n        setButtonPosition: function(){\n            var offsetTop = Zotabox.Core.jQuery("#ztb-btt-widget-'+(null==(__t=client_hash_id)?"":__t)+'").position().top,\n                windowHeight = jQuery(parent.window).height(),\n                widgetHeight = Zotabox.Core.jQuery("#ztb-btt-widget-'+(null==(__t=client_hash_id)?"":__t)+'").height();\n            if((windowHeight - offsetTop) < widgetHeight){\n                Zotabox.Core.jQuery("#ztb-btt-widget-'+(null==(__t=client_hash_id)?"":__t)+'").css({\n                    "top":"auto",\n                    "bottom": 0\n                });\n            }else{\n                Zotabox.Core.jQuery("#ztb-btt-widget-'+(null==(__t=client_hash_id)?"":__t)+"\").css({ 'top' : '', 'bottom' : '' });\n            }\n        }\n    }\n    window.onload = function() {\n        var buttonElms = Zotabox.Core.Sly('.ztb-icon-wrapper > a').search(document.body);\n        Zotabox._.each(buttonElms, function(buttonElm) {\n            Zotabox.addEvent('click', buttonElm, function(e) {\n                Zotabox.Stats.sendEvents2('CT', '"+(null==(__t=monitor_id)?"":__t)+"', "+(null==(__t=widget_id)?"":__t)+");\n            });\n        });\n        window.BackToTopBox = new BackToTop();\n    };\n<\/script>\n</body>\n</html>"}return __p},"pinterest-image-selection":function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div>\n    <p class="zbx-bar-title">\n        <i class="zbx-pinterest-logo"></i>\n        <i class="zbx-button-close-dialog"></i>\n    </p>\n\n    <ul class="zbx-pin-buttons">\n        '+(null==(__t=_.isEmpty(images)?'<li style="width: 100%;top: 50%;margin-top: -30px;">(no image to pin)</li>':null)?"":__t)+"\n        ",_.each(images,function(t){__p+='\n            <li>\n                <a href="'+__e(t.pinit)+'" target="_blank">\n                    <div class="zbx-pin-button">\n                        <em></em>\n                    </div>\n                    <img width="100%" height="auto" src="'+__e(t.src)+'">\n                </a>\n            </li>\n        '}),__p+="\n    </ul>\n</div>";return __p}});define("Widgets.BackToTop.Default.CodeName",[],"back_to_top");define("Widgets.BackToTop.Default.ClassName",[],"BackToTop");define("Widgets.BackToTop.Default.ThemeName",[],"Default");define("Widgets.BackToTop.Default.Installer",[],function(){return function(callback){DOMAIN=Zotabox.getData().domain;CUSTOMER=Zotabox.getData().customer;ZOTABOX=Zotabox.getDomainURIs();DOMAIN_STATIC_DIR=Zotabox.getDomainURIs().static+'/__'+Zotabox.getConfig().version;DOMAIN_CACHE_DIR=Zotabox.getDomainRoot()+'/'+Zotabox.getConfig().timestamp;_=Zotabox._;async=Zotabox.async;Class=Zotabox.Class;Widget=Zotabox.Widget;DomainRules=Zotabox.DomainRules;Sly=Zotabox.Core.Sly;CookieManager=Zotabox.Core.CookieManager;Request=Zotabox.Core.Request;jQuery=Zotabox.Core.jQuery;Stats=Zotabox.Stats;Zotabox.require(["Widgets.BackToTop.Default.CodeName","Widgets.BackToTop.Default.ClassName","Widgets.BackToTop.Default.ThemeName","Widgets.BackToTop.Default","Widgets.BackToTop.Default.Template"],function(codeName,className,ThemeName,Widget,templates){return callback.apply(this,[null].concat(arguments));});}});}).apply(Zotabox,[Zotabox.require,Zotabox.define]);